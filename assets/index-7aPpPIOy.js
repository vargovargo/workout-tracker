(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function j0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dg={exports:{}},Sl={},pg={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eo=Symbol.for("react.element"),U0=Symbol.for("react.portal"),z0=Symbol.for("react.fragment"),B0=Symbol.for("react.strict_mode"),$0=Symbol.for("react.profiler"),W0=Symbol.for("react.provider"),H0=Symbol.for("react.context"),q0=Symbol.for("react.forward_ref"),K0=Symbol.for("react.suspense"),G0=Symbol.for("react.memo"),Q0=Symbol.for("react.lazy"),jd=Symbol.iterator;function Y0(t){return t===null||typeof t!="object"?null:(t=jd&&t[jd]||t["@@iterator"],typeof t=="function"?t:null)}var mg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gg=Object.assign,yg={};function Hs(t,e,n){this.props=t,this.context=e,this.refs=yg,this.updater=n||mg}Hs.prototype.isReactComponent={};Hs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Hs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vg(){}vg.prototype=Hs.prototype;function _h(t,e,n){this.props=t,this.context=e,this.refs=yg,this.updater=n||mg}var wh=_h.prototype=new vg;wh.constructor=_h;gg(wh,Hs.prototype);wh.isPureReactComponent=!0;var Ud=Array.isArray,_g=Object.prototype.hasOwnProperty,Eh={current:null},wg={key:!0,ref:!0,__self:!0,__source:!0};function Eg(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)_g.call(e,r)&&!wg.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Eo,type:t,key:i,ref:o,props:s,_owner:Eh.current}}function X0(t,e){return{$$typeof:Eo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Th(t){return typeof t=="object"&&t!==null&&t.$$typeof===Eo}function J0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var zd=/\/+/g;function _u(t,e){return typeof t=="object"&&t!==null&&t.key!=null?J0(""+t.key):e.toString(36)}function ya(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Eo:case U0:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+_u(o,0):r,Ud(s)?(n="",t!=null&&(n=t.replace(zd,"$&/")+"/"),ya(s,e,n,"",function(h){return h})):s!=null&&(Th(s)&&(s=X0(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(zd,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Ud(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+_u(i,l);o+=ya(i,e,n,u,s)}else if(u=Y0(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+_u(i,l++),o+=ya(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Go(t,e,n){if(t==null)return t;var r=[],s=0;return ya(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Z0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _t={current:null},va={transition:null},ew={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:va,ReactCurrentOwner:Eh};function Tg(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:Go,forEach:function(t,e,n){Go(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Go(t,function(){e++}),e},toArray:function(t){return Go(t,function(e){return e})||[]},only:function(t){if(!Th(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ae.Component=Hs;ae.Fragment=z0;ae.Profiler=$0;ae.PureComponent=_h;ae.StrictMode=B0;ae.Suspense=K0;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ew;ae.act=Tg;ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=gg({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Eh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)_g.call(e,u)&&!wg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Eo,type:t.type,key:s,ref:i,props:r,_owner:o}};ae.createContext=function(t){return t={$$typeof:H0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:W0,_context:t},t.Consumer=t};ae.createElement=Eg;ae.createFactory=function(t){var e=Eg.bind(null,t);return e.type=t,e};ae.createRef=function(){return{current:null}};ae.forwardRef=function(t){return{$$typeof:q0,render:t}};ae.isValidElement=Th;ae.lazy=function(t){return{$$typeof:Q0,_payload:{_status:-1,_result:t},_init:Z0}};ae.memo=function(t,e){return{$$typeof:G0,type:t,compare:e===void 0?null:e}};ae.startTransition=function(t){var e=va.transition;va.transition={};try{t()}finally{va.transition=e}};ae.unstable_act=Tg;ae.useCallback=function(t,e){return _t.current.useCallback(t,e)};ae.useContext=function(t){return _t.current.useContext(t)};ae.useDebugValue=function(){};ae.useDeferredValue=function(t){return _t.current.useDeferredValue(t)};ae.useEffect=function(t,e){return _t.current.useEffect(t,e)};ae.useId=function(){return _t.current.useId()};ae.useImperativeHandle=function(t,e,n){return _t.current.useImperativeHandle(t,e,n)};ae.useInsertionEffect=function(t,e){return _t.current.useInsertionEffect(t,e)};ae.useLayoutEffect=function(t,e){return _t.current.useLayoutEffect(t,e)};ae.useMemo=function(t,e){return _t.current.useMemo(t,e)};ae.useReducer=function(t,e,n){return _t.current.useReducer(t,e,n)};ae.useRef=function(t){return _t.current.useRef(t)};ae.useState=function(t){return _t.current.useState(t)};ae.useSyncExternalStore=function(t,e,n){return _t.current.useSyncExternalStore(t,e,n)};ae.useTransition=function(){return _t.current.useTransition()};ae.version="18.3.1";pg.exports=ae;var se=pg.exports;const tw=j0(se);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nw=se,rw=Symbol.for("react.element"),sw=Symbol.for("react.fragment"),iw=Object.prototype.hasOwnProperty,ow=nw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,aw={key:!0,ref:!0,__self:!0,__source:!0};function Sg(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)iw.call(e,r)&&!aw.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:rw,type:t,key:i,ref:o,props:s,_owner:ow.current}}Sl.Fragment=sw;Sl.jsx=Sg;Sl.jsxs=Sg;dg.exports=Sl;var x=dg.exports,tc={},Ig={exports:{}},Mt={},xg={exports:{}},Ag={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,Z){var R=W.length;W.push(Z);e:for(;0<R;){var A=R-1>>>1,$=W[A];if(0<s($,Z))W[A]=Z,W[R]=$,R=A;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var Z=W[0],R=W.pop();if(R!==Z){W[0]=R;e:for(var A=0,$=W.length,Q=$>>>1;A<Q;){var X=2*(A+1)-1,te=W[X],ee=X+1,G=W[ee];if(0>s(te,R))ee<$&&0>s(G,te)?(W[A]=G,W[ee]=R,A=ee):(W[A]=te,W[X]=R,A=X);else if(ee<$&&0>s(G,R))W[A]=G,W[ee]=R,A=ee;else break e}}return Z}function s(W,Z){var R=W.sortIndex-Z.sortIndex;return R!==0?R:W.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],d=1,m=null,p=3,S=!1,P=!1,b=!1,M=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(W){for(var Z=n(h);Z!==null;){if(Z.callback===null)r(h);else if(Z.startTime<=W)r(h),Z.sortIndex=Z.expirationTime,e(u,Z);else break;Z=n(h)}}function O(W){if(b=!1,k(W),!P)if(n(u)!==null)P=!0,Rn(U);else{var Z=n(h);Z!==null&&vr(O,Z.startTime-W)}}function U(W,Z){P=!1,b&&(b=!1,T(y),y=-1),S=!0;var R=p;try{for(k(Z),m=n(u);m!==null&&(!(m.expirationTime>Z)||W&&!C());){var A=m.callback;if(typeof A=="function"){m.callback=null,p=m.priorityLevel;var $=A(m.expirationTime<=Z);Z=t.unstable_now(),typeof $=="function"?m.callback=$:m===n(u)&&r(u),k(Z)}else r(u);m=n(u)}if(m!==null)var Q=!0;else{var X=n(h);X!==null&&vr(O,X.startTime-Z),Q=!1}return Q}finally{m=null,p=R,S=!1}}var B=!1,_=null,y=-1,w=5,I=-1;function C(){return!(t.unstable_now()-I<w)}function N(){if(_!==null){var W=t.unstable_now();I=W;var Z=!0;try{Z=_(!0,W)}finally{Z?E():(B=!1,_=null)}}else B=!1}var E;if(typeof v=="function")E=function(){v(N)};else if(typeof MessageChannel<"u"){var je=new MessageChannel,kt=je.port2;je.port1.onmessage=N,E=function(){kt.postMessage(null)}}else E=function(){M(N,0)};function Rn(W){_=W,B||(B=!0,E())}function vr(W,Z){y=M(function(){W(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){P||S||(P=!0,Rn(U))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(W){switch(p){case 1:case 2:case 3:var Z=3;break;default:Z=p}var R=p;p=Z;try{return W()}finally{p=R}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,Z){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var R=p;p=W;try{return Z()}finally{p=R}},t.unstable_scheduleCallback=function(W,Z,R){var A=t.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?A+R:A):R=A,W){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=R+$,W={id:d++,callback:Z,priorityLevel:W,startTime:R,expirationTime:$,sortIndex:-1},R>A?(W.sortIndex=R,e(h,W),n(u)===null&&W===n(h)&&(b?(T(y),y=-1):b=!0,vr(O,R-A))):(W.sortIndex=$,e(u,W),P||S||(P=!0,Rn(U))),W},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(W){var Z=p;return function(){var R=p;p=Z;try{return W.apply(this,arguments)}finally{p=R}}}})(Ag);xg.exports=Ag;var lw=xg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uw=se,bt=lw;function j(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cg=new Set,Ki={};function Gr(t,e){Ds(t,e),Ds(t+"Capture",e)}function Ds(t,e){for(Ki[t]=e,t=0;t<e.length;t++)Cg.add(e[t])}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nc=Object.prototype.hasOwnProperty,cw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Bd={},$d={};function hw(t){return nc.call($d,t)?!0:nc.call(Bd,t)?!1:cw.test(t)?$d[t]=!0:(Bd[t]=!0,!1)}function fw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function dw(t,e,n,r){if(e===null||typeof e>"u"||fw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){st[t]=new wt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];st[e]=new wt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){st[t]=new wt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){st[t]=new wt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){st[t]=new wt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){st[t]=new wt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){st[t]=new wt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){st[t]=new wt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){st[t]=new wt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Sh=/[\-:]([a-z])/g;function Ih(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Sh,Ih);st[e]=new wt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Sh,Ih);st[e]=new wt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Sh,Ih);st[e]=new wt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){st[t]=new wt(t,1,!1,t.toLowerCase(),null,!1,!1)});st.xlinkHref=new wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){st[t]=new wt(t,1,!1,t.toLowerCase(),null,!0,!0)});function xh(t,e,n,r){var s=st.hasOwnProperty(e)?st[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(dw(e,n,s,r)&&(n=null),r||s===null?hw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var kn=uw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qo=Symbol.for("react.element"),us=Symbol.for("react.portal"),cs=Symbol.for("react.fragment"),Ah=Symbol.for("react.strict_mode"),rc=Symbol.for("react.profiler"),kg=Symbol.for("react.provider"),Rg=Symbol.for("react.context"),Ch=Symbol.for("react.forward_ref"),sc=Symbol.for("react.suspense"),ic=Symbol.for("react.suspense_list"),kh=Symbol.for("react.memo"),Fn=Symbol.for("react.lazy"),Pg=Symbol.for("react.offscreen"),Wd=Symbol.iterator;function mi(t){return t===null||typeof t!="object"?null:(t=Wd&&t[Wd]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,wu;function Ii(t){if(wu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);wu=e&&e[1]||""}return`
`+wu+t}var Eu=!1;function Tu(t,e){if(!t||Eu)return"";Eu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Eu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ii(t):""}function pw(t){switch(t.tag){case 5:return Ii(t.type);case 16:return Ii("Lazy");case 13:return Ii("Suspense");case 19:return Ii("SuspenseList");case 0:case 2:case 15:return t=Tu(t.type,!1),t;case 11:return t=Tu(t.type.render,!1),t;case 1:return t=Tu(t.type,!0),t;default:return""}}function oc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case cs:return"Fragment";case us:return"Portal";case rc:return"Profiler";case Ah:return"StrictMode";case sc:return"Suspense";case ic:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Rg:return(t.displayName||"Context")+".Consumer";case kg:return(t._context.displayName||"Context")+".Provider";case Ch:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kh:return e=t.displayName||null,e!==null?e:oc(t.type)||"Memo";case Fn:e=t._payload,t=t._init;try{return oc(t(e))}catch{}}return null}function mw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oc(e);case 8:return e===Ah?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function sr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ng(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function gw(t){var e=Ng(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yo(t){t._valueTracker||(t._valueTracker=gw(t))}function Dg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ng(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function La(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ac(t,e){var n=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Hd(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=sr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Vg(t,e){e=e.checked,e!=null&&xh(t,"checked",e,!1)}function lc(t,e){Vg(t,e);var n=sr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?uc(t,e.type,n):e.hasOwnProperty("defaultValue")&&uc(t,e.type,sr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function qd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function uc(t,e,n){(e!=="number"||La(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var xi=Array.isArray;function Ts(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+sr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function cc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(j(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Kd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(j(92));if(xi(n)){if(1<n.length)throw Error(j(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:sr(n)}}function bg(t,e){var n=sr(e.value),r=sr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Gd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Mg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Mg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xo,Og=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Xo=Xo||document.createElement("div"),Xo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Gi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Di={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yw=["Webkit","ms","Moz","O"];Object.keys(Di).forEach(function(t){yw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Di[e]=Di[t]})});function Lg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Di.hasOwnProperty(t)&&Di[t]?(""+e).trim():e+"px"}function Fg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Lg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var vw=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fc(t,e){if(e){if(vw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(j(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(j(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(j(61))}if(e.style!=null&&typeof e.style!="object")throw Error(j(62))}}function dc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pc=null;function Rh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var mc=null,Ss=null,Is=null;function Qd(t){if(t=Io(t)){if(typeof mc!="function")throw Error(j(280));var e=t.stateNode;e&&(e=kl(e),mc(t.stateNode,t.type,e))}}function jg(t){Ss?Is?Is.push(t):Is=[t]:Ss=t}function Ug(){if(Ss){var t=Ss,e=Is;if(Is=Ss=null,Qd(t),e)for(t=0;t<e.length;t++)Qd(e[t])}}function zg(t,e){return t(e)}function Bg(){}var Su=!1;function $g(t,e,n){if(Su)return t(e,n);Su=!0;try{return zg(t,e,n)}finally{Su=!1,(Ss!==null||Is!==null)&&(Bg(),Ug())}}function Qi(t,e){var n=t.stateNode;if(n===null)return null;var r=kl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(j(231,e,typeof n));return n}var gc=!1;if(wn)try{var gi={};Object.defineProperty(gi,"passive",{get:function(){gc=!0}}),window.addEventListener("test",gi,gi),window.removeEventListener("test",gi,gi)}catch{gc=!1}function _w(t,e,n,r,s,i,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(d){this.onError(d)}}var Vi=!1,Fa=null,ja=!1,yc=null,ww={onError:function(t){Vi=!0,Fa=t}};function Ew(t,e,n,r,s,i,o,l,u){Vi=!1,Fa=null,_w.apply(ww,arguments)}function Tw(t,e,n,r,s,i,o,l,u){if(Ew.apply(this,arguments),Vi){if(Vi){var h=Fa;Vi=!1,Fa=null}else throw Error(j(198));ja||(ja=!0,yc=h)}}function Qr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Wg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Yd(t){if(Qr(t)!==t)throw Error(j(188))}function Sw(t){var e=t.alternate;if(!e){if(e=Qr(t),e===null)throw Error(j(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Yd(s),t;if(i===r)return Yd(s),e;i=i.sibling}throw Error(j(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(j(189))}}if(n.alternate!==r)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?t:e}function Hg(t){return t=Sw(t),t!==null?qg(t):null}function qg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=qg(t);if(e!==null)return e;t=t.sibling}return null}var Kg=bt.unstable_scheduleCallback,Xd=bt.unstable_cancelCallback,Iw=bt.unstable_shouldYield,xw=bt.unstable_requestPaint,Fe=bt.unstable_now,Aw=bt.unstable_getCurrentPriorityLevel,Ph=bt.unstable_ImmediatePriority,Gg=bt.unstable_UserBlockingPriority,Ua=bt.unstable_NormalPriority,Cw=bt.unstable_LowPriority,Qg=bt.unstable_IdlePriority,Il=null,an=null;function kw(t){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(Il,t,void 0,(t.current.flags&128)===128)}catch{}}var Qt=Math.clz32?Math.clz32:Nw,Rw=Math.log,Pw=Math.LN2;function Nw(t){return t>>>=0,t===0?32:31-(Rw(t)/Pw|0)|0}var Jo=64,Zo=4194304;function Ai(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function za(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Ai(l):(i&=o,i!==0&&(r=Ai(i)))}else o=n&~s,o!==0?r=Ai(o):i!==0&&(r=Ai(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Qt(e),s=1<<n,r|=t[n],e&=~s;return r}function Dw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Qt(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=Dw(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function vc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Yg(){var t=Jo;return Jo<<=1,!(Jo&4194240)&&(Jo=64),t}function Iu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function To(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Qt(e),t[e]=n}function bw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Qt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Nh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Qt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ge=0;function Xg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Jg,Dh,Zg,ey,ty,_c=!1,ea=[],Hn=null,qn=null,Kn=null,Yi=new Map,Xi=new Map,Un=[],Mw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jd(t,e){switch(t){case"focusin":case"focusout":Hn=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":Kn=null;break;case"pointerover":case"pointerout":Yi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xi.delete(e.pointerId)}}function yi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Io(e),e!==null&&Dh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Ow(t,e,n,r,s){switch(e){case"focusin":return Hn=yi(Hn,t,e,n,r,s),!0;case"dragenter":return qn=yi(qn,t,e,n,r,s),!0;case"mouseover":return Kn=yi(Kn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Yi.set(i,yi(Yi.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Xi.set(i,yi(Xi.get(i)||null,t,e,n,r,s)),!0}return!1}function ny(t){var e=Dr(t.target);if(e!==null){var n=Qr(e);if(n!==null){if(e=n.tag,e===13){if(e=Wg(n),e!==null){t.blockedOn=e,ty(t.priority,function(){Zg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _a(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=wc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);pc=r,n.target.dispatchEvent(r),pc=null}else return e=Io(n),e!==null&&Dh(e),t.blockedOn=n,!1;e.shift()}return!0}function Zd(t,e,n){_a(t)&&n.delete(e)}function Lw(){_c=!1,Hn!==null&&_a(Hn)&&(Hn=null),qn!==null&&_a(qn)&&(qn=null),Kn!==null&&_a(Kn)&&(Kn=null),Yi.forEach(Zd),Xi.forEach(Zd)}function vi(t,e){t.blockedOn===e&&(t.blockedOn=null,_c||(_c=!0,bt.unstable_scheduleCallback(bt.unstable_NormalPriority,Lw)))}function Ji(t){function e(s){return vi(s,t)}if(0<ea.length){vi(ea[0],t);for(var n=1;n<ea.length;n++){var r=ea[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Hn!==null&&vi(Hn,t),qn!==null&&vi(qn,t),Kn!==null&&vi(Kn,t),Yi.forEach(e),Xi.forEach(e),n=0;n<Un.length;n++)r=Un[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Un.length&&(n=Un[0],n.blockedOn===null);)ny(n),n.blockedOn===null&&Un.shift()}var xs=kn.ReactCurrentBatchConfig,Ba=!0;function Fw(t,e,n,r){var s=ge,i=xs.transition;xs.transition=null;try{ge=1,Vh(t,e,n,r)}finally{ge=s,xs.transition=i}}function jw(t,e,n,r){var s=ge,i=xs.transition;xs.transition=null;try{ge=4,Vh(t,e,n,r)}finally{ge=s,xs.transition=i}}function Vh(t,e,n,r){if(Ba){var s=wc(t,e,n,r);if(s===null)bu(t,e,r,$a,n),Jd(t,r);else if(Ow(s,t,e,n,r))r.stopPropagation();else if(Jd(t,r),e&4&&-1<Mw.indexOf(t)){for(;s!==null;){var i=Io(s);if(i!==null&&Jg(i),i=wc(t,e,n,r),i===null&&bu(t,e,r,$a,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else bu(t,e,r,null,n)}}var $a=null;function wc(t,e,n,r){if($a=null,t=Rh(r),t=Dr(t),t!==null)if(e=Qr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Wg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $a=t,null}function ry(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Aw()){case Ph:return 1;case Gg:return 4;case Ua:case Cw:return 16;case Qg:return 536870912;default:return 16}default:return 16}}var Bn=null,bh=null,wa=null;function sy(){if(wa)return wa;var t,e=bh,n=e.length,r,s="value"in Bn?Bn.value:Bn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return wa=s.slice(t,1<r?1-r:void 0)}function Ea(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ta(){return!0}function ep(){return!1}function Ot(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ta:ep,this.isPropagationStopped=ep,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ta)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ta)},persist:function(){},isPersistent:ta}),e}var qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mh=Ot(qs),So=De({},qs,{view:0,detail:0}),Uw=Ot(So),xu,Au,_i,xl=De({},So,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_i&&(_i&&t.type==="mousemove"?(xu=t.screenX-_i.screenX,Au=t.screenY-_i.screenY):Au=xu=0,_i=t),xu)},movementY:function(t){return"movementY"in t?t.movementY:Au}}),tp=Ot(xl),zw=De({},xl,{dataTransfer:0}),Bw=Ot(zw),$w=De({},So,{relatedTarget:0}),Cu=Ot($w),Ww=De({},qs,{animationName:0,elapsedTime:0,pseudoElement:0}),Hw=Ot(Ww),qw=De({},qs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Kw=Ot(qw),Gw=De({},qs,{data:0}),np=Ot(Gw),Qw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Xw[t])?!!e[t]:!1}function Oh(){return Jw}var Zw=De({},So,{key:function(t){if(t.key){var e=Qw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ea(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Yw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oh,charCode:function(t){return t.type==="keypress"?Ea(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ea(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),eE=Ot(Zw),tE=De({},xl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rp=Ot(tE),nE=De({},So,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oh}),rE=Ot(nE),sE=De({},qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),iE=Ot(sE),oE=De({},xl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),aE=Ot(oE),lE=[9,13,27,32],Lh=wn&&"CompositionEvent"in window,bi=null;wn&&"documentMode"in document&&(bi=document.documentMode);var uE=wn&&"TextEvent"in window&&!bi,iy=wn&&(!Lh||bi&&8<bi&&11>=bi),sp=" ",ip=!1;function oy(t,e){switch(t){case"keyup":return lE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ay(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hs=!1;function cE(t,e){switch(t){case"compositionend":return ay(e);case"keypress":return e.which!==32?null:(ip=!0,sp);case"textInput":return t=e.data,t===sp&&ip?null:t;default:return null}}function hE(t,e){if(hs)return t==="compositionend"||!Lh&&oy(t,e)?(t=sy(),wa=bh=Bn=null,hs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return iy&&e.locale!=="ko"?null:e.data;default:return null}}var fE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function op(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!fE[t.type]:e==="textarea"}function ly(t,e,n,r){jg(r),e=Wa(e,"onChange"),0<e.length&&(n=new Mh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Mi=null,Zi=null;function dE(t){_y(t,0)}function Al(t){var e=ps(t);if(Dg(e))return t}function pE(t,e){if(t==="change")return e}var uy=!1;if(wn){var ku;if(wn){var Ru="oninput"in document;if(!Ru){var ap=document.createElement("div");ap.setAttribute("oninput","return;"),Ru=typeof ap.oninput=="function"}ku=Ru}else ku=!1;uy=ku&&(!document.documentMode||9<document.documentMode)}function lp(){Mi&&(Mi.detachEvent("onpropertychange",cy),Zi=Mi=null)}function cy(t){if(t.propertyName==="value"&&Al(Zi)){var e=[];ly(e,Zi,t,Rh(t)),$g(dE,e)}}function mE(t,e,n){t==="focusin"?(lp(),Mi=e,Zi=n,Mi.attachEvent("onpropertychange",cy)):t==="focusout"&&lp()}function gE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Al(Zi)}function yE(t,e){if(t==="click")return Al(e)}function vE(t,e){if(t==="input"||t==="change")return Al(e)}function _E(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zt=typeof Object.is=="function"?Object.is:_E;function eo(t,e){if(Zt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!nc.call(e,s)||!Zt(t[s],e[s]))return!1}return!0}function up(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cp(t,e){var n=up(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=up(n)}}function hy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function fy(){for(var t=window,e=La();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=La(t.document)}return e}function Fh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function wE(t){var e=fy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hy(n.ownerDocument.documentElement,n)){if(r!==null&&Fh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=cp(n,i);var o=cp(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var EE=wn&&"documentMode"in document&&11>=document.documentMode,fs=null,Ec=null,Oi=null,Tc=!1;function hp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Tc||fs==null||fs!==La(r)||(r=fs,"selectionStart"in r&&Fh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Oi&&eo(Oi,r)||(Oi=r,r=Wa(Ec,"onSelect"),0<r.length&&(e=new Mh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=fs)))}function na(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ds={animationend:na("Animation","AnimationEnd"),animationiteration:na("Animation","AnimationIteration"),animationstart:na("Animation","AnimationStart"),transitionend:na("Transition","TransitionEnd")},Pu={},dy={};wn&&(dy=document.createElement("div").style,"AnimationEvent"in window||(delete ds.animationend.animation,delete ds.animationiteration.animation,delete ds.animationstart.animation),"TransitionEvent"in window||delete ds.transitionend.transition);function Cl(t){if(Pu[t])return Pu[t];if(!ds[t])return t;var e=ds[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in dy)return Pu[t]=e[n];return t}var py=Cl("animationend"),my=Cl("animationiteration"),gy=Cl("animationstart"),yy=Cl("transitionend"),vy=new Map,fp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fr(t,e){vy.set(t,e),Gr(e,[t])}for(var Nu=0;Nu<fp.length;Nu++){var Du=fp[Nu],TE=Du.toLowerCase(),SE=Du[0].toUpperCase()+Du.slice(1);fr(TE,"on"+SE)}fr(py,"onAnimationEnd");fr(my,"onAnimationIteration");fr(gy,"onAnimationStart");fr("dblclick","onDoubleClick");fr("focusin","onFocus");fr("focusout","onBlur");fr(yy,"onTransitionEnd");Ds("onMouseEnter",["mouseout","mouseover"]);Ds("onMouseLeave",["mouseout","mouseover"]);Ds("onPointerEnter",["pointerout","pointerover"]);Ds("onPointerLeave",["pointerout","pointerover"]);Gr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ci="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ci));function dp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Tw(r,e,void 0,t),t.currentTarget=null}function _y(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;dp(s,l,h),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;dp(s,l,h),i=u}}}if(ja)throw t=yc,ja=!1,yc=null,t}function Se(t,e){var n=e[Cc];n===void 0&&(n=e[Cc]=new Set);var r=t+"__bubble";n.has(r)||(wy(e,t,2,!1),n.add(r))}function Vu(t,e,n){var r=0;e&&(r|=4),wy(n,t,r,e)}var ra="_reactListening"+Math.random().toString(36).slice(2);function to(t){if(!t[ra]){t[ra]=!0,Cg.forEach(function(n){n!=="selectionchange"&&(IE.has(n)||Vu(n,!1,t),Vu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ra]||(e[ra]=!0,Vu("selectionchange",!1,e))}}function wy(t,e,n,r){switch(ry(e)){case 1:var s=Fw;break;case 4:s=jw;break;default:s=Vh}n=s.bind(null,e,n,t),s=void 0,!gc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function bu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Dr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}$g(function(){var h=i,d=Rh(n),m=[];e:{var p=vy.get(t);if(p!==void 0){var S=Mh,P=t;switch(t){case"keypress":if(Ea(n)===0)break e;case"keydown":case"keyup":S=eE;break;case"focusin":P="focus",S=Cu;break;case"focusout":P="blur",S=Cu;break;case"beforeblur":case"afterblur":S=Cu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=tp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=Bw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=rE;break;case py:case my:case gy:S=Hw;break;case yy:S=iE;break;case"scroll":S=Uw;break;case"wheel":S=aE;break;case"copy":case"cut":case"paste":S=Kw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=rp}var b=(e&4)!==0,M=!b&&t==="scroll",T=b?p!==null?p+"Capture":null:p;b=[];for(var v=h,k;v!==null;){k=v;var O=k.stateNode;if(k.tag===5&&O!==null&&(k=O,T!==null&&(O=Qi(v,T),O!=null&&b.push(no(v,O,k)))),M)break;v=v.return}0<b.length&&(p=new S(p,P,null,n,d),m.push({event:p,listeners:b}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",p&&n!==pc&&(P=n.relatedTarget||n.fromElement)&&(Dr(P)||P[En]))break e;if((S||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,S?(P=n.relatedTarget||n.toElement,S=h,P=P?Dr(P):null,P!==null&&(M=Qr(P),P!==M||P.tag!==5&&P.tag!==6)&&(P=null)):(S=null,P=h),S!==P)){if(b=tp,O="onMouseLeave",T="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(b=rp,O="onPointerLeave",T="onPointerEnter",v="pointer"),M=S==null?p:ps(S),k=P==null?p:ps(P),p=new b(O,v+"leave",S,n,d),p.target=M,p.relatedTarget=k,O=null,Dr(d)===h&&(b=new b(T,v+"enter",P,n,d),b.target=k,b.relatedTarget=M,O=b),M=O,S&&P)t:{for(b=S,T=P,v=0,k=b;k;k=ss(k))v++;for(k=0,O=T;O;O=ss(O))k++;for(;0<v-k;)b=ss(b),v--;for(;0<k-v;)T=ss(T),k--;for(;v--;){if(b===T||T!==null&&b===T.alternate)break t;b=ss(b),T=ss(T)}b=null}else b=null;S!==null&&pp(m,p,S,b,!1),P!==null&&M!==null&&pp(m,M,P,b,!0)}}e:{if(p=h?ps(h):window,S=p.nodeName&&p.nodeName.toLowerCase(),S==="select"||S==="input"&&p.type==="file")var U=pE;else if(op(p))if(uy)U=vE;else{U=gE;var B=mE}else(S=p.nodeName)&&S.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(U=yE);if(U&&(U=U(t,h))){ly(m,U,n,d);break e}B&&B(t,p,h),t==="focusout"&&(B=p._wrapperState)&&B.controlled&&p.type==="number"&&uc(p,"number",p.value)}switch(B=h?ps(h):window,t){case"focusin":(op(B)||B.contentEditable==="true")&&(fs=B,Ec=h,Oi=null);break;case"focusout":Oi=Ec=fs=null;break;case"mousedown":Tc=!0;break;case"contextmenu":case"mouseup":case"dragend":Tc=!1,hp(m,n,d);break;case"selectionchange":if(EE)break;case"keydown":case"keyup":hp(m,n,d)}var _;if(Lh)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else hs?oy(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(iy&&n.locale!=="ko"&&(hs||y!=="onCompositionStart"?y==="onCompositionEnd"&&hs&&(_=sy()):(Bn=d,bh="value"in Bn?Bn.value:Bn.textContent,hs=!0)),B=Wa(h,y),0<B.length&&(y=new np(y,t,null,n,d),m.push({event:y,listeners:B}),_?y.data=_:(_=ay(n),_!==null&&(y.data=_)))),(_=uE?cE(t,n):hE(t,n))&&(h=Wa(h,"onBeforeInput"),0<h.length&&(d=new np("onBeforeInput","beforeinput",null,n,d),m.push({event:d,listeners:h}),d.data=_))}_y(m,e)})}function no(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wa(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Qi(t,n),i!=null&&r.unshift(no(t,i,s)),i=Qi(t,e),i!=null&&r.push(no(t,i,s))),t=t.return}return r}function ss(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function pp(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,s?(u=Qi(n,i),u!=null&&o.unshift(no(n,u,l))):s||(u=Qi(n,i),u!=null&&o.push(no(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var xE=/\r\n?/g,AE=/\u0000|\uFFFD/g;function mp(t){return(typeof t=="string"?t:""+t).replace(xE,`
`).replace(AE,"")}function sa(t,e,n){if(e=mp(e),mp(t)!==e&&n)throw Error(j(425))}function Ha(){}var Sc=null,Ic=null;function xc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ac=typeof setTimeout=="function"?setTimeout:void 0,CE=typeof clearTimeout=="function"?clearTimeout:void 0,gp=typeof Promise=="function"?Promise:void 0,kE=typeof queueMicrotask=="function"?queueMicrotask:typeof gp<"u"?function(t){return gp.resolve(null).then(t).catch(RE)}:Ac;function RE(t){setTimeout(function(){throw t})}function Mu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ji(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ji(e)}function Gn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function yp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ks=Math.random().toString(36).slice(2),on="__reactFiber$"+Ks,ro="__reactProps$"+Ks,En="__reactContainer$"+Ks,Cc="__reactEvents$"+Ks,PE="__reactListeners$"+Ks,NE="__reactHandles$"+Ks;function Dr(t){var e=t[on];if(e)return e;for(var n=t.parentNode;n;){if(e=n[En]||n[on]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=yp(t);t!==null;){if(n=t[on])return n;t=yp(t)}return e}t=n,n=t.parentNode}return null}function Io(t){return t=t[on]||t[En],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ps(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(j(33))}function kl(t){return t[ro]||null}var kc=[],ms=-1;function dr(t){return{current:t}}function Ae(t){0>ms||(t.current=kc[ms],kc[ms]=null,ms--)}function we(t,e){ms++,kc[ms]=t.current,t.current=e}var ir={},dt=dr(ir),xt=dr(!1),Ur=ir;function Vs(t,e){var n=t.type.contextTypes;if(!n)return ir;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function At(t){return t=t.childContextTypes,t!=null}function qa(){Ae(xt),Ae(dt)}function vp(t,e,n){if(dt.current!==ir)throw Error(j(168));we(dt,e),we(xt,n)}function Ey(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(j(108,mw(t)||"Unknown",s));return De({},n,r)}function Ka(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ir,Ur=dt.current,we(dt,t),we(xt,xt.current),!0}function _p(t,e,n){var r=t.stateNode;if(!r)throw Error(j(169));n?(t=Ey(t,e,Ur),r.__reactInternalMemoizedMergedChildContext=t,Ae(xt),Ae(dt),we(dt,t)):Ae(xt),we(xt,n)}var mn=null,Rl=!1,Ou=!1;function Ty(t){mn===null?mn=[t]:mn.push(t)}function DE(t){Rl=!0,Ty(t)}function pr(){if(!Ou&&mn!==null){Ou=!0;var t=0,e=ge;try{var n=mn;for(ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}mn=null,Rl=!1}catch(s){throw mn!==null&&(mn=mn.slice(t+1)),Kg(Ph,pr),s}finally{ge=e,Ou=!1}}return null}var gs=[],ys=0,Ga=null,Qa=0,Ft=[],jt=0,zr=null,gn=1,yn="";function Cr(t,e){gs[ys++]=Qa,gs[ys++]=Ga,Ga=t,Qa=e}function Sy(t,e,n){Ft[jt++]=gn,Ft[jt++]=yn,Ft[jt++]=zr,zr=t;var r=gn;t=yn;var s=32-Qt(r)-1;r&=~(1<<s),n+=1;var i=32-Qt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,gn=1<<32-Qt(e)+s|n<<s|r,yn=i+t}else gn=1<<i|n<<s|r,yn=t}function jh(t){t.return!==null&&(Cr(t,1),Sy(t,1,0))}function Uh(t){for(;t===Ga;)Ga=gs[--ys],gs[ys]=null,Qa=gs[--ys],gs[ys]=null;for(;t===zr;)zr=Ft[--jt],Ft[jt]=null,yn=Ft[--jt],Ft[jt]=null,gn=Ft[--jt],Ft[jt]=null}var Vt=null,Nt=null,Re=!1,Gt=null;function Iy(t,e){var n=zt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function wp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Vt=t,Nt=Gn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Vt=t,Nt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zr!==null?{id:gn,overflow:yn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=zt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Vt=t,Nt=null,!0):!1;default:return!1}}function Rc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Pc(t){if(Re){var e=Nt;if(e){var n=e;if(!wp(t,e)){if(Rc(t))throw Error(j(418));e=Gn(n.nextSibling);var r=Vt;e&&wp(t,e)?Iy(r,n):(t.flags=t.flags&-4097|2,Re=!1,Vt=t)}}else{if(Rc(t))throw Error(j(418));t.flags=t.flags&-4097|2,Re=!1,Vt=t}}}function Ep(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Vt=t}function ia(t){if(t!==Vt)return!1;if(!Re)return Ep(t),Re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xc(t.type,t.memoizedProps)),e&&(e=Nt)){if(Rc(t))throw xy(),Error(j(418));for(;e;)Iy(t,e),e=Gn(e.nextSibling)}if(Ep(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Nt=Gn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Nt=null}}else Nt=Vt?Gn(t.stateNode.nextSibling):null;return!0}function xy(){for(var t=Nt;t;)t=Gn(t.nextSibling)}function bs(){Nt=Vt=null,Re=!1}function zh(t){Gt===null?Gt=[t]:Gt.push(t)}var VE=kn.ReactCurrentBatchConfig;function wi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(j(309));var r=n.stateNode}if(!r)throw Error(j(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(j(284));if(!n._owner)throw Error(j(290,t))}return t}function oa(t,e){throw t=Object.prototype.toString.call(e),Error(j(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Tp(t){var e=t._init;return e(t._payload)}function Ay(t){function e(T,v){if(t){var k=T.deletions;k===null?(T.deletions=[v],T.flags|=16):k.push(v)}}function n(T,v){if(!t)return null;for(;v!==null;)e(T,v),v=v.sibling;return null}function r(T,v){for(T=new Map;v!==null;)v.key!==null?T.set(v.key,v):T.set(v.index,v),v=v.sibling;return T}function s(T,v){return T=Jn(T,v),T.index=0,T.sibling=null,T}function i(T,v,k){return T.index=k,t?(k=T.alternate,k!==null?(k=k.index,k<v?(T.flags|=2,v):k):(T.flags|=2,v)):(T.flags|=1048576,v)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function l(T,v,k,O){return v===null||v.tag!==6?(v=$u(k,T.mode,O),v.return=T,v):(v=s(v,k),v.return=T,v)}function u(T,v,k,O){var U=k.type;return U===cs?d(T,v,k.props.children,O,k.key):v!==null&&(v.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Fn&&Tp(U)===v.type)?(O=s(v,k.props),O.ref=wi(T,v,k),O.return=T,O):(O=ka(k.type,k.key,k.props,null,T.mode,O),O.ref=wi(T,v,k),O.return=T,O)}function h(T,v,k,O){return v===null||v.tag!==4||v.stateNode.containerInfo!==k.containerInfo||v.stateNode.implementation!==k.implementation?(v=Wu(k,T.mode,O),v.return=T,v):(v=s(v,k.children||[]),v.return=T,v)}function d(T,v,k,O,U){return v===null||v.tag!==7?(v=Lr(k,T.mode,O,U),v.return=T,v):(v=s(v,k),v.return=T,v)}function m(T,v,k){if(typeof v=="string"&&v!==""||typeof v=="number")return v=$u(""+v,T.mode,k),v.return=T,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Qo:return k=ka(v.type,v.key,v.props,null,T.mode,k),k.ref=wi(T,null,v),k.return=T,k;case us:return v=Wu(v,T.mode,k),v.return=T,v;case Fn:var O=v._init;return m(T,O(v._payload),k)}if(xi(v)||mi(v))return v=Lr(v,T.mode,k,null),v.return=T,v;oa(T,v)}return null}function p(T,v,k,O){var U=v!==null?v.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return U!==null?null:l(T,v,""+k,O);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Qo:return k.key===U?u(T,v,k,O):null;case us:return k.key===U?h(T,v,k,O):null;case Fn:return U=k._init,p(T,v,U(k._payload),O)}if(xi(k)||mi(k))return U!==null?null:d(T,v,k,O,null);oa(T,k)}return null}function S(T,v,k,O,U){if(typeof O=="string"&&O!==""||typeof O=="number")return T=T.get(k)||null,l(v,T,""+O,U);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Qo:return T=T.get(O.key===null?k:O.key)||null,u(v,T,O,U);case us:return T=T.get(O.key===null?k:O.key)||null,h(v,T,O,U);case Fn:var B=O._init;return S(T,v,k,B(O._payload),U)}if(xi(O)||mi(O))return T=T.get(k)||null,d(v,T,O,U,null);oa(v,O)}return null}function P(T,v,k,O){for(var U=null,B=null,_=v,y=v=0,w=null;_!==null&&y<k.length;y++){_.index>y?(w=_,_=null):w=_.sibling;var I=p(T,_,k[y],O);if(I===null){_===null&&(_=w);break}t&&_&&I.alternate===null&&e(T,_),v=i(I,v,y),B===null?U=I:B.sibling=I,B=I,_=w}if(y===k.length)return n(T,_),Re&&Cr(T,y),U;if(_===null){for(;y<k.length;y++)_=m(T,k[y],O),_!==null&&(v=i(_,v,y),B===null?U=_:B.sibling=_,B=_);return Re&&Cr(T,y),U}for(_=r(T,_);y<k.length;y++)w=S(_,T,y,k[y],O),w!==null&&(t&&w.alternate!==null&&_.delete(w.key===null?y:w.key),v=i(w,v,y),B===null?U=w:B.sibling=w,B=w);return t&&_.forEach(function(C){return e(T,C)}),Re&&Cr(T,y),U}function b(T,v,k,O){var U=mi(k);if(typeof U!="function")throw Error(j(150));if(k=U.call(k),k==null)throw Error(j(151));for(var B=U=null,_=v,y=v=0,w=null,I=k.next();_!==null&&!I.done;y++,I=k.next()){_.index>y?(w=_,_=null):w=_.sibling;var C=p(T,_,I.value,O);if(C===null){_===null&&(_=w);break}t&&_&&C.alternate===null&&e(T,_),v=i(C,v,y),B===null?U=C:B.sibling=C,B=C,_=w}if(I.done)return n(T,_),Re&&Cr(T,y),U;if(_===null){for(;!I.done;y++,I=k.next())I=m(T,I.value,O),I!==null&&(v=i(I,v,y),B===null?U=I:B.sibling=I,B=I);return Re&&Cr(T,y),U}for(_=r(T,_);!I.done;y++,I=k.next())I=S(_,T,y,I.value,O),I!==null&&(t&&I.alternate!==null&&_.delete(I.key===null?y:I.key),v=i(I,v,y),B===null?U=I:B.sibling=I,B=I);return t&&_.forEach(function(N){return e(T,N)}),Re&&Cr(T,y),U}function M(T,v,k,O){if(typeof k=="object"&&k!==null&&k.type===cs&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Qo:e:{for(var U=k.key,B=v;B!==null;){if(B.key===U){if(U=k.type,U===cs){if(B.tag===7){n(T,B.sibling),v=s(B,k.props.children),v.return=T,T=v;break e}}else if(B.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Fn&&Tp(U)===B.type){n(T,B.sibling),v=s(B,k.props),v.ref=wi(T,B,k),v.return=T,T=v;break e}n(T,B);break}else e(T,B);B=B.sibling}k.type===cs?(v=Lr(k.props.children,T.mode,O,k.key),v.return=T,T=v):(O=ka(k.type,k.key,k.props,null,T.mode,O),O.ref=wi(T,v,k),O.return=T,T=O)}return o(T);case us:e:{for(B=k.key;v!==null;){if(v.key===B)if(v.tag===4&&v.stateNode.containerInfo===k.containerInfo&&v.stateNode.implementation===k.implementation){n(T,v.sibling),v=s(v,k.children||[]),v.return=T,T=v;break e}else{n(T,v);break}else e(T,v);v=v.sibling}v=Wu(k,T.mode,O),v.return=T,T=v}return o(T);case Fn:return B=k._init,M(T,v,B(k._payload),O)}if(xi(k))return P(T,v,k,O);if(mi(k))return b(T,v,k,O);oa(T,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,v!==null&&v.tag===6?(n(T,v.sibling),v=s(v,k),v.return=T,T=v):(n(T,v),v=$u(k,T.mode,O),v.return=T,T=v),o(T)):n(T,v)}return M}var Ms=Ay(!0),Cy=Ay(!1),Ya=dr(null),Xa=null,vs=null,Bh=null;function $h(){Bh=vs=Xa=null}function Wh(t){var e=Ya.current;Ae(Ya),t._currentValue=e}function Nc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function As(t,e){Xa=t,Bh=vs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(It=!0),t.firstContext=null)}function $t(t){var e=t._currentValue;if(Bh!==t)if(t={context:t,memoizedValue:e,next:null},vs===null){if(Xa===null)throw Error(j(308));vs=t,Xa.dependencies={lanes:0,firstContext:t}}else vs=vs.next=t;return e}var Vr=null;function Hh(t){Vr===null?Vr=[t]:Vr.push(t)}function ky(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Hh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Tn(t,r)}function Tn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var jn=!1;function qh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ry(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Qn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Tn(t,n)}return s=r.interleaved,s===null?(e.next=e,Hh(r)):(e.next=s.next,s.next=e),r.interleaved=e,Tn(t,n)}function Ta(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Nh(t,n)}}function Sp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ja(t,e,n,r){var s=t.updateQueue;jn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?i=h:o.next=h,o=u;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,d=h=u=null,l=i;do{var p=l.lane,S=l.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var P=t,b=l;switch(p=e,S=n,b.tag){case 1:if(P=b.payload,typeof P=="function"){m=P.call(S,m,p);break e}m=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=b.payload,p=typeof P=="function"?P.call(S,m,p):P,p==null)break e;m=De({},m,p);break e;case 2:jn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else S={eventTime:S,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=S,u=m):d=d.next=S,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(d===null&&(u=m),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);$r|=o,t.lanes=o,t.memoizedState=m}}function Ip(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(j(191,s));s.call(r)}}}var xo={},ln=dr(xo),so=dr(xo),io=dr(xo);function br(t){if(t===xo)throw Error(j(174));return t}function Kh(t,e){switch(we(io,e),we(so,t),we(ln,xo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=hc(e,t)}Ae(ln),we(ln,e)}function Os(){Ae(ln),Ae(so),Ae(io)}function Py(t){br(io.current);var e=br(ln.current),n=hc(e,t.type);e!==n&&(we(so,t),we(ln,n))}function Gh(t){so.current===t&&(Ae(ln),Ae(so))}var Pe=dr(0);function Za(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Lu=[];function Qh(){for(var t=0;t<Lu.length;t++)Lu[t]._workInProgressVersionPrimary=null;Lu.length=0}var Sa=kn.ReactCurrentDispatcher,Fu=kn.ReactCurrentBatchConfig,Br=0,Ne=null,He=null,Je=null,el=!1,Li=!1,oo=0,bE=0;function at(){throw Error(j(321))}function Yh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Zt(t[n],e[n]))return!1;return!0}function Xh(t,e,n,r,s,i){if(Br=i,Ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Sa.current=t===null||t.memoizedState===null?FE:jE,t=n(r,s),Li){i=0;do{if(Li=!1,oo=0,25<=i)throw Error(j(301));i+=1,Je=He=null,e.updateQueue=null,Sa.current=UE,t=n(r,s)}while(Li)}if(Sa.current=tl,e=He!==null&&He.next!==null,Br=0,Je=He=Ne=null,el=!1,e)throw Error(j(300));return t}function Jh(){var t=oo!==0;return oo=0,t}function rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?Ne.memoizedState=Je=t:Je=Je.next=t,Je}function Wt(){if(He===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=Je===null?Ne.memoizedState:Je.next;if(e!==null)Je=e,He=t;else{if(t===null)throw Error(j(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Je===null?Ne.memoizedState=Je=t:Je=Je.next=t}return Je}function ao(t,e){return typeof e=="function"?e(t):e}function ju(t){var e=Wt(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=He,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,h=i;do{var d=h.lane;if((Br&d)===d)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:d,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Ne.lanes|=d,$r|=d}h=h.next}while(h!==null&&h!==i);u===null?o=r:u.next=l,Zt(r,e.memoizedState)||(It=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ne.lanes|=i,$r|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Uu(t){var e=Wt(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Zt(i,e.memoizedState)||(It=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Ny(){}function Dy(t,e){var n=Ne,r=Wt(),s=e(),i=!Zt(r.memoizedState,s);if(i&&(r.memoizedState=s,It=!0),r=r.queue,Zh(My.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Je!==null&&Je.memoizedState.tag&1){if(n.flags|=2048,lo(9,by.bind(null,n,r,s,e),void 0,null),Ze===null)throw Error(j(349));Br&30||Vy(n,e,s)}return s}function Vy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function by(t,e,n,r){e.value=n,e.getSnapshot=r,Oy(e)&&Ly(t)}function My(t,e,n){return n(function(){Oy(e)&&Ly(t)})}function Oy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Zt(t,n)}catch{return!0}}function Ly(t){var e=Tn(t,1);e!==null&&Yt(e,t,1,-1)}function xp(t){var e=rn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:t},e.queue=t,t=t.dispatch=LE.bind(null,Ne,t),[e.memoizedState,t]}function lo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Fy(){return Wt().memoizedState}function Ia(t,e,n,r){var s=rn();Ne.flags|=t,s.memoizedState=lo(1|e,n,void 0,r===void 0?null:r)}function Pl(t,e,n,r){var s=Wt();r=r===void 0?null:r;var i=void 0;if(He!==null){var o=He.memoizedState;if(i=o.destroy,r!==null&&Yh(r,o.deps)){s.memoizedState=lo(e,n,i,r);return}}Ne.flags|=t,s.memoizedState=lo(1|e,n,i,r)}function Ap(t,e){return Ia(8390656,8,t,e)}function Zh(t,e){return Pl(2048,8,t,e)}function jy(t,e){return Pl(4,2,t,e)}function Uy(t,e){return Pl(4,4,t,e)}function zy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function By(t,e,n){return n=n!=null?n.concat([t]):null,Pl(4,4,zy.bind(null,e,t),n)}function ef(){}function $y(t,e){var n=Wt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Yh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Wy(t,e){var n=Wt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Yh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Hy(t,e,n){return Br&21?(Zt(n,e)||(n=Yg(),Ne.lanes|=n,$r|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,It=!0),t.memoizedState=n)}function ME(t,e){var n=ge;ge=n!==0&&4>n?n:4,t(!0);var r=Fu.transition;Fu.transition={};try{t(!1),e()}finally{ge=n,Fu.transition=r}}function qy(){return Wt().memoizedState}function OE(t,e,n){var r=Xn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ky(t))Gy(e,n);else if(n=ky(t,e,n,r),n!==null){var s=vt();Yt(n,t,r,s),Qy(n,e,r)}}function LE(t,e,n){var r=Xn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ky(t))Gy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Zt(l,o)){var u=e.interleaved;u===null?(s.next=s,Hh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=ky(t,e,s,r),n!==null&&(s=vt(),Yt(n,t,r,s),Qy(n,e,r))}}function Ky(t){var e=t.alternate;return t===Ne||e!==null&&e===Ne}function Gy(t,e){Li=el=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Qy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Nh(t,n)}}var tl={readContext:$t,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},FE={readContext:$t,useCallback:function(t,e){return rn().memoizedState=[t,e===void 0?null:e],t},useContext:$t,useEffect:Ap,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ia(4194308,4,zy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ia(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ia(4,2,t,e)},useMemo:function(t,e){var n=rn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=rn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=OE.bind(null,Ne,t),[r.memoizedState,t]},useRef:function(t){var e=rn();return t={current:t},e.memoizedState=t},useState:xp,useDebugValue:ef,useDeferredValue:function(t){return rn().memoizedState=t},useTransition:function(){var t=xp(!1),e=t[0];return t=ME.bind(null,t[1]),rn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ne,s=rn();if(Re){if(n===void 0)throw Error(j(407));n=n()}else{if(n=e(),Ze===null)throw Error(j(349));Br&30||Vy(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Ap(My.bind(null,r,i,t),[t]),r.flags|=2048,lo(9,by.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=rn(),e=Ze.identifierPrefix;if(Re){var n=yn,r=gn;n=(r&~(1<<32-Qt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=oo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=bE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},jE={readContext:$t,useCallback:$y,useContext:$t,useEffect:Zh,useImperativeHandle:By,useInsertionEffect:jy,useLayoutEffect:Uy,useMemo:Wy,useReducer:ju,useRef:Fy,useState:function(){return ju(ao)},useDebugValue:ef,useDeferredValue:function(t){var e=Wt();return Hy(e,He.memoizedState,t)},useTransition:function(){var t=ju(ao)[0],e=Wt().memoizedState;return[t,e]},useMutableSource:Ny,useSyncExternalStore:Dy,useId:qy,unstable_isNewReconciler:!1},UE={readContext:$t,useCallback:$y,useContext:$t,useEffect:Zh,useImperativeHandle:By,useInsertionEffect:jy,useLayoutEffect:Uy,useMemo:Wy,useReducer:Uu,useRef:Fy,useState:function(){return Uu(ao)},useDebugValue:ef,useDeferredValue:function(t){var e=Wt();return He===null?e.memoizedState=t:Hy(e,He.memoizedState,t)},useTransition:function(){var t=Uu(ao)[0],e=Wt().memoizedState;return[t,e]},useMutableSource:Ny,useSyncExternalStore:Dy,useId:qy,unstable_isNewReconciler:!1};function qt(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Dc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:De({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Nl={isMounted:function(t){return(t=t._reactInternals)?Qr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=vt(),s=Xn(t),i=vn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Qn(t,i,s),e!==null&&(Yt(e,t,s,r),Ta(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=vt(),s=Xn(t),i=vn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Qn(t,i,s),e!==null&&(Yt(e,t,s,r),Ta(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vt(),r=Xn(t),s=vn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Qn(t,s,r),e!==null&&(Yt(e,t,r,n),Ta(e,t,r))}};function Cp(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!eo(n,r)||!eo(s,i):!0}function Yy(t,e,n){var r=!1,s=ir,i=e.contextType;return typeof i=="object"&&i!==null?i=$t(i):(s=At(e)?Ur:dt.current,r=e.contextTypes,i=(r=r!=null)?Vs(t,s):ir),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Nl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function kp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Nl.enqueueReplaceState(e,e.state,null)}function Vc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},qh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=$t(i):(i=At(e)?Ur:dt.current,s.context=Vs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Dc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Nl.enqueueReplaceState(s,s.state,null),Ja(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ls(t,e){try{var n="",r=e;do n+=pw(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function zu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var zE=typeof WeakMap=="function"?WeakMap:Map;function Xy(t,e,n){n=vn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){rl||(rl=!0,Wc=r),bc(t,e)},n}function Jy(t,e,n){n=vn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){bc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){bc(t,e),typeof r!="function"&&(Yn===null?Yn=new Set([this]):Yn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Rp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new zE;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=t1.bind(null,t,e,n),e.then(t,t))}function Pp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Np(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=vn(-1,1),e.tag=2,Qn(n,e,1))),n.lanes|=1),t)}var BE=kn.ReactCurrentOwner,It=!1;function yt(t,e,n,r){e.child=t===null?Cy(e,null,n,r):Ms(e,t.child,n,r)}function Dp(t,e,n,r,s){n=n.render;var i=e.ref;return As(e,s),r=Xh(t,e,n,r,i,s),n=Jh(),t!==null&&!It?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Sn(t,e,s)):(Re&&n&&jh(e),e.flags|=1,yt(t,e,r,s),e.child)}function Vp(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!uf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Zy(t,e,i,r,s)):(t=ka(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:eo,n(o,r)&&t.ref===e.ref)return Sn(t,e,s)}return e.flags|=1,t=Jn(i,r),t.ref=e.ref,t.return=e,e.child=t}function Zy(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(eo(i,r)&&t.ref===e.ref)if(It=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(It=!0);else return e.lanes=t.lanes,Sn(t,e,s)}return Mc(t,e,n,r,s)}function ev(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(ws,Pt),Pt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,we(ws,Pt),Pt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,we(ws,Pt),Pt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,we(ws,Pt),Pt|=r;return yt(t,e,s,n),e.child}function tv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Mc(t,e,n,r,s){var i=At(n)?Ur:dt.current;return i=Vs(e,i),As(e,s),n=Xh(t,e,n,r,i,s),r=Jh(),t!==null&&!It?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Sn(t,e,s)):(Re&&r&&jh(e),e.flags|=1,yt(t,e,n,s),e.child)}function bp(t,e,n,r,s){if(At(n)){var i=!0;Ka(e)}else i=!1;if(As(e,s),e.stateNode===null)xa(t,e),Yy(e,n,r),Vc(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=$t(h):(h=At(n)?Ur:dt.current,h=Vs(e,h));var d=n.getDerivedStateFromProps,m=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&kp(e,o,r,h),jn=!1;var p=e.memoizedState;o.state=p,Ja(e,r,o,s),u=e.memoizedState,l!==r||p!==u||xt.current||jn?(typeof d=="function"&&(Dc(e,n,d,r),u=e.memoizedState),(l=jn||Cp(e,n,l,r,p,u,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Ry(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:qt(e.type,l),o.props=h,m=e.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=$t(u):(u=At(n)?Ur:dt.current,u=Vs(e,u));var S=n.getDerivedStateFromProps;(d=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||p!==u)&&kp(e,o,r,u),jn=!1,p=e.memoizedState,o.state=p,Ja(e,r,o,s);var P=e.memoizedState;l!==m||p!==P||xt.current||jn?(typeof S=="function"&&(Dc(e,n,S,r),P=e.memoizedState),(h=jn||Cp(e,n,h,r,p,P,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,P,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,P,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),o.props=r,o.state=P,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Oc(t,e,n,r,i,s)}function Oc(t,e,n,r,s,i){tv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&_p(e,n,!1),Sn(t,e,i);r=e.stateNode,BE.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ms(e,t.child,null,i),e.child=Ms(e,null,l,i)):yt(t,e,l,i),e.memoizedState=r.state,s&&_p(e,n,!0),e.child}function nv(t){var e=t.stateNode;e.pendingContext?vp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&vp(t,e.context,!1),Kh(t,e.containerInfo)}function Mp(t,e,n,r,s){return bs(),zh(s),e.flags|=256,yt(t,e,n,r),e.child}var Lc={dehydrated:null,treeContext:null,retryLane:0};function Fc(t){return{baseLanes:t,cachePool:null,transitions:null}}function rv(t,e,n){var r=e.pendingProps,s=Pe.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),we(Pe,s&1),t===null)return Pc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=bl(o,r,0,null),t=Lr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Fc(n),e.memoizedState=Lc,t):tf(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return $E(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Jn(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Jn(l,i):(i=Lr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Fc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Lc,r}return i=t.child,t=i.sibling,r=Jn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function tf(t,e){return e=bl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function aa(t,e,n,r){return r!==null&&zh(r),Ms(e,t.child,null,n),t=tf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $E(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=zu(Error(j(422))),aa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=bl({mode:"visible",children:r.children},s,0,null),i=Lr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ms(e,t.child,null,o),e.child.memoizedState=Fc(o),e.memoizedState=Lc,i);if(!(e.mode&1))return aa(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(j(419)),r=zu(i,r,void 0),aa(t,e,o,r)}if(l=(o&t.childLanes)!==0,It||l){if(r=Ze,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Tn(t,s),Yt(r,t,s,-1))}return lf(),r=zu(Error(j(421))),aa(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=n1.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Nt=Gn(s.nextSibling),Vt=e,Re=!0,Gt=null,t!==null&&(Ft[jt++]=gn,Ft[jt++]=yn,Ft[jt++]=zr,gn=t.id,yn=t.overflow,zr=e),e=tf(e,r.children),e.flags|=4096,e)}function Op(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Nc(t.return,e,n)}function Bu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function sv(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(yt(t,e,r.children,n),r=Pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Op(t,n,e);else if(t.tag===19)Op(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(we(Pe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Za(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Bu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Za(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Bu(e,!0,n,null,i);break;case"together":Bu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Sn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),$r|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(j(153));if(e.child!==null){for(t=e.child,n=Jn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Jn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function WE(t,e,n){switch(e.tag){case 3:nv(e),bs();break;case 5:Py(e);break;case 1:At(e.type)&&Ka(e);break;case 4:Kh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;we(Ya,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(we(Pe,Pe.current&1),e.flags|=128,null):n&e.child.childLanes?rv(t,e,n):(we(Pe,Pe.current&1),t=Sn(t,e,n),t!==null?t.sibling:null);we(Pe,Pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return sv(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),we(Pe,Pe.current),r)break;return null;case 22:case 23:return e.lanes=0,ev(t,e,n)}return Sn(t,e,n)}var iv,jc,ov,av;iv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};jc=function(){};ov=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,br(ln.current);var i=null;switch(n){case"input":s=ac(t,s),r=ac(t,r),i=[];break;case"select":s=De({},s,{value:void 0}),r=De({},r,{value:void 0}),i=[];break;case"textarea":s=cc(t,s),r=cc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ha)}fc(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Ki.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Ki.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Se("scroll",t),i||l===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};av=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ei(t,e){if(!Re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function HE(t,e,n){var r=e.pendingProps;switch(Uh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(e),null;case 1:return At(e.type)&&qa(),lt(e),null;case 3:return r=e.stateNode,Os(),Ae(xt),Ae(dt),Qh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ia(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Gt!==null&&(Kc(Gt),Gt=null))),jc(t,e),lt(e),null;case 5:Gh(e);var s=br(io.current);if(n=e.type,t!==null&&e.stateNode!=null)ov(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(j(166));return lt(e),null}if(t=br(ln.current),ia(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[on]=e,r[ro]=i,t=(e.mode&1)!==0,n){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(s=0;s<Ci.length;s++)Se(Ci[s],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":Hd(r,i),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Se("invalid",r);break;case"textarea":Kd(r,i),Se("invalid",r)}fc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&sa(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&sa(r.textContent,l,t),s=["children",""+l]):Ki.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Se("scroll",r)}switch(n){case"input":Yo(r),qd(r,i,!0);break;case"textarea":Yo(r),Gd(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ha)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Mg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[on]=e,t[ro]=r,iv(t,e,!1,!1),e.stateNode=t;e:{switch(o=dc(n,r),n){case"dialog":Se("cancel",t),Se("close",t),s=r;break;case"iframe":case"object":case"embed":Se("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ci.length;s++)Se(Ci[s],t);s=r;break;case"source":Se("error",t),s=r;break;case"img":case"image":case"link":Se("error",t),Se("load",t),s=r;break;case"details":Se("toggle",t),s=r;break;case"input":Hd(t,r),s=ac(t,r),Se("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=De({},r,{value:void 0}),Se("invalid",t);break;case"textarea":Kd(t,r),s=cc(t,r),Se("invalid",t);break;default:s=r}fc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Fg(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Og(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Gi(t,u):typeof u=="number"&&Gi(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ki.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Se("scroll",t):u!=null&&xh(t,i,u,o))}switch(n){case"input":Yo(t),qd(t,r,!1);break;case"textarea":Yo(t),Gd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+sr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ts(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ts(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ha)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return lt(e),null;case 6:if(t&&e.stateNode!=null)av(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(j(166));if(n=br(io.current),br(ln.current),ia(e)){if(r=e.stateNode,n=e.memoizedProps,r[on]=e,(i=r.nodeValue!==n)&&(t=Vt,t!==null))switch(t.tag){case 3:sa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&sa(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[on]=e,e.stateNode=r}return lt(e),null;case 13:if(Ae(Pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&Nt!==null&&e.mode&1&&!(e.flags&128))xy(),bs(),e.flags|=98560,i=!1;else if(i=ia(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(j(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(j(317));i[on]=e}else bs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;lt(e),i=!1}else Gt!==null&&(Kc(Gt),Gt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Pe.current&1?Ke===0&&(Ke=3):lf())),e.updateQueue!==null&&(e.flags|=4),lt(e),null);case 4:return Os(),jc(t,e),t===null&&to(e.stateNode.containerInfo),lt(e),null;case 10:return Wh(e.type._context),lt(e),null;case 17:return At(e.type)&&qa(),lt(e),null;case 19:if(Ae(Pe),i=e.memoizedState,i===null)return lt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ei(i,!1);else{if(Ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Za(t),o!==null){for(e.flags|=128,Ei(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return we(Pe,Pe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Fe()>Fs&&(e.flags|=128,r=!0,Ei(i,!1),e.lanes=4194304)}else{if(!r)if(t=Za(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ei(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Re)return lt(e),null}else 2*Fe()-i.renderingStartTime>Fs&&n!==1073741824&&(e.flags|=128,r=!0,Ei(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Fe(),e.sibling=null,n=Pe.current,we(Pe,r?n&1|2:n&1),e):(lt(e),null);case 22:case 23:return af(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Pt&1073741824&&(lt(e),e.subtreeFlags&6&&(e.flags|=8192)):lt(e),null;case 24:return null;case 25:return null}throw Error(j(156,e.tag))}function qE(t,e){switch(Uh(e),e.tag){case 1:return At(e.type)&&qa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Os(),Ae(xt),Ae(dt),Qh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Gh(e),null;case 13:if(Ae(Pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(j(340));bs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(Pe),null;case 4:return Os(),null;case 10:return Wh(e.type._context),null;case 22:case 23:return af(),null;case 24:return null;default:return null}}var la=!1,ht=!1,KE=typeof WeakSet=="function"?WeakSet:Set,q=null;function _s(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Me(t,e,r)}else n.current=null}function Uc(t,e,n){try{n()}catch(r){Me(t,e,r)}}var Lp=!1;function GE(t,e){if(Sc=Ba,t=fy(),Fh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,d=0,m=t,p=null;t:for(;;){for(var S;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(S=m.firstChild)!==null;)p=m,m=S;for(;;){if(m===t)break t;if(p===n&&++h===s&&(l=o),p===i&&++d===r&&(u=o),(S=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=S}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ic={focusedElem:t,selectionRange:n},Ba=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var b=P.memoizedProps,M=P.memoizedState,T=e.stateNode,v=T.getSnapshotBeforeUpdate(e.elementType===e.type?b:qt(e.type,b),M);T.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(O){Me(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return P=Lp,Lp=!1,P}function Fi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Uc(e,n,i)}s=s.next}while(s!==r)}}function Dl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function zc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function lv(t){var e=t.alternate;e!==null&&(t.alternate=null,lv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[on],delete e[ro],delete e[Cc],delete e[PE],delete e[NE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function uv(t){return t.tag===5||t.tag===3||t.tag===4}function Fp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||uv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ha));else if(r!==4&&(t=t.child,t!==null))for(Bc(t,e,n),t=t.sibling;t!==null;)Bc(t,e,n),t=t.sibling}function $c(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for($c(t,e,n),t=t.sibling;t!==null;)$c(t,e,n),t=t.sibling}var et=null,Kt=!1;function On(t,e,n){for(n=n.child;n!==null;)cv(t,e,n),n=n.sibling}function cv(t,e,n){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(Il,n)}catch{}switch(n.tag){case 5:ht||_s(n,e);case 6:var r=et,s=Kt;et=null,On(t,e,n),et=r,Kt=s,et!==null&&(Kt?(t=et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):et.removeChild(n.stateNode));break;case 18:et!==null&&(Kt?(t=et,n=n.stateNode,t.nodeType===8?Mu(t.parentNode,n):t.nodeType===1&&Mu(t,n),Ji(t)):Mu(et,n.stateNode));break;case 4:r=et,s=Kt,et=n.stateNode.containerInfo,Kt=!0,On(t,e,n),et=r,Kt=s;break;case 0:case 11:case 14:case 15:if(!ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Uc(n,e,o),s=s.next}while(s!==r)}On(t,e,n);break;case 1:if(!ht&&(_s(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Me(n,e,l)}On(t,e,n);break;case 21:On(t,e,n);break;case 22:n.mode&1?(ht=(r=ht)||n.memoizedState!==null,On(t,e,n),ht=r):On(t,e,n);break;default:On(t,e,n)}}function jp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new KE),e.forEach(function(r){var s=r1.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ht(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:et=l.stateNode,Kt=!1;break e;case 3:et=l.stateNode.containerInfo,Kt=!0;break e;case 4:et=l.stateNode.containerInfo,Kt=!0;break e}l=l.return}if(et===null)throw Error(j(160));cv(i,o,s),et=null,Kt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){Me(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hv(e,t),e=e.sibling}function hv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ht(e,t),nn(t),r&4){try{Fi(3,t,t.return),Dl(3,t)}catch(b){Me(t,t.return,b)}try{Fi(5,t,t.return)}catch(b){Me(t,t.return,b)}}break;case 1:Ht(e,t),nn(t),r&512&&n!==null&&_s(n,n.return);break;case 5:if(Ht(e,t),nn(t),r&512&&n!==null&&_s(n,n.return),t.flags&32){var s=t.stateNode;try{Gi(s,"")}catch(b){Me(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Vg(s,i),dc(l,o);var h=dc(l,i);for(o=0;o<u.length;o+=2){var d=u[o],m=u[o+1];d==="style"?Fg(s,m):d==="dangerouslySetInnerHTML"?Og(s,m):d==="children"?Gi(s,m):xh(s,d,m,h)}switch(l){case"input":lc(s,i);break;case"textarea":bg(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var S=i.value;S!=null?Ts(s,!!i.multiple,S,!1):p!==!!i.multiple&&(i.defaultValue!=null?Ts(s,!!i.multiple,i.defaultValue,!0):Ts(s,!!i.multiple,i.multiple?[]:"",!1))}s[ro]=i}catch(b){Me(t,t.return,b)}}break;case 6:if(Ht(e,t),nn(t),r&4){if(t.stateNode===null)throw Error(j(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(b){Me(t,t.return,b)}}break;case 3:if(Ht(e,t),nn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ji(e.containerInfo)}catch(b){Me(t,t.return,b)}break;case 4:Ht(e,t),nn(t);break;case 13:Ht(e,t),nn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(sf=Fe())),r&4&&jp(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(ht=(h=ht)||d,Ht(e,t),ht=h):Ht(e,t),nn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!d&&t.mode&1)for(q=t,d=t.child;d!==null;){for(m=q=d;q!==null;){switch(p=q,S=p.child,p.tag){case 0:case 11:case 14:case 15:Fi(4,p,p.return);break;case 1:_s(p,p.return);var P=p.stateNode;if(typeof P.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(b){Me(r,n,b)}}break;case 5:_s(p,p.return);break;case 22:if(p.memoizedState!==null){zp(m);continue}}S!==null?(S.return=p,q=S):zp(m)}d=d.sibling}e:for(d=null,m=t;;){if(m.tag===5){if(d===null){d=m;try{s=m.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Lg("display",o))}catch(b){Me(t,t.return,b)}}}else if(m.tag===6){if(d===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(b){Me(t,t.return,b)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;d===m&&(d=null),m=m.return}d===m&&(d=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Ht(e,t),nn(t),r&4&&jp(t);break;case 21:break;default:Ht(e,t),nn(t)}}function nn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(uv(n)){var r=n;break e}n=n.return}throw Error(j(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Gi(s,""),r.flags&=-33);var i=Fp(t);$c(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Fp(t);Bc(t,l,o);break;default:throw Error(j(161))}}catch(u){Me(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function QE(t,e,n){q=t,fv(t)}function fv(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||la;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||ht;l=la;var h=ht;if(la=o,(ht=u)&&!h)for(q=s;q!==null;)o=q,u=o.child,o.tag===22&&o.memoizedState!==null?Bp(s):u!==null?(u.return=o,q=u):Bp(s);for(;i!==null;)q=i,fv(i),i=i.sibling;q=s,la=l,ht=h}Up(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):Up(t)}}function Up(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ht||Dl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ht)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:qt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Ip(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ip(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var d=h.memoizedState;if(d!==null){var m=d.dehydrated;m!==null&&Ji(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}ht||e.flags&512&&zc(e)}catch(p){Me(e,e.return,p)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function zp(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function Bp(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Dl(4,e)}catch(u){Me(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Me(e,s,u)}}var i=e.return;try{zc(e)}catch(u){Me(e,i,u)}break;case 5:var o=e.return;try{zc(e)}catch(u){Me(e,o,u)}}}catch(u){Me(e,e.return,u)}if(e===t){q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,q=l;break}q=e.return}}var YE=Math.ceil,nl=kn.ReactCurrentDispatcher,nf=kn.ReactCurrentOwner,Bt=kn.ReactCurrentBatchConfig,de=0,Ze=null,ze=null,rt=0,Pt=0,ws=dr(0),Ke=0,uo=null,$r=0,Vl=0,rf=0,ji=null,Tt=null,sf=0,Fs=1/0,pn=null,rl=!1,Wc=null,Yn=null,ua=!1,$n=null,sl=0,Ui=0,Hc=null,Aa=-1,Ca=0;function vt(){return de&6?Fe():Aa!==-1?Aa:Aa=Fe()}function Xn(t){return t.mode&1?de&2&&rt!==0?rt&-rt:VE.transition!==null?(Ca===0&&(Ca=Yg()),Ca):(t=ge,t!==0||(t=window.event,t=t===void 0?16:ry(t.type)),t):1}function Yt(t,e,n,r){if(50<Ui)throw Ui=0,Hc=null,Error(j(185));To(t,n,r),(!(de&2)||t!==Ze)&&(t===Ze&&(!(de&2)&&(Vl|=n),Ke===4&&zn(t,rt)),Ct(t,r),n===1&&de===0&&!(e.mode&1)&&(Fs=Fe()+500,Rl&&pr()))}function Ct(t,e){var n=t.callbackNode;Vw(t,e);var r=za(t,t===Ze?rt:0);if(r===0)n!==null&&Xd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Xd(n),e===1)t.tag===0?DE($p.bind(null,t)):Ty($p.bind(null,t)),kE(function(){!(de&6)&&pr()}),n=null;else{switch(Xg(r)){case 1:n=Ph;break;case 4:n=Gg;break;case 16:n=Ua;break;case 536870912:n=Qg;break;default:n=Ua}n=wv(n,dv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function dv(t,e){if(Aa=-1,Ca=0,de&6)throw Error(j(327));var n=t.callbackNode;if(Cs()&&t.callbackNode!==n)return null;var r=za(t,t===Ze?rt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=il(t,r);else{e=r;var s=de;de|=2;var i=mv();(Ze!==t||rt!==e)&&(pn=null,Fs=Fe()+500,Or(t,e));do try{ZE();break}catch(l){pv(t,l)}while(!0);$h(),nl.current=i,de=s,ze!==null?e=0:(Ze=null,rt=0,e=Ke)}if(e!==0){if(e===2&&(s=vc(t),s!==0&&(r=s,e=qc(t,s))),e===1)throw n=uo,Or(t,0),zn(t,r),Ct(t,Fe()),n;if(e===6)zn(t,r);else{if(s=t.current.alternate,!(r&30)&&!XE(s)&&(e=il(t,r),e===2&&(i=vc(t),i!==0&&(r=i,e=qc(t,i))),e===1))throw n=uo,Or(t,0),zn(t,r),Ct(t,Fe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(j(345));case 2:kr(t,Tt,pn);break;case 3:if(zn(t,r),(r&130023424)===r&&(e=sf+500-Fe(),10<e)){if(za(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){vt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ac(kr.bind(null,t,Tt,pn),e);break}kr(t,Tt,pn);break;case 4:if(zn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Qt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*YE(r/1960))-r,10<r){t.timeoutHandle=Ac(kr.bind(null,t,Tt,pn),r);break}kr(t,Tt,pn);break;case 5:kr(t,Tt,pn);break;default:throw Error(j(329))}}}return Ct(t,Fe()),t.callbackNode===n?dv.bind(null,t):null}function qc(t,e){var n=ji;return t.current.memoizedState.isDehydrated&&(Or(t,e).flags|=256),t=il(t,e),t!==2&&(e=Tt,Tt=n,e!==null&&Kc(e)),t}function Kc(t){Tt===null?Tt=t:Tt.push.apply(Tt,t)}function XE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Zt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zn(t,e){for(e&=~rf,e&=~Vl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Qt(e),r=1<<n;t[n]=-1,e&=~r}}function $p(t){if(de&6)throw Error(j(327));Cs();var e=za(t,0);if(!(e&1))return Ct(t,Fe()),null;var n=il(t,e);if(t.tag!==0&&n===2){var r=vc(t);r!==0&&(e=r,n=qc(t,r))}if(n===1)throw n=uo,Or(t,0),zn(t,e),Ct(t,Fe()),n;if(n===6)throw Error(j(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,kr(t,Tt,pn),Ct(t,Fe()),null}function of(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(Fs=Fe()+500,Rl&&pr())}}function Wr(t){$n!==null&&$n.tag===0&&!(de&6)&&Cs();var e=de;de|=1;var n=Bt.transition,r=ge;try{if(Bt.transition=null,ge=1,t)return t()}finally{ge=r,Bt.transition=n,de=e,!(de&6)&&pr()}}function af(){Pt=ws.current,Ae(ws)}function Or(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,CE(n)),ze!==null)for(n=ze.return;n!==null;){var r=n;switch(Uh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&qa();break;case 3:Os(),Ae(xt),Ae(dt),Qh();break;case 5:Gh(r);break;case 4:Os();break;case 13:Ae(Pe);break;case 19:Ae(Pe);break;case 10:Wh(r.type._context);break;case 22:case 23:af()}n=n.return}if(Ze=t,ze=t=Jn(t.current,null),rt=Pt=e,Ke=0,uo=null,rf=Vl=$r=0,Tt=ji=null,Vr!==null){for(e=0;e<Vr.length;e++)if(n=Vr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Vr=null}return t}function pv(t,e){do{var n=ze;try{if($h(),Sa.current=tl,el){for(var r=Ne.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}el=!1}if(Br=0,Je=He=Ne=null,Li=!1,oo=0,nf.current=null,n===null||n.return===null){Ke=1,uo=e,ze=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=rt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,d=l,m=d.tag;if(!(d.mode&1)&&(m===0||m===11||m===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var S=Pp(o);if(S!==null){S.flags&=-257,Np(S,o,l,i,e),S.mode&1&&Rp(i,h,e),e=S,u=h;var P=e.updateQueue;if(P===null){var b=new Set;b.add(u),e.updateQueue=b}else P.add(u);break e}else{if(!(e&1)){Rp(i,h,e),lf();break e}u=Error(j(426))}}else if(Re&&l.mode&1){var M=Pp(o);if(M!==null){!(M.flags&65536)&&(M.flags|=256),Np(M,o,l,i,e),zh(Ls(u,l));break e}}i=u=Ls(u,l),Ke!==4&&(Ke=2),ji===null?ji=[i]:ji.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var T=Xy(i,u,e);Sp(i,T);break e;case 1:l=u;var v=i.type,k=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Yn===null||!Yn.has(k)))){i.flags|=65536,e&=-e,i.lanes|=e;var O=Jy(i,l,e);Sp(i,O);break e}}i=i.return}while(i!==null)}yv(n)}catch(U){e=U,ze===n&&n!==null&&(ze=n=n.return);continue}break}while(!0)}function mv(){var t=nl.current;return nl.current=tl,t===null?tl:t}function lf(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Ze===null||!($r&268435455)&&!(Vl&268435455)||zn(Ze,rt)}function il(t,e){var n=de;de|=2;var r=mv();(Ze!==t||rt!==e)&&(pn=null,Or(t,e));do try{JE();break}catch(s){pv(t,s)}while(!0);if($h(),de=n,nl.current=r,ze!==null)throw Error(j(261));return Ze=null,rt=0,Ke}function JE(){for(;ze!==null;)gv(ze)}function ZE(){for(;ze!==null&&!Iw();)gv(ze)}function gv(t){var e=_v(t.alternate,t,Pt);t.memoizedProps=t.pendingProps,e===null?yv(t):ze=e,nf.current=null}function yv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=qE(n,e),n!==null){n.flags&=32767,ze=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ke=6,ze=null;return}}else if(n=HE(n,e,Pt),n!==null){ze=n;return}if(e=e.sibling,e!==null){ze=e;return}ze=e=t}while(e!==null);Ke===0&&(Ke=5)}function kr(t,e,n){var r=ge,s=Bt.transition;try{Bt.transition=null,ge=1,e1(t,e,n,r)}finally{Bt.transition=s,ge=r}return null}function e1(t,e,n,r){do Cs();while($n!==null);if(de&6)throw Error(j(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(j(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(bw(t,i),t===Ze&&(ze=Ze=null,rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ua||(ua=!0,wv(Ua,function(){return Cs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Bt.transition,Bt.transition=null;var o=ge;ge=1;var l=de;de|=4,nf.current=null,GE(t,n),hv(n,t),wE(Ic),Ba=!!Sc,Ic=Sc=null,t.current=n,QE(n),xw(),de=l,ge=o,Bt.transition=i}else t.current=n;if(ua&&(ua=!1,$n=t,sl=s),i=t.pendingLanes,i===0&&(Yn=null),kw(n.stateNode),Ct(t,Fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(rl)throw rl=!1,t=Wc,Wc=null,t;return sl&1&&t.tag!==0&&Cs(),i=t.pendingLanes,i&1?t===Hc?Ui++:(Ui=0,Hc=t):Ui=0,pr(),null}function Cs(){if($n!==null){var t=Xg(sl),e=Bt.transition,n=ge;try{if(Bt.transition=null,ge=16>t?16:t,$n===null)var r=!1;else{if(t=$n,$n=null,sl=0,de&6)throw Error(j(331));var s=de;for(de|=4,q=t.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(q=h;q!==null;){var d=q;switch(d.tag){case 0:case 11:case 15:Fi(8,d,i)}var m=d.child;if(m!==null)m.return=d,q=m;else for(;q!==null;){d=q;var p=d.sibling,S=d.return;if(lv(d),d===h){q=null;break}if(p!==null){p.return=S,q=p;break}q=S}}}var P=i.alternate;if(P!==null){var b=P.child;if(b!==null){P.child=null;do{var M=b.sibling;b.sibling=null,b=M}while(b!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Fi(9,i,i.return)}var T=i.sibling;if(T!==null){T.return=i.return,q=T;break e}q=i.return}}var v=t.current;for(q=v;q!==null;){o=q;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,q=k;else e:for(o=v;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Dl(9,l)}}catch(U){Me(l,l.return,U)}if(l===o){q=null;break e}var O=l.sibling;if(O!==null){O.return=l.return,q=O;break e}q=l.return}}if(de=s,pr(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(Il,t)}catch{}r=!0}return r}finally{ge=n,Bt.transition=e}}return!1}function Wp(t,e,n){e=Ls(n,e),e=Xy(t,e,1),t=Qn(t,e,1),e=vt(),t!==null&&(To(t,1,e),Ct(t,e))}function Me(t,e,n){if(t.tag===3)Wp(t,t,n);else for(;e!==null;){if(e.tag===3){Wp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Yn===null||!Yn.has(r))){t=Ls(n,t),t=Jy(e,t,1),e=Qn(e,t,1),t=vt(),e!==null&&(To(e,1,t),Ct(e,t));break}}e=e.return}}function t1(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=vt(),t.pingedLanes|=t.suspendedLanes&n,Ze===t&&(rt&n)===n&&(Ke===4||Ke===3&&(rt&130023424)===rt&&500>Fe()-sf?Or(t,0):rf|=n),Ct(t,e)}function vv(t,e){e===0&&(t.mode&1?(e=Zo,Zo<<=1,!(Zo&130023424)&&(Zo=4194304)):e=1);var n=vt();t=Tn(t,e),t!==null&&(To(t,e,n),Ct(t,n))}function n1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),vv(t,n)}function r1(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(j(314))}r!==null&&r.delete(e),vv(t,n)}var _v;_v=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||xt.current)It=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return It=!1,WE(t,e,n);It=!!(t.flags&131072)}else It=!1,Re&&e.flags&1048576&&Sy(e,Qa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;xa(t,e),t=e.pendingProps;var s=Vs(e,dt.current);As(e,n),s=Xh(null,e,r,t,s,n);var i=Jh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,At(r)?(i=!0,Ka(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,qh(e),s.updater=Nl,e.stateNode=s,s._reactInternals=e,Vc(e,r,t,n),e=Oc(null,e,r,!0,i,n)):(e.tag=0,Re&&i&&jh(e),yt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(xa(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=i1(r),t=qt(r,t),s){case 0:e=Mc(null,e,r,t,n);break e;case 1:e=bp(null,e,r,t,n);break e;case 11:e=Dp(null,e,r,t,n);break e;case 14:e=Vp(null,e,r,qt(r.type,t),n);break e}throw Error(j(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qt(r,s),Mc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qt(r,s),bp(t,e,r,s,n);case 3:e:{if(nv(e),t===null)throw Error(j(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Ry(t,e),Ja(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ls(Error(j(423)),e),e=Mp(t,e,r,n,s);break e}else if(r!==s){s=Ls(Error(j(424)),e),e=Mp(t,e,r,n,s);break e}else for(Nt=Gn(e.stateNode.containerInfo.firstChild),Vt=e,Re=!0,Gt=null,n=Cy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bs(),r===s){e=Sn(t,e,n);break e}yt(t,e,r,n)}e=e.child}return e;case 5:return Py(e),t===null&&Pc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,xc(r,s)?o=null:i!==null&&xc(r,i)&&(e.flags|=32),tv(t,e),yt(t,e,o,n),e.child;case 6:return t===null&&Pc(e),null;case 13:return rv(t,e,n);case 4:return Kh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ms(e,null,r,n):yt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qt(r,s),Dp(t,e,r,s,n);case 7:return yt(t,e,e.pendingProps,n),e.child;case 8:return yt(t,e,e.pendingProps.children,n),e.child;case 12:return yt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,we(Ya,r._currentValue),r._currentValue=o,i!==null)if(Zt(i.value,o)){if(i.children===s.children&&!xt.current){e=Sn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=vn(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var d=h.pending;d===null?u.next=u:(u.next=d.next,d.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Nc(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(j(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Nc(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}yt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,As(e,n),s=$t(s),r=r(s),e.flags|=1,yt(t,e,r,n),e.child;case 14:return r=e.type,s=qt(r,e.pendingProps),s=qt(r.type,s),Vp(t,e,r,s,n);case 15:return Zy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qt(r,s),xa(t,e),e.tag=1,At(r)?(t=!0,Ka(e)):t=!1,As(e,n),Yy(e,r,s),Vc(e,r,s,n),Oc(null,e,r,!0,t,n);case 19:return sv(t,e,n);case 22:return ev(t,e,n)}throw Error(j(156,e.tag))};function wv(t,e){return Kg(t,e)}function s1(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(t,e,n,r){return new s1(t,e,n,r)}function uf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function i1(t){if(typeof t=="function")return uf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ch)return 11;if(t===kh)return 14}return 2}function Jn(t,e){var n=t.alternate;return n===null?(n=zt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ka(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")uf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case cs:return Lr(n.children,s,i,e);case Ah:o=8,s|=8;break;case rc:return t=zt(12,n,e,s|2),t.elementType=rc,t.lanes=i,t;case sc:return t=zt(13,n,e,s),t.elementType=sc,t.lanes=i,t;case ic:return t=zt(19,n,e,s),t.elementType=ic,t.lanes=i,t;case Pg:return bl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case kg:o=10;break e;case Rg:o=9;break e;case Ch:o=11;break e;case kh:o=14;break e;case Fn:o=16,r=null;break e}throw Error(j(130,t==null?t:typeof t,""))}return e=zt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Lr(t,e,n,r){return t=zt(7,t,r,e),t.lanes=n,t}function bl(t,e,n,r){return t=zt(22,t,r,e),t.elementType=Pg,t.lanes=n,t.stateNode={isHidden:!1},t}function $u(t,e,n){return t=zt(6,t,null,e),t.lanes=n,t}function Wu(t,e,n){return e=zt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function o1(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Iu(0),this.expirationTimes=Iu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Iu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function cf(t,e,n,r,s,i,o,l,u){return t=new o1(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=zt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qh(i),t}function a1(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:us,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Ev(t){if(!t)return ir;t=t._reactInternals;e:{if(Qr(t)!==t||t.tag!==1)throw Error(j(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(At(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(j(171))}if(t.tag===1){var n=t.type;if(At(n))return Ey(t,n,e)}return e}function Tv(t,e,n,r,s,i,o,l,u){return t=cf(n,r,!0,t,s,i,o,l,u),t.context=Ev(null),n=t.current,r=vt(),s=Xn(n),i=vn(r,s),i.callback=e??null,Qn(n,i,s),t.current.lanes=s,To(t,s,r),Ct(t,r),t}function Ml(t,e,n,r){var s=e.current,i=vt(),o=Xn(s);return n=Ev(n),e.context===null?e.context=n:e.pendingContext=n,e=vn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Qn(s,e,o),t!==null&&(Yt(t,s,o,i),Ta(t,s,o)),o}function ol(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Hp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function hf(t,e){Hp(t,e),(t=t.alternate)&&Hp(t,e)}function l1(){return null}var Sv=typeof reportError=="function"?reportError:function(t){console.error(t)};function ff(t){this._internalRoot=t}Ol.prototype.render=ff.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(j(409));Ml(t,e,null,null)};Ol.prototype.unmount=ff.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wr(function(){Ml(null,t,null,null)}),e[En]=null}};function Ol(t){this._internalRoot=t}Ol.prototype.unstable_scheduleHydration=function(t){if(t){var e=ey();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Un.length&&e!==0&&e<Un[n].priority;n++);Un.splice(n,0,t),n===0&&ny(t)}};function df(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ll(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function qp(){}function u1(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=ol(o);i.call(h)}}var o=Tv(e,r,t,0,null,!1,!1,"",qp);return t._reactRootContainer=o,t[En]=o.current,to(t.nodeType===8?t.parentNode:t),Wr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=ol(u);l.call(h)}}var u=cf(t,0,!1,null,null,!1,!1,"",qp);return t._reactRootContainer=u,t[En]=u.current,to(t.nodeType===8?t.parentNode:t),Wr(function(){Ml(e,u,n,r)}),u}function Fl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=ol(o);l.call(u)}}Ml(e,o,t,s)}else o=u1(n,e,t,s,r);return ol(o)}Jg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ai(e.pendingLanes);n!==0&&(Nh(e,n|1),Ct(e,Fe()),!(de&6)&&(Fs=Fe()+500,pr()))}break;case 13:Wr(function(){var r=Tn(t,1);if(r!==null){var s=vt();Yt(r,t,1,s)}}),hf(t,1)}};Dh=function(t){if(t.tag===13){var e=Tn(t,134217728);if(e!==null){var n=vt();Yt(e,t,134217728,n)}hf(t,134217728)}};Zg=function(t){if(t.tag===13){var e=Xn(t),n=Tn(t,e);if(n!==null){var r=vt();Yt(n,t,e,r)}hf(t,e)}};ey=function(){return ge};ty=function(t,e){var n=ge;try{return ge=t,e()}finally{ge=n}};mc=function(t,e,n){switch(e){case"input":if(lc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=kl(r);if(!s)throw Error(j(90));Dg(r),lc(r,s)}}}break;case"textarea":bg(t,n);break;case"select":e=n.value,e!=null&&Ts(t,!!n.multiple,e,!1)}};zg=of;Bg=Wr;var c1={usingClientEntryPoint:!1,Events:[Io,ps,kl,jg,Ug,of]},Ti={findFiberByHostInstance:Dr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},h1={bundleType:Ti.bundleType,version:Ti.version,rendererPackageName:Ti.rendererPackageName,rendererConfig:Ti.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:kn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Hg(t),t===null?null:t.stateNode},findFiberByHostInstance:Ti.findFiberByHostInstance||l1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ca=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ca.isDisabled&&ca.supportsFiber)try{Il=ca.inject(h1),an=ca}catch{}}Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=c1;Mt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!df(e))throw Error(j(200));return a1(t,e,null,n)};Mt.createRoot=function(t,e){if(!df(t))throw Error(j(299));var n=!1,r="",s=Sv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=cf(t,1,!1,null,null,n,!1,r,s),t[En]=e.current,to(t.nodeType===8?t.parentNode:t),new ff(e)};Mt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(j(188)):(t=Object.keys(t).join(","),Error(j(268,t)));return t=Hg(e),t=t===null?null:t.stateNode,t};Mt.flushSync=function(t){return Wr(t)};Mt.hydrate=function(t,e,n){if(!Ll(e))throw Error(j(200));return Fl(null,t,e,!0,n)};Mt.hydrateRoot=function(t,e,n){if(!df(t))throw Error(j(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Sv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Tv(e,null,t,1,n??null,s,!1,i,o),t[En]=e.current,to(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ol(e)};Mt.render=function(t,e,n){if(!Ll(e))throw Error(j(200));return Fl(null,t,e,!1,n)};Mt.unmountComponentAtNode=function(t){if(!Ll(t))throw Error(j(40));return t._reactRootContainer?(Wr(function(){Fl(null,null,t,!1,function(){t._reactRootContainer=null,t[En]=null})}),!0):!1};Mt.unstable_batchedUpdates=of;Mt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ll(n))throw Error(j(200));if(t==null||t._reactInternals===void 0)throw Error(j(38));return Fl(t,e,n,!1,r)};Mt.version="18.3.1-next-f1338f8080-20240426";function Iv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Iv)}catch(t){console.error(t)}}Iv(),Ig.exports=Mt;var f1=Ig.exports,Kp=f1;tc.createRoot=Kp.createRoot,tc.hydrateRoot=Kp.hydrateRoot;const d1=()=>{};var Gp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},p1=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Av={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,d=i>>2,m=(i&3)<<4|l>>4;let p=(l&15)<<2|h>>6,S=h&63;u||(S=64,o||(p=64)),r.push(n[d],n[m],n[p],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):p1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||m==null)throw new m1;const p=i<<2|l>>4;if(r.push(p),h!==64){const S=l<<4&240|h>>2;if(r.push(S),m!==64){const P=h<<6&192|m;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class m1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const g1=function(t){const e=xv(t);return Av.encodeByteArray(e,!0)},al=function(t){return g1(t).replace(/\./g,"")},y1=function(t){try{return Av.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=()=>v1().__FIREBASE_DEFAULTS__,w1=()=>{if(typeof process>"u"||typeof Gp>"u")return;const t=Gp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},E1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&y1(t[1]);return e&&JSON.parse(e)},pf=()=>{try{return d1()||_1()||w1()||E1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},T1=t=>{var e,n;return(n=(e=pf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},S1=t=>{const e=T1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Cv=()=>{var t;return(t=pf())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function x1(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[al(JSON.stringify(n)),al(JSON.stringify(o)),""].join(".")}const zi={};function C1(){const t={prod:[],emulator:[]};for(const e of Object.keys(zi))zi[e]?t.emulator.push(e):t.prod.push(e);return t}function k1(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Qp=!1;function R1(t,e){if(typeof window>"u"||typeof document>"u"||!mf(window.location.host)||zi[t]===e||zi[t]||Qp)return;zi[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=C1().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function u(p,S){p.setAttribute("width","24"),p.setAttribute("id",S),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function h(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Qp=!0,o()},p}function d(p,S){p.setAttribute("id",S),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function m(){const p=k1(r),S=n("text"),P=document.getElementById(S)||document.createElement("span"),b=n("learnmore"),M=document.getElementById(b)||document.createElement("a"),T=n("preprendIcon"),v=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const k=p.element;l(k),d(M,b);const O=h();u(v,T),k.append(v,P,M,O),document.body.appendChild(k)}i?(P.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function N1(){var e;const t=(e=pf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function D1(){return!N1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function V1(){try{return typeof indexedDB=="object"}catch{return!1}}function b1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1="FirebaseError";class Gs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=M1,Object.setPrototypeOf(this,Gs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kv.prototype.create)}}class kv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?O1(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Gs(s,l,r)}}function O1(t,e){return t.replace(L1,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const L1=/\{\$([^}]+)}/g;function ll(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Yp(i)&&Yp(o)){if(!ll(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Yp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(t){return t&&t._delegate?t._delegate:t}class co{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new I1;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(U1(e))try{this.getOrInitializeService({instanceIdentifier:Rr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Rr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Rr){return this.instances.has(e)}getOptions(e=Rr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:j1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Rr){return this.component?this.component.multipleInstances?e:Rr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function j1(t){return t===Rr?void 0:t}function U1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new F1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(fe||(fe={}));const B1={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},$1=fe.INFO,W1={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},H1=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=W1[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rv{constructor(e){this.name=e,this._logLevel=$1,this._logHandler=H1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?B1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}}const q1=(t,e)=>e.some(n=>t instanceof n);let Xp,Jp;function K1(){return Xp||(Xp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function G1(){return Jp||(Jp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Pv=new WeakMap,Gc=new WeakMap,Nv=new WeakMap,Hu=new WeakMap,gf=new WeakMap;function Q1(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Zn(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Pv.set(n,t)}).catch(()=>{}),gf.set(e,t),e}function Y1(t){if(Gc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Gc.set(t,e)}let Qc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Nv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function X1(t){Qc=t(Qc)}function J1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(qu(this),e,...n);return Nv.set(r,e.sort?e.sort():[e]),Zn(r)}:G1().includes(t)?function(...e){return t.apply(qu(this),e),Zn(Pv.get(this))}:function(...e){return Zn(t.apply(qu(this),e))}}function Z1(t){return typeof t=="function"?J1(t):(t instanceof IDBTransaction&&Y1(t),q1(t,K1())?new Proxy(t,Qc):t)}function Zn(t){if(t instanceof IDBRequest)return Q1(t);if(Hu.has(t))return Hu.get(t);const e=Z1(t);return e!==t&&(Hu.set(t,e),gf.set(e,t)),e}const qu=t=>gf.get(t);function eT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Zn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Zn(o.result),u.oldVersion,u.newVersion,Zn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const tT=["get","getKey","getAll","getAllKeys","count"],nT=["put","add","delete","clear"],Ku=new Map;function Zp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ku.get(e))return Ku.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=nT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||tT.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return Ku.set(e,i),i}X1(t=>({...t,get:(e,n,r)=>Zp(e,n)||t.get(e,n,r),has:(e,n)=>!!Zp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(sT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function sT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yc="@firebase/app",em="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xn=new Rv("@firebase/app"),iT="@firebase/app-compat",oT="@firebase/analytics-compat",aT="@firebase/analytics",lT="@firebase/app-check-compat",uT="@firebase/app-check",cT="@firebase/auth",hT="@firebase/auth-compat",fT="@firebase/database",dT="@firebase/data-connect",pT="@firebase/database-compat",mT="@firebase/functions",gT="@firebase/functions-compat",yT="@firebase/installations",vT="@firebase/installations-compat",_T="@firebase/messaging",wT="@firebase/messaging-compat",ET="@firebase/performance",TT="@firebase/performance-compat",ST="@firebase/remote-config",IT="@firebase/remote-config-compat",xT="@firebase/storage",AT="@firebase/storage-compat",CT="@firebase/firestore",kT="@firebase/ai",RT="@firebase/firestore-compat",PT="firebase",NT="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc="[DEFAULT]",DT={[Yc]:"fire-core",[iT]:"fire-core-compat",[aT]:"fire-analytics",[oT]:"fire-analytics-compat",[uT]:"fire-app-check",[lT]:"fire-app-check-compat",[cT]:"fire-auth",[hT]:"fire-auth-compat",[fT]:"fire-rtdb",[dT]:"fire-data-connect",[pT]:"fire-rtdb-compat",[mT]:"fire-fn",[gT]:"fire-fn-compat",[yT]:"fire-iid",[vT]:"fire-iid-compat",[_T]:"fire-fcm",[wT]:"fire-fcm-compat",[ET]:"fire-perf",[TT]:"fire-perf-compat",[ST]:"fire-rc",[IT]:"fire-rc-compat",[xT]:"fire-gcs",[AT]:"fire-gcs-compat",[CT]:"fire-fst",[RT]:"fire-fst-compat",[kT]:"fire-vertex","fire-js":"fire-js",[PT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul=new Map,VT=new Map,Jc=new Map;function tm(t,e){try{t.container.addComponent(e)}catch(n){xn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function cl(t){const e=t.name;if(Jc.has(e))return xn.debug(`There were multiple attempts to register component ${e}.`),!1;Jc.set(e,t);for(const n of ul.values())tm(n,t);for(const n of VT.values())tm(n,t);return!0}function bT(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function MT(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},er=new kv("app","Firebase",OT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw er.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT=NT;function Dv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Xc,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw er.create("bad-app-name",{appName:String(s)});if(n||(n=Cv()),!n)throw er.create("no-options");const i=ul.get(s);if(i){if(ll(n,i.options)&&ll(r,i.config))return i;throw er.create("duplicate-app",{appName:s})}const o=new z1(s);for(const u of Jc.values())o.addComponent(u);const l=new LT(n,r,o);return ul.set(s,l),l}function jT(t=Xc){const e=ul.get(t);if(!e&&t===Xc&&Cv())return Dv();if(!e)throw er.create("no-app",{appName:t});return e}function ks(t,e,n){let r=DT[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xn.warn(o.join(" "));return}cl(new co(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT="firebase-heartbeat-database",zT=1,ho="firebase-heartbeat-store";let Gu=null;function Vv(){return Gu||(Gu=eT(UT,zT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ho)}catch(n){console.warn(n)}}}}).catch(t=>{throw er.create("idb-open",{originalErrorMessage:t.message})})),Gu}async function BT(t){try{const n=(await Vv()).transaction(ho),r=await n.objectStore(ho).get(bv(t));return await n.done,r}catch(e){if(e instanceof Gs)xn.warn(e.message);else{const n=er.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xn.warn(n.message)}}}async function nm(t,e){try{const r=(await Vv()).transaction(ho,"readwrite");await r.objectStore(ho).put(e,bv(t)),await r.done}catch(n){if(n instanceof Gs)xn.warn(n.message);else{const r=er.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});xn.warn(r.message)}}}function bv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T=1024,WT=30;class HT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new KT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=rm();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>WT){const o=GT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){xn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=rm(),{heartbeatsToSend:r,unsentEntries:s}=qT(this._heartbeatsCache.heartbeats),i=al(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return xn.warn(n),""}}}function rm(){return new Date().toISOString().substring(0,10)}function qT(t,e=$T){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),sm(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),sm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class KT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return V1()?b1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await BT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return nm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return nm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function sm(t){return al(JSON.stringify({version:2,heartbeats:t})).length}function GT(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(t){cl(new co("platform-logger",e=>new rT(e),"PRIVATE")),cl(new co("heartbeat",e=>new HT(e),"PRIVATE")),ks(Yc,em,t),ks(Yc,em,"esm2020"),ks("fire-js","")}QT("");var im=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tr,Mv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,y){function w(){}w.prototype=y.prototype,_.F=y.prototype,_.prototype=new w,_.prototype.constructor=_,_.D=function(I,C,N){for(var E=Array(arguments.length-2),je=2;je<arguments.length;je++)E[je-2]=arguments[je];return y.prototype[C].apply(I,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(_,y,w){w||(w=0);const I=Array(16);if(typeof y=="string")for(var C=0;C<16;++C)I[C]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(C=0;C<16;++C)I[C]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=_.g[0],w=_.g[1],C=_.g[2];let N=_.g[3],E;E=y+(N^w&(C^N))+I[0]+3614090360&4294967295,y=w+(E<<7&4294967295|E>>>25),E=N+(C^y&(w^C))+I[1]+3905402710&4294967295,N=y+(E<<12&4294967295|E>>>20),E=C+(w^N&(y^w))+I[2]+606105819&4294967295,C=N+(E<<17&4294967295|E>>>15),E=w+(y^C&(N^y))+I[3]+3250441966&4294967295,w=C+(E<<22&4294967295|E>>>10),E=y+(N^w&(C^N))+I[4]+4118548399&4294967295,y=w+(E<<7&4294967295|E>>>25),E=N+(C^y&(w^C))+I[5]+1200080426&4294967295,N=y+(E<<12&4294967295|E>>>20),E=C+(w^N&(y^w))+I[6]+2821735955&4294967295,C=N+(E<<17&4294967295|E>>>15),E=w+(y^C&(N^y))+I[7]+4249261313&4294967295,w=C+(E<<22&4294967295|E>>>10),E=y+(N^w&(C^N))+I[8]+1770035416&4294967295,y=w+(E<<7&4294967295|E>>>25),E=N+(C^y&(w^C))+I[9]+2336552879&4294967295,N=y+(E<<12&4294967295|E>>>20),E=C+(w^N&(y^w))+I[10]+4294925233&4294967295,C=N+(E<<17&4294967295|E>>>15),E=w+(y^C&(N^y))+I[11]+2304563134&4294967295,w=C+(E<<22&4294967295|E>>>10),E=y+(N^w&(C^N))+I[12]+1804603682&4294967295,y=w+(E<<7&4294967295|E>>>25),E=N+(C^y&(w^C))+I[13]+4254626195&4294967295,N=y+(E<<12&4294967295|E>>>20),E=C+(w^N&(y^w))+I[14]+2792965006&4294967295,C=N+(E<<17&4294967295|E>>>15),E=w+(y^C&(N^y))+I[15]+1236535329&4294967295,w=C+(E<<22&4294967295|E>>>10),E=y+(C^N&(w^C))+I[1]+4129170786&4294967295,y=w+(E<<5&4294967295|E>>>27),E=N+(w^C&(y^w))+I[6]+3225465664&4294967295,N=y+(E<<9&4294967295|E>>>23),E=C+(y^w&(N^y))+I[11]+643717713&4294967295,C=N+(E<<14&4294967295|E>>>18),E=w+(N^y&(C^N))+I[0]+3921069994&4294967295,w=C+(E<<20&4294967295|E>>>12),E=y+(C^N&(w^C))+I[5]+3593408605&4294967295,y=w+(E<<5&4294967295|E>>>27),E=N+(w^C&(y^w))+I[10]+38016083&4294967295,N=y+(E<<9&4294967295|E>>>23),E=C+(y^w&(N^y))+I[15]+3634488961&4294967295,C=N+(E<<14&4294967295|E>>>18),E=w+(N^y&(C^N))+I[4]+3889429448&4294967295,w=C+(E<<20&4294967295|E>>>12),E=y+(C^N&(w^C))+I[9]+568446438&4294967295,y=w+(E<<5&4294967295|E>>>27),E=N+(w^C&(y^w))+I[14]+3275163606&4294967295,N=y+(E<<9&4294967295|E>>>23),E=C+(y^w&(N^y))+I[3]+4107603335&4294967295,C=N+(E<<14&4294967295|E>>>18),E=w+(N^y&(C^N))+I[8]+1163531501&4294967295,w=C+(E<<20&4294967295|E>>>12),E=y+(C^N&(w^C))+I[13]+2850285829&4294967295,y=w+(E<<5&4294967295|E>>>27),E=N+(w^C&(y^w))+I[2]+4243563512&4294967295,N=y+(E<<9&4294967295|E>>>23),E=C+(y^w&(N^y))+I[7]+1735328473&4294967295,C=N+(E<<14&4294967295|E>>>18),E=w+(N^y&(C^N))+I[12]+2368359562&4294967295,w=C+(E<<20&4294967295|E>>>12),E=y+(w^C^N)+I[5]+4294588738&4294967295,y=w+(E<<4&4294967295|E>>>28),E=N+(y^w^C)+I[8]+2272392833&4294967295,N=y+(E<<11&4294967295|E>>>21),E=C+(N^y^w)+I[11]+1839030562&4294967295,C=N+(E<<16&4294967295|E>>>16),E=w+(C^N^y)+I[14]+4259657740&4294967295,w=C+(E<<23&4294967295|E>>>9),E=y+(w^C^N)+I[1]+2763975236&4294967295,y=w+(E<<4&4294967295|E>>>28),E=N+(y^w^C)+I[4]+1272893353&4294967295,N=y+(E<<11&4294967295|E>>>21),E=C+(N^y^w)+I[7]+4139469664&4294967295,C=N+(E<<16&4294967295|E>>>16),E=w+(C^N^y)+I[10]+3200236656&4294967295,w=C+(E<<23&4294967295|E>>>9),E=y+(w^C^N)+I[13]+681279174&4294967295,y=w+(E<<4&4294967295|E>>>28),E=N+(y^w^C)+I[0]+3936430074&4294967295,N=y+(E<<11&4294967295|E>>>21),E=C+(N^y^w)+I[3]+3572445317&4294967295,C=N+(E<<16&4294967295|E>>>16),E=w+(C^N^y)+I[6]+76029189&4294967295,w=C+(E<<23&4294967295|E>>>9),E=y+(w^C^N)+I[9]+3654602809&4294967295,y=w+(E<<4&4294967295|E>>>28),E=N+(y^w^C)+I[12]+3873151461&4294967295,N=y+(E<<11&4294967295|E>>>21),E=C+(N^y^w)+I[15]+530742520&4294967295,C=N+(E<<16&4294967295|E>>>16),E=w+(C^N^y)+I[2]+3299628645&4294967295,w=C+(E<<23&4294967295|E>>>9),E=y+(C^(w|~N))+I[0]+4096336452&4294967295,y=w+(E<<6&4294967295|E>>>26),E=N+(w^(y|~C))+I[7]+1126891415&4294967295,N=y+(E<<10&4294967295|E>>>22),E=C+(y^(N|~w))+I[14]+2878612391&4294967295,C=N+(E<<15&4294967295|E>>>17),E=w+(N^(C|~y))+I[5]+4237533241&4294967295,w=C+(E<<21&4294967295|E>>>11),E=y+(C^(w|~N))+I[12]+1700485571&4294967295,y=w+(E<<6&4294967295|E>>>26),E=N+(w^(y|~C))+I[3]+2399980690&4294967295,N=y+(E<<10&4294967295|E>>>22),E=C+(y^(N|~w))+I[10]+4293915773&4294967295,C=N+(E<<15&4294967295|E>>>17),E=w+(N^(C|~y))+I[1]+2240044497&4294967295,w=C+(E<<21&4294967295|E>>>11),E=y+(C^(w|~N))+I[8]+1873313359&4294967295,y=w+(E<<6&4294967295|E>>>26),E=N+(w^(y|~C))+I[15]+4264355552&4294967295,N=y+(E<<10&4294967295|E>>>22),E=C+(y^(N|~w))+I[6]+2734768916&4294967295,C=N+(E<<15&4294967295|E>>>17),E=w+(N^(C|~y))+I[13]+1309151649&4294967295,w=C+(E<<21&4294967295|E>>>11),E=y+(C^(w|~N))+I[4]+4149444226&4294967295,y=w+(E<<6&4294967295|E>>>26),E=N+(w^(y|~C))+I[11]+3174756917&4294967295,N=y+(E<<10&4294967295|E>>>22),E=C+(y^(N|~w))+I[2]+718787259&4294967295,C=N+(E<<15&4294967295|E>>>17),E=w+(N^(C|~y))+I[9]+3951481745&4294967295,_.g[0]=_.g[0]+y&4294967295,_.g[1]=_.g[1]+(C+(E<<21&4294967295|E>>>11))&4294967295,_.g[2]=_.g[2]+C&4294967295,_.g[3]=_.g[3]+N&4294967295}r.prototype.v=function(_,y){y===void 0&&(y=_.length);const w=y-this.blockSize,I=this.C;let C=this.h,N=0;for(;N<y;){if(C==0)for(;N<=w;)s(this,_,N),N+=this.blockSize;if(typeof _=="string"){for(;N<y;)if(I[C++]=_.charCodeAt(N++),C==this.blockSize){s(this,I),C=0;break}}else for(;N<y;)if(I[C++]=_[N++],C==this.blockSize){s(this,I),C=0;break}}this.h=C,this.o+=y},r.prototype.A=function(){var _=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);_[0]=128;for(var y=1;y<_.length-8;++y)_[y]=0;y=this.o*8;for(var w=_.length-8;w<_.length;++w)_[w]=y&255,y/=256;for(this.v(_),_=Array(16),y=0,w=0;w<4;++w)for(let I=0;I<32;I+=8)_[y++]=this.g[w]>>>I&255;return _};function i(_,y){var w=l;return Object.prototype.hasOwnProperty.call(w,_)?w[_]:w[_]=y(_)}function o(_,y){this.h=y;const w=[];let I=!0;for(let C=_.length-1;C>=0;C--){const N=_[C]|0;I&&N==y||(w[C]=N,I=!1)}this.g=w}var l={};function u(_){return-128<=_&&_<128?i(_,function(y){return new o([y|0],y<0?-1:0)}):new o([_|0],_<0?-1:0)}function h(_){if(isNaN(_)||!isFinite(_))return m;if(_<0)return M(h(-_));const y=[];let w=1;for(let I=0;_>=w;I++)y[I]=_/w|0,w*=4294967296;return new o(y,0)}function d(_,y){if(_.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(_.charAt(0)=="-")return M(d(_.substring(1),y));if(_.indexOf("-")>=0)throw Error('number format error: interior "-" character');const w=h(Math.pow(y,8));let I=m;for(let N=0;N<_.length;N+=8){var C=Math.min(8,_.length-N);const E=parseInt(_.substring(N,N+C),y);C<8?(C=h(Math.pow(y,C)),I=I.j(C).add(h(E))):(I=I.j(w),I=I.add(h(E)))}return I}var m=u(0),p=u(1),S=u(16777216);t=o.prototype,t.m=function(){if(b(this))return-M(this).m();let _=0,y=1;for(let w=0;w<this.g.length;w++){const I=this.i(w);_+=(I>=0?I:4294967296+I)*y,y*=4294967296}return _},t.toString=function(_){if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(P(this))return"0";if(b(this))return"-"+M(this).toString(_);const y=h(Math.pow(_,6));var w=this;let I="";for(;;){const C=O(w,y).g;w=T(w,C.j(y));let N=((w.g.length>0?w.g[0]:w.h)>>>0).toString(_);if(w=C,P(w))return N+I;for(;N.length<6;)N="0"+N;I=N+I}},t.i=function(_){return _<0?0:_<this.g.length?this.g[_]:this.h};function P(_){if(_.h!=0)return!1;for(let y=0;y<_.g.length;y++)if(_.g[y]!=0)return!1;return!0}function b(_){return _.h==-1}t.l=function(_){return _=T(this,_),b(_)?-1:P(_)?0:1};function M(_){const y=_.g.length,w=[];for(let I=0;I<y;I++)w[I]=~_.g[I];return new o(w,~_.h).add(p)}t.abs=function(){return b(this)?M(this):this},t.add=function(_){const y=Math.max(this.g.length,_.g.length),w=[];let I=0;for(let C=0;C<=y;C++){let N=I+(this.i(C)&65535)+(_.i(C)&65535),E=(N>>>16)+(this.i(C)>>>16)+(_.i(C)>>>16);I=E>>>16,N&=65535,E&=65535,w[C]=E<<16|N}return new o(w,w[w.length-1]&-2147483648?-1:0)};function T(_,y){return _.add(M(y))}t.j=function(_){if(P(this)||P(_))return m;if(b(this))return b(_)?M(this).j(M(_)):M(M(this).j(_));if(b(_))return M(this.j(M(_)));if(this.l(S)<0&&_.l(S)<0)return h(this.m()*_.m());const y=this.g.length+_.g.length,w=[];for(var I=0;I<2*y;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(let C=0;C<_.g.length;C++){const N=this.i(I)>>>16,E=this.i(I)&65535,je=_.i(C)>>>16,kt=_.i(C)&65535;w[2*I+2*C]+=E*kt,v(w,2*I+2*C),w[2*I+2*C+1]+=N*kt,v(w,2*I+2*C+1),w[2*I+2*C+1]+=E*je,v(w,2*I+2*C+1),w[2*I+2*C+2]+=N*je,v(w,2*I+2*C+2)}for(_=0;_<y;_++)w[_]=w[2*_+1]<<16|w[2*_];for(_=y;_<2*y;_++)w[_]=0;return new o(w,0)};function v(_,y){for(;(_[y]&65535)!=_[y];)_[y+1]+=_[y]>>>16,_[y]&=65535,y++}function k(_,y){this.g=_,this.h=y}function O(_,y){if(P(y))throw Error("division by zero");if(P(_))return new k(m,m);if(b(_))return y=O(M(_),y),new k(M(y.g),M(y.h));if(b(y))return y=O(_,M(y)),new k(M(y.g),y.h);if(_.g.length>30){if(b(_)||b(y))throw Error("slowDivide_ only works with positive integers.");for(var w=p,I=y;I.l(_)<=0;)w=U(w),I=U(I);var C=B(w,1),N=B(I,1);for(I=B(I,2),w=B(w,2);!P(I);){var E=N.add(I);E.l(_)<=0&&(C=C.add(w),N=E),I=B(I,1),w=B(w,1)}return y=T(_,C.j(y)),new k(C,y)}for(C=m;_.l(y)>=0;){for(w=Math.max(1,Math.floor(_.m()/y.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),N=h(w),E=N.j(y);b(E)||E.l(_)>0;)w-=I,N=h(w),E=N.j(y);P(N)&&(N=p),C=C.add(N),_=T(_,E)}return new k(C,_)}t.B=function(_){return O(this,_).h},t.and=function(_){const y=Math.max(this.g.length,_.g.length),w=[];for(let I=0;I<y;I++)w[I]=this.i(I)&_.i(I);return new o(w,this.h&_.h)},t.or=function(_){const y=Math.max(this.g.length,_.g.length),w=[];for(let I=0;I<y;I++)w[I]=this.i(I)|_.i(I);return new o(w,this.h|_.h)},t.xor=function(_){const y=Math.max(this.g.length,_.g.length),w=[];for(let I=0;I<y;I++)w[I]=this.i(I)^_.i(I);return new o(w,this.h^_.h)};function U(_){const y=_.g.length+1,w=[];for(let I=0;I<y;I++)w[I]=_.i(I)<<1|_.i(I-1)>>>31;return new o(w,_.h)}function B(_,y){const w=y>>5;y%=32;const I=_.g.length-w,C=[];for(let N=0;N<I;N++)C[N]=y>0?_.i(N+w)>>>y|_.i(N+w+1)<<32-y:_.i(N+w);return new o(C,_.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Mv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=d,tr=o}).apply(typeof im<"u"?im:typeof self<"u"?self:typeof window<"u"?window:{});var ha=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ov,ki,Lv,Ra,Zc,Fv,jv,Uv;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ha=="object"&&ha];for(var c=0;c<a.length;++c){var f=a[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,c){if(c)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var D=a[g];if(!(D in f))break e;f=f[D]}a=a[a.length-1],g=f[a],c=c(g),c!=g&&c!=null&&e(f,a,{configurable:!0,writable:!0,value:c})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(c){var f=[],g;for(g in c)Object.prototype.hasOwnProperty.call(c,g)&&f.push([g,c[g]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function u(a,c,f){return a.call.apply(a.bind,arguments)}function h(a,c,f){return h=u,h.apply(null,arguments)}function d(a,c){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function m(a,c){function f(){}f.prototype=c.prototype,a.Z=c.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(g,D,V){for(var z=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)z[oe-2]=arguments[oe];return c.prototype[D].apply(g,z)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function S(a){const c=a.length;if(c>0){const f=Array(c);for(let g=0;g<c;g++)f[g]=a[g];return f}return[]}function P(a,c){for(let g=1;g<arguments.length;g++){const D=arguments[g];var f=typeof D;if(f=f!="object"?f:D?Array.isArray(D)?"array":f:"null",f=="array"||f=="object"&&typeof D.length=="number"){f=a.length||0;const V=D.length||0;a.length=f+V;for(let z=0;z<V;z++)a[f+z]=D[z]}else a.push(D)}}class b{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return this.h>0?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function M(a){o.setTimeout(()=>{throw a},0)}function T(){var a=_;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class v{constructor(){this.h=this.g=null}add(c,f){const g=k.get();g.set(c,f),this.h?this.h.next=g:this.g=g,this.h=g}}var k=new b(()=>new O,a=>a.reset());class O{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let U,B=!1,_=new v,y=()=>{const a=Promise.resolve(void 0);U=()=>{a.then(w)}};function w(){for(var a;a=T();){try{a.h.call(a.g)}catch(f){M(f)}var c=k;c.j(a),c.h<100&&(c.h++,a.next=c.g,c.g=a)}B=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};o.addEventListener("test",f,c),o.removeEventListener("test",f,c)}catch{}return a}();function E(a){return/^[\s\xa0]*$/.test(a)}function je(a,c){C.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,c)}m(je,C),je.prototype.init=function(a,c){const f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget,c||(f=="mouseover"?c=a.fromElement:f=="mouseout"&&(c=a.toElement)),this.relatedTarget=c,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&je.Z.h.call(this)},je.prototype.h=function(){je.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var kt="closure_listenable_"+(Math.random()*1e6|0),Rn=0;function vr(a,c,f,g,D){this.listener=a,this.proxy=null,this.src=c,this.type=f,this.capture=!!g,this.ha=D,this.key=++Rn,this.da=this.fa=!1}function W(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Z(a,c,f){for(const g in a)c.call(f,a[g],g,a)}function R(a,c){for(const f in a)c.call(void 0,a[f],f,a)}function A(a){const c={};for(const f in a)c[f]=a[f];return c}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(a,c){let f,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(f in g)a[f]=g[f];for(let V=0;V<$.length;V++)f=$[V],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function X(a){this.src=a,this.g={},this.h=0}X.prototype.add=function(a,c,f,g,D){const V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);const z=ee(a,c,g,D);return z>-1?(c=a[z],f||(c.fa=!1)):(c=new vr(c,this.src,V,!!g,D),c.fa=f,a.push(c)),c};function te(a,c){const f=c.type;if(f in a.g){var g=a.g[f],D=Array.prototype.indexOf.call(g,c,void 0),V;(V=D>=0)&&Array.prototype.splice.call(g,D,1),V&&(W(c),a.g[f].length==0&&(delete a.g[f],a.h--))}}function ee(a,c,f,g){for(let D=0;D<a.length;++D){const V=a[D];if(!V.da&&V.listener==c&&V.capture==!!f&&V.ha==g)return D}return-1}var G="closure_lm_"+(Math.random()*1e6|0),ie={};function me(a,c,f,g,D){if(Array.isArray(c)){for(let V=0;V<c.length;V++)me(a,c[V],f,g,D);return null}return f=Lt(f),a&&a[kt]?a.J(c,f,l(g)?!!g.capture:!1,D):Ce(a,c,f,!1,g,D)}function Ce(a,c,f,g,D,V){if(!c)throw Error("Invalid event type");const z=l(D)?!!D.capture:!!D;let oe=pt(a);if(oe||(a[G]=oe=new X(a)),f=oe.add(c,f,g,z,V),f.proxy)return f;if(g=ye(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)N||(D=z),D===void 0&&(D=!1),a.addEventListener(c.toString(),g,D);else if(a.attachEvent)a.attachEvent(le(c.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function ye(){function a(f){return c.call(a.src,a.listener,f)}const c=ot;return a}function Ee(a,c,f,g,D){if(Array.isArray(c))for(var V=0;V<c.length;V++)Ee(a,c[V],f,g,D);else g=l(g)?!!g.capture:!!g,f=Lt(f),a&&a[kt]?(a=a.i,V=String(c).toString(),V in a.g&&(c=a.g[V],f=ee(c,f,g,D),f>-1&&(W(c[f]),Array.prototype.splice.call(c,f,1),c.length==0&&(delete a.g[V],a.h--)))):a&&(a=pt(a))&&(c=a.g[c.toString()],a=-1,c&&(a=ee(c,f,g,D)),(f=a>-1?c[a]:null)&&Oe(f))}function Oe(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[kt])te(c.i,a);else{var f=a.type,g=a.proxy;c.removeEventListener?c.removeEventListener(f,g,a.capture):c.detachEvent?c.detachEvent(le(f),g):c.addListener&&c.removeListener&&c.removeListener(g),(f=pt(c))?(te(f,a),f.h==0&&(f.src=null,c[G]=null)):W(a)}}}function le(a){return a in ie?ie[a]:ie[a]="on"+a}function ot(a,c){if(a.da)a=!0;else{c=new je(c,this);const f=a.listener,g=a.ha||a.src;a.fa&&Oe(a),a=f.call(g,c)}return a}function pt(a){return a=a[G],a instanceof X?a:null}var mt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Lt(a){return typeof a=="function"?a:(a[mt]||(a[mt]=function(c){return a.handleEvent(c)}),a[mt])}function ke(){I.call(this),this.i=new X(this),this.M=this,this.G=null}m(ke,I),ke.prototype[kt]=!0,ke.prototype.removeEventListener=function(a,c,f,g){Ee(this,a,c,f,g)};function _e(a,c){var f,g=a.G;if(g)for(f=[];g;g=g.G)f.push(g);if(a=a.M,g=c.type||c,typeof c=="string")c=new C(c,a);else if(c instanceof C)c.target=c.target||a;else{var D=c;c=new C(g,a),Q(c,D)}D=!0;let V,z;if(f)for(z=f.length-1;z>=0;z--)V=c.g=f[z],D=Zr(V,g,!0,c)&&D;if(V=c.g=a,D=Zr(V,g,!0,c)&&D,D=Zr(V,g,!1,c)&&D,f)for(z=0;z<f.length;z++)V=c.g=f[z],D=Zr(V,g,!1,c)&&D}ke.prototype.N=function(){if(ke.Z.N.call(this),this.i){var a=this.i;for(const c in a.g){const f=a.g[c];for(let g=0;g<f.length;g++)W(f[g]);delete a.g[c],a.h--}}this.G=null},ke.prototype.J=function(a,c,f,g){return this.i.add(String(a),c,!1,f,g)},ke.prototype.K=function(a,c,f,g){return this.i.add(String(a),c,!0,f,g)};function Zr(a,c,f,g){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();let D=!0;for(let V=0;V<c.length;++V){const z=c[V];if(z&&!z.da&&z.capture==f){const oe=z.listener,We=z.ha||z.src;z.fa&&te(a.i,z),D=oe.call(We,g)!==!1&&D}}return D&&!g.defaultPrevented}function nu(a,c){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(c)>2147483647?-1:o.setTimeout(a,c||0)}function No(a){a.g=nu(()=>{a.g=null,a.i&&(a.i=!1,No(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class Do extends I{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:No(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _r(a){I.call(this),this.h=a,this.g={}}m(_r,I);var Zs=[];function Vo(a){Z(a.g,function(c,f){this.g.hasOwnProperty(f)&&Oe(c)},a),a.g={}}_r.prototype.N=function(){_r.Z.N.call(this),Vo(this)},_r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ei=o.JSON.stringify,bo=o.JSON.parse,Mo=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function es(){}function Oo(){}var wr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ru(){C.call(this,"d")}m(ru,C);function su(){C.call(this,"c")}m(su,C);var Er={},Yf=null;function Lo(){return Yf=Yf||new ke}Er.Ia="serverreachability";function Xf(a){C.call(this,Er.Ia,a)}m(Xf,C);function ti(a){const c=Lo();_e(c,new Xf(c))}Er.STAT_EVENT="statevent";function Jf(a,c){C.call(this,Er.STAT_EVENT,a),this.stat=c}m(Jf,C);function gt(a){const c=Lo();_e(c,new Jf(c,a))}Er.Ja="timingevent";function Zf(a,c){C.call(this,Er.Ja,a),this.size=c}m(Zf,C);function ni(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},c)}function ri(){this.g=!0}ri.prototype.ua=function(){this.g=!1};function y0(a,c,f,g,D,V){a.info(function(){if(a.g)if(V){var z="",oe=V.split("&");for(let ve=0;ve<oe.length;ve++){var We=oe[ve].split("=");if(We.length>1){const Ye=We[0];We=We[1];const tn=Ye.split("_");z=tn.length>=2&&tn[1]=="type"?z+(Ye+"="+We+"&"):z+(Ye+"=redacted&")}}}else z=null;else z=V;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+c+`
`+f+`
`+z})}function v0(a,c,f,g,D,V,z){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+c+`
`+f+`
`+V+" "+z})}function ts(a,c,f,g){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+w0(a,f)+(g?" "+g:"")})}function _0(a,c){a.info(function(){return"TIMEOUT: "+c})}ri.prototype.info=function(){};function w0(a,c){if(!a.g)return c;if(!c)return null;try{const V=JSON.parse(c);if(V){for(a=0;a<V.length;a++)if(Array.isArray(V[a])){var f=V[a];if(!(f.length<2)){var g=f[1];if(Array.isArray(g)&&!(g.length<1)){var D=g[0];if(D!="noop"&&D!="stop"&&D!="close")for(let z=1;z<g.length;z++)g[z]=""}}}}return ei(V)}catch{return c}}var Fo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ed={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},td;function iu(){}m(iu,es),iu.prototype.g=function(){return new XMLHttpRequest},td=new iu;function si(a){return encodeURIComponent(String(a))}function E0(a){var c=1;a=a.split(":");const f=[];for(;c>0&&a.length;)f.push(a.shift()),c--;return a.length&&f.push(a.join(":")),f}function Pn(a,c,f,g){this.j=a,this.i=c,this.l=f,this.S=g||1,this.V=new _r(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new nd}function nd(){this.i=null,this.g="",this.h=!1}var rd={},ou={};function au(a,c,f){a.M=1,a.A=Uo(en(c)),a.u=f,a.R=!0,sd(a,null)}function sd(a,c){a.F=Date.now(),jo(a),a.B=en(a.A);var f=a.B,g=a.S;Array.isArray(g)||(g=[String(g)]),yd(f.i,"t",g),a.C=0,f=a.j.L,a.h=new nd,a.g=Md(a.j,f?c:null,!a.u),a.P>0&&(a.O=new Do(h(a.Y,a,a.g),a.P)),c=a.V,f=a.g,g=a.ba;var D="readystatechange";Array.isArray(D)||(D&&(Zs[0]=D.toString()),D=Zs);for(let V=0;V<D.length;V++){const z=me(f,D[V],g||c.handleEvent,!1,c.h||c);if(!z)break;c.g[z.key]=z}c=a.J?A(a.J):{},a.u?(a.v||(a.v="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,c)):(a.v="GET",a.g.ea(a.B,a.v,null,c)),ti(),y0(a.i,a.v,a.B,a.l,a.S,a.u)}Pn.prototype.ba=function(a){a=a.target;const c=this.O;c&&Vn(a)==3?c.j():this.Y(a)},Pn.prototype.Y=function(a){try{if(a==this.g)e:{const oe=Vn(this.g),We=this.g.ya(),ve=this.g.ca();if(!(oe<3)&&(oe!=3||this.g&&(this.h.h||this.g.la()||Id(this.g)))){this.K||oe!=4||We==7||(We==8||ve<=0?ti(3):ti(2)),lu(this);var c=this.g.ca();this.X=c;var f=T0(this);if(this.o=c==200,v0(this.i,this.v,this.B,this.l,this.S,oe,c),this.o){if(this.U&&!this.L){t:{if(this.g){var g,D=this.g;if((g=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(g)){var V=g;break t}}V=null}if(a=V)ts(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,uu(this,a);else{this.o=!1,this.m=3,gt(12),Tr(this),ii(this);break e}}if(this.R){a=!0;let Ye;for(;!this.K&&this.C<f.length;)if(Ye=S0(this,f),Ye==ou){oe==4&&(this.m=4,gt(14),a=!1),ts(this.i,this.l,null,"[Incomplete Response]");break}else if(Ye==rd){this.m=4,gt(15),ts(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else ts(this.i,this.l,Ye,null),uu(this,Ye);if(id(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),oe!=4||f.length!=0||this.h.h||(this.m=1,gt(16),a=!1),this.o=this.o&&a,!a)ts(this.i,this.l,f,"[Invalid Chunked Response]"),Tr(this),ii(this);else if(f.length>0&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.aa&&!z.P&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),yu(z),z.P=!0,gt(11))}}else ts(this.i,this.l,f,null),uu(this,f);oe==4&&Tr(this),this.o&&!this.K&&(oe==4?Nd(this.j,this):(this.o=!1,jo(this)))}else L0(this.g),c==400&&f.indexOf("Unknown SID")>0?(this.m=3,gt(12)):(this.m=0,gt(13)),Tr(this),ii(this)}}}catch{}finally{}};function T0(a){if(!id(a))return a.g.la();const c=Id(a.g);if(c==="")return"";let f="";const g=c.length,D=Vn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Tr(a),ii(a),"";a.h.i=new o.TextDecoder}for(let V=0;V<g;V++)a.h.h=!0,f+=a.h.i.decode(c[V],{stream:!(D&&V==g-1)});return c.length=0,a.h.g+=f,a.C=0,a.h.g}function id(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function S0(a,c){var f=a.C,g=c.indexOf(`
`,f);return g==-1?ou:(f=Number(c.substring(f,g)),isNaN(f)?rd:(g+=1,g+f>c.length?ou:(c=c.slice(g,g+f),a.C=g+f,c)))}Pn.prototype.cancel=function(){this.K=!0,Tr(this)};function jo(a){a.T=Date.now()+a.H,od(a,a.H)}function od(a,c){if(a.D!=null)throw Error("WatchDog timer not null");a.D=ni(h(a.aa,a),c)}function lu(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Pn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(_0(this.i,this.B),this.M!=2&&(ti(),gt(17)),Tr(this),this.m=2,ii(this)):od(this,this.T-a)};function ii(a){a.j.I==0||a.K||Nd(a.j,a)}function Tr(a){lu(a);var c=a.O;c&&typeof c.dispose=="function"&&c.dispose(),a.O=null,Vo(a.V),a.g&&(c=a.g,a.g=null,c.abort(),c.dispose())}function uu(a,c){try{var f=a.j;if(f.I!=0&&(f.g==a||cu(f.h,a))){if(!a.L&&cu(f.h,a)&&f.I==3){try{var g=f.Ba.g.parse(c)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)Ho(f),$o(f);else break e;gu(f),gt(18)}}else f.xa=D[1],0<f.xa-f.K&&D[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=ni(h(f.Va,f),6e3));ud(f.h)<=1&&f.ta&&(f.ta=void 0)}else Ir(f,11)}else if((a.L||f.g==a)&&Ho(f),!E(c))for(D=f.Ba.g.parse(c),c=0;c<D.length;c++){let ve=D[c];const Ye=ve[0];if(!(Ye<=f.K))if(f.K=Ye,ve=ve[1],f.I==2)if(ve[0]=="c"){f.M=ve[1],f.ba=ve[2];const tn=ve[3];tn!=null&&(f.ka=tn,f.j.info("VER="+f.ka));const xr=ve[4];xr!=null&&(f.za=xr,f.j.info("SVER="+f.za));const bn=ve[5];bn!=null&&typeof bn=="number"&&bn>0&&(g=1.5*bn,f.O=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;const Mn=a.g;if(Mn){const Ko=Mn.g?Mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ko){var V=g.h;V.g||Ko.indexOf("spdy")==-1&&Ko.indexOf("quic")==-1&&Ko.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(hu(V,V.h),V.h=null))}if(g.G){const vu=Mn.g?Mn.g.getResponseHeader("X-HTTP-Session-Id"):null;vu&&(g.wa=vu,Te(g.J,g.G,vu))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),g=f;var z=a;if(g.na=bd(g,g.L?g.ba:null,g.W),z.L){cd(g.h,z);var oe=z,We=g.O;We&&(oe.H=We),oe.D&&(lu(oe),jo(oe)),g.g=z}else Rd(g);f.i.length>0&&Wo(f)}else ve[0]!="stop"&&ve[0]!="close"||Ir(f,7);else f.I==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?Ir(f,7):mu(f):ve[0]!="noop"&&f.l&&f.l.qa(ve),f.A=0)}}ti(4)}catch{}}var I0=class{constructor(a,c){this.g=a,this.map=c}};function ad(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ld(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function ud(a){return a.h?1:a.g?a.g.size:0}function cu(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function hu(a,c){a.g?a.g.add(c):a.h=c}function cd(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}ad.prototype.cancel=function(){if(this.i=hd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function hd(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const f of a.g.values())c=c.concat(f.G);return c}return S(a.i)}var fd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function x0(a,c){if(a){a=a.split("&");for(let f=0;f<a.length;f++){const g=a[f].indexOf("=");let D,V=null;g>=0?(D=a[f].substring(0,g),V=a[f].substring(g+1)):D=a[f],c(D,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Nn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let c;a instanceof Nn?(this.l=a.l,oi(this,a.j),this.o=a.o,this.g=a.g,ai(this,a.u),this.h=a.h,fu(this,vd(a.i)),this.m=a.m):a&&(c=String(a).match(fd))?(this.l=!1,oi(this,c[1]||"",!0),this.o=li(c[2]||""),this.g=li(c[3]||"",!0),ai(this,c[4]),this.h=li(c[5]||"",!0),fu(this,c[6]||"",!0),this.m=li(c[7]||"")):(this.l=!1,this.i=new ci(null,this.l))}Nn.prototype.toString=function(){const a=[];var c=this.j;c&&a.push(ui(c,dd,!0),":");var f=this.g;return(f||c=="file")&&(a.push("//"),(c=this.o)&&a.push(ui(c,dd,!0),"@"),a.push(si(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(ui(f,f.charAt(0)=="/"?k0:C0,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",ui(f,P0)),a.join("")},Nn.prototype.resolve=function(a){const c=en(this);let f=!!a.j;f?oi(c,a.j):f=!!a.o,f?c.o=a.o:f=!!a.g,f?c.g=a.g:f=a.u!=null;var g=a.h;if(f)ai(c,a.u);else if(f=!!a.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var D=c.h.lastIndexOf("/");D!=-1&&(g=c.h.slice(0,D+1)+g)}if(D=g,D==".."||D==".")g="";else if(D.indexOf("./")!=-1||D.indexOf("/.")!=-1){g=D.lastIndexOf("/",0)==0,D=D.split("/");const V=[];for(let z=0;z<D.length;){const oe=D[z++];oe=="."?g&&z==D.length&&V.push(""):oe==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),g&&z==D.length&&V.push("")):(V.push(oe),g=!0)}g=V.join("/")}else g=D}return f?c.h=g:f=a.i.toString()!=="",f?fu(c,vd(a.i)):f=!!a.m,f&&(c.m=a.m),c};function en(a){return new Nn(a)}function oi(a,c,f){a.j=f?li(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function ai(a,c){if(c){if(c=Number(c),isNaN(c)||c<0)throw Error("Bad port number "+c);a.u=c}else a.u=null}function fu(a,c,f){c instanceof ci?(a.i=c,N0(a.i,a.l)):(f||(c=ui(c,R0)),a.i=new ci(c,a.l))}function Te(a,c,f){a.i.set(c,f)}function Uo(a){return Te(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function li(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ui(a,c,f){return typeof a=="string"?(a=encodeURI(a).replace(c,A0),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function A0(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var dd=/[#\/\?@]/g,C0=/[#\?:]/g,k0=/[#\?]/g,R0=/[#\?@]/g,P0=/#/g;function ci(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function Sr(a){a.g||(a.g=new Map,a.h=0,a.i&&x0(a.i,function(c,f){a.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}t=ci.prototype,t.add=function(a,c){Sr(this),this.i=null,a=ns(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(c),this.h+=1,this};function pd(a,c){Sr(a),c=ns(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function md(a,c){return Sr(a),c=ns(a,c),a.g.has(c)}t.forEach=function(a,c){Sr(this),this.g.forEach(function(f,g){f.forEach(function(D){a.call(c,D,g,this)},this)},this)};function gd(a,c){Sr(a);let f=[];if(typeof c=="string")md(a,c)&&(f=f.concat(a.g.get(ns(a,c))));else for(a=Array.from(a.g.values()),c=0;c<a.length;c++)f=f.concat(a[c]);return f}t.set=function(a,c){return Sr(this),this.i=null,a=ns(this,a),md(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=gd(this,a),a.length>0?String(a[0]):c):c};function yd(a,c,f){pd(a,c),f.length>0&&(a.i=null,a.g.set(ns(a,c),S(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(let g=0;g<c.length;g++){var f=c[g];const D=si(f);f=gd(this,f);for(let V=0;V<f.length;V++){let z=D;f[V]!==""&&(z+="="+si(f[V])),a.push(z)}}return this.i=a.join("&")};function vd(a){const c=new ci;return c.i=a.i,a.g&&(c.g=new Map(a.g),c.h=a.h),c}function ns(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function N0(a,c){c&&!a.j&&(Sr(a),a.i=null,a.g.forEach(function(f,g){const D=g.toLowerCase();g!=D&&(pd(this,g),yd(this,D,f))},a)),a.j=c}function D0(a,c){const f=new ri;if(o.Image){const g=new Image;g.onload=d(Dn,f,"TestLoadImage: loaded",!0,c,g),g.onerror=d(Dn,f,"TestLoadImage: error",!1,c,g),g.onabort=d(Dn,f,"TestLoadImage: abort",!1,c,g),g.ontimeout=d(Dn,f,"TestLoadImage: timeout",!1,c,g),o.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else c(!1)}function V0(a,c){const f=new ri,g=new AbortController,D=setTimeout(()=>{g.abort(),Dn(f,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:g.signal}).then(V=>{clearTimeout(D),V.ok?Dn(f,"TestPingServer: ok",!0,c):Dn(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(D),Dn(f,"TestPingServer: error",!1,c)})}function Dn(a,c,f,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(f)}catch{}}function b0(){this.g=new Mo}function du(a){this.i=a.Sb||null,this.h=a.ab||!1}m(du,es),du.prototype.g=function(){return new zo(this.i,this.h)};function zo(a,c){ke.call(this),this.H=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(zo,ke),t=zo.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=c,this.readyState=1,fi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const c={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(c.body=a),(this.H||o).fetch(new Request(this.D,c)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,hi(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,fi(this)),this.g&&(this.readyState=3,fi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;_d(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function _d(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.B.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?hi(this):fi(this),this.readyState==3&&_d(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,hi(this))},t.Na=function(a){this.g&&(this.response=a,hi(this))},t.ga=function(){this.g&&hi(this)};function hi(a){a.readyState=4,a.l=null,a.j=null,a.B=null,fi(a)}t.setRequestHeader=function(a,c){this.A.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=c.next();return a.join(`\r
`)};function fi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(zo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function wd(a){let c="";return Z(a,function(f,g){c+=g,c+=":",c+=f,c+=`\r
`}),c}function pu(a,c,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=wd(f),typeof a=="string"?f!=null&&si(f):Te(a,c,f))}function be(a){ke.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(be,ke);var M0=/^https?$/i,O0=["POST","PUT"];t=be.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,c,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():td.g(),this.g.onreadystatechange=p(h(this.Ca,this));try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(V){Ed(this,V);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)f.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const V of g.keys())f.set(V,g.get(V));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(V=>V.toLowerCase()=="content-type"),D=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(O0,c,void 0)>=0)||g||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,z]of f)this.g.setRequestHeader(V,z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(V){Ed(this,V)}};function Ed(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.o=5,Td(a),Bo(a)}function Td(a){a.A||(a.A=!0,_e(a,"complete"),_e(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,_e(this,"complete"),_e(this,"abort"),Bo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bo(this,!0)),be.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Sd(this):this.Xa())},t.Xa=function(){Sd(this)};function Sd(a){if(a.h&&typeof i<"u"){if(a.v&&Vn(a)==4)setTimeout(a.Ca.bind(a),0);else if(_e(a,"readystatechange"),Vn(a)==4){a.h=!1;try{const V=a.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var f;if(!(f=c)){var g;if(g=V===0){let z=String(a.D).match(fd)[1]||null;!z&&o.self&&o.self.location&&(z=o.self.location.protocol.slice(0,-1)),g=!M0.test(z?z.toLowerCase():"")}f=g}if(f)_e(a,"complete"),_e(a,"success");else{a.o=6;try{var D=Vn(a)>2?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.ca()+"]",Td(a)}}finally{Bo(a)}}}}function Bo(a,c){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const f=a.g;a.g=null,c||_e(a,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Vn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Vn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),bo(c)}};function Id(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function L0(a){const c={};a=(a.g&&Vn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(E(a[g]))continue;var f=E0(a[g]);const D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const V=c[D]||[];c[D]=V,V.push(f)}R(c,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function di(a,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||c}function xd(a){this.za=0,this.i=[],this.j=new ri,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=di("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=di("baseRetryDelayMs",5e3,a),this.Za=di("retryDelaySeedMs",1e4,a),this.Ta=di("forwardChannelMaxRetries",2,a),this.va=di("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new ad(a&&a.concurrentRequestLimit),this.Ba=new b0,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=xd.prototype,t.ka=8,t.I=1,t.connect=function(a,c,f,g){gt(0),this.W=a,this.H=c||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.J=bd(this,null,this.W),Wo(this)};function mu(a){if(Ad(a),a.I==3){var c=a.V++,f=en(a.J);if(Te(f,"SID",a.M),Te(f,"RID",c),Te(f,"TYPE","terminate"),pi(a,f),c=new Pn(a,a.j,c),c.M=2,c.A=Uo(en(f)),f=!1,o.navigator&&o.navigator.sendBeacon)try{f=o.navigator.sendBeacon(c.A.toString(),"")}catch{}!f&&o.Image&&(new Image().src=c.A,f=!0),f||(c.g=Md(c.j,null),c.g.ea(c.A)),c.F=Date.now(),jo(c)}Vd(a)}function $o(a){a.g&&(yu(a),a.g.cancel(),a.g=null)}function Ad(a){$o(a),a.v&&(o.clearTimeout(a.v),a.v=null),Ho(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Wo(a){if(!ld(a.h)&&!a.m){a.m=!0;var c=a.Ea;U||y(),B||(U(),B=!0),_.add(c,a),a.D=0}}function F0(a,c){return ud(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=c.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=ni(h(a.Ea,a,c),Dd(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const D=new Pn(this,this.j,a);let V=this.o;if(this.U&&(V?(V=A(V),Q(V,this.U)):V=this.U),this.u!==null||this.R||(D.J=V,V=null),this.S)e:{for(var c=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(c+=g,c>4096){c=f;break e}if(c===4096||f===this.i.length-1){c=f+1;break e}}c=1e3}else c=1e3;c=kd(this,D,c),f=en(this.J),Te(f,"RID",a),Te(f,"CVER",22),this.G&&Te(f,"X-HTTP-Session-Id",this.G),pi(this,f),V&&(this.R?c="headers="+si(wd(V))+"&"+c:this.u&&pu(f,this.u,V)),hu(this.h,D),this.Ra&&Te(f,"TYPE","init"),this.S?(Te(f,"$req",c),Te(f,"SID","null"),D.U=!0,au(D,f,null)):au(D,f,c),this.I=2}}else this.I==3&&(a?Cd(this,a):this.i.length==0||ld(this.h)||Cd(this))};function Cd(a,c){var f;c?f=c.l:f=a.V++;const g=en(a.J);Te(g,"SID",a.M),Te(g,"RID",f),Te(g,"AID",a.K),pi(a,g),a.u&&a.o&&pu(g,a.u,a.o),f=new Pn(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),c&&(a.i=c.G.concat(a.i)),c=kd(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),hu(a.h,f),au(f,g,c)}function pi(a,c){a.H&&Z(a.H,function(f,g){Te(c,g,f)}),a.l&&Z({},function(f,g){Te(c,g,f)})}function kd(a,c,f){f=Math.min(a.i.length,f);const g=a.l?h(a.l.Ka,a.l,a):null;e:{var D=a.i;let oe=-1;for(;;){const We=["count="+f];oe==-1?f>0?(oe=D[0].g,We.push("ofs="+oe)):oe=0:We.push("ofs="+oe);let ve=!0;for(let Ye=0;Ye<f;Ye++){var V=D[Ye].g;const tn=D[Ye].map;if(V-=oe,V<0)oe=Math.max(0,D[Ye].g-100),ve=!1;else try{V="req"+V+"_"||"";try{var z=tn instanceof Map?tn:Object.entries(tn);for(const[xr,bn]of z){let Mn=bn;l(bn)&&(Mn=ei(bn)),We.push(V+xr+"="+encodeURIComponent(Mn))}}catch(xr){throw We.push(V+"type="+encodeURIComponent("_badmap")),xr}}catch{g&&g(tn)}}if(ve){z=We.join("&");break e}}z=void 0}return a=a.i.splice(0,f),c.G=a,z}function Rd(a){if(!a.g&&!a.v){a.Y=1;var c=a.Da;U||y(),B||(U(),B=!0),_.add(c,a),a.A=0}}function gu(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=ni(h(a.Da,a),Dd(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Pd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=ni(h(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,gt(10),$o(this),Pd(this))};function yu(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Pd(a){a.g=new Pn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var c=en(a.na);Te(c,"RID","rpc"),Te(c,"SID",a.M),Te(c,"AID",a.K),Te(c,"CI",a.F?"0":"1"),!a.F&&a.ia&&Te(c,"TO",a.ia),Te(c,"TYPE","xmlhttp"),pi(a,c),a.u&&a.o&&pu(c,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=Uo(en(c)),f.u=null,f.R=!0,sd(f,a)}t.Va=function(){this.C!=null&&(this.C=null,$o(this),gu(this),gt(19))};function Ho(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Nd(a,c){var f=null;if(a.g==c){Ho(a),yu(a),a.g=null;var g=2}else if(cu(a.h,c))f=c.G,cd(a.h,c),g=1;else return;if(a.I!=0){if(c.o)if(g==1){f=c.u?c.u.length:0,c=Date.now()-c.F;var D=a.D;g=Lo(),_e(g,new Zf(g,f)),Wo(a)}else Rd(a);else if(D=c.m,D==3||D==0&&c.X>0||!(g==1&&F0(a,c)||g==2&&gu(a)))switch(f&&f.length>0&&(c=a.h,c.i=c.i.concat(f)),D){case 1:Ir(a,5);break;case 4:Ir(a,10);break;case 3:Ir(a,6);break;default:Ir(a,2)}}}function Dd(a,c){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*c}function Ir(a,c){if(a.j.info("Error code "+c),c==2){var f=h(a.bb,a),g=a.Ua;const D=!g;g=new Nn(g||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||oi(g,"https"),Uo(g),D?D0(g.toString(),f):V0(g.toString(),f)}else gt(2);a.I=0,a.l&&a.l.pa(c),Vd(a),Ad(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function Vd(a){if(a.I=0,a.ja=[],a.l){const c=hd(a.h);(c.length!=0||a.i.length!=0)&&(P(a.ja,c),P(a.ja,a.i),a.h.i.length=0,S(a.i),a.i.length=0),a.l.oa()}}function bd(a,c,f){var g=f instanceof Nn?en(f):new Nn(f);if(g.g!="")c&&(g.g=c+"."+g.g),ai(g,g.u);else{var D=o.location;g=D.protocol,c=c?c+"."+D.hostname:D.hostname,D=+D.port;const V=new Nn(null);g&&oi(V,g),c&&(V.g=c),D&&ai(V,D),f&&(V.h=f),g=V}return f=a.G,c=a.wa,f&&c&&Te(g,f,c),Te(g,"VER",a.ka),pi(a,g),g}function Md(a,c,f){if(c&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Aa&&!a.ma?new be(new du({ab:f})):new be(a.ma),c.Fa(a.L),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Od(){}t=Od.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function qo(){}qo.prototype.g=function(a,c){return new Rt(a,c)};function Rt(a,c){ke.call(this),this.g=new xd(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.sa&&(a?a["X-WebChannel-Client-Profile"]=c.sa:a={"X-WebChannel-Client-Profile":c.sa}),this.g.U=a,(a=c&&c.Qb)&&!E(a)&&(this.g.u=a),this.A=c&&c.supportsCrossDomainXhr||!1,this.v=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!E(c)&&(this.g.G=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new rs(this)}m(Rt,ke),Rt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Rt.prototype.close=function(){mu(this.g)},Rt.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=ei(a),a=f);c.i.push(new I0(c.Ya++,a)),c.I==3&&Wo(c)},Rt.prototype.N=function(){this.g.l=null,delete this.j,mu(this.g),delete this.g,Rt.Z.N.call(this)};function Ld(a){ru.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const f in c){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}m(Ld,ru);function Fd(){su.call(this),this.status=1}m(Fd,su);function rs(a){this.g=a}m(rs,Od),rs.prototype.ra=function(){_e(this.g,"a")},rs.prototype.qa=function(a){_e(this.g,new Ld(a))},rs.prototype.pa=function(a){_e(this.g,new Fd)},rs.prototype.oa=function(){_e(this.g,"b")},qo.prototype.createWebChannel=qo.prototype.g,Rt.prototype.send=Rt.prototype.o,Rt.prototype.open=Rt.prototype.m,Rt.prototype.close=Rt.prototype.close,Uv=function(){return new qo},jv=function(){return Lo()},Fv=Er,Zc={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fo.NO_ERROR=0,Fo.TIMEOUT=8,Fo.HTTP_ERROR=6,Ra=Fo,ed.COMPLETE="complete",Lv=ed,Oo.EventType=wr,wr.OPEN="a",wr.CLOSE="b",wr.ERROR="c",wr.MESSAGE="d",ke.prototype.listen=ke.prototype.J,ki=Oo,be.prototype.listenOnce=be.prototype.K,be.prototype.getLastError=be.prototype.Ha,be.prototype.getLastErrorCode=be.prototype.ya,be.prototype.getStatus=be.prototype.ca,be.prototype.getResponseJson=be.prototype.La,be.prototype.getResponseText=be.prototype.la,be.prototype.send=be.prototype.ea,be.prototype.setWithCredentials=be.prototype.Fa,Ov=be}).apply(typeof ha<"u"?ha:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ct.UNAUTHENTICATED=new ct(null),ct.GOOGLE_CREDENTIALS=new ct("google-credentials-uid"),ct.FIRST_PARTY=new ct("first-party-uid"),ct.MOCK_USER=new ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qs="12.9.0";function YT(t){Qs=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr=new Rv("@firebase/firestore");function is(){return Hr.logLevel}function H(t,...e){if(Hr.logLevel<=fe.DEBUG){const n=e.map(yf);Hr.debug(`Firestore (${Qs}): ${t}`,...n)}}function An(t,...e){if(Hr.logLevel<=fe.ERROR){const n=e.map(yf);Hr.error(`Firestore (${Qs}): ${t}`,...n)}}function qr(t,...e){if(Hr.logLevel<=fe.WARN){const n=e.map(yf);Hr.warn(`Firestore (${Qs}): ${t}`,...n)}}function yf(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,zv(t,r,n)}function zv(t,e,n){let r=`FIRESTORE (${Qs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw An(r),new Error(r)}function pe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||zv(e,s,r)}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends Gs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ct.UNAUTHENTICATED))}shutdown(){}}class JT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ZT{constructor(e){this.t=e,this.currentUser=ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){pe(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Fr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Fr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Fr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pe(typeof r.accessToken=="string",31837,{l:r}),new Bv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string",2055,{h:e}),new ct(e)}}class eS{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ct.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class tS{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new eS(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class om{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nS{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,MT(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){pe(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new om(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new om(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=rS(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ue(t,e){return t<e?-1:t>e?1:0}function eh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Qu(s)===Qu(i)?ue(s,i):Qu(s)?1:-1}return ue(t.length,e.length)}const sS=55296,iS=57343;function Qu(t){const e=t.charCodeAt(0);return e>=sS&&e<=iS}function js(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="__name__";class sn{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&J(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return sn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof sn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=sn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ue(e.length,n.length)}static compareSegments(e,n){const r=sn.isNumericId(e),s=sn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?sn.extractNumericId(e).compare(sn.extractNumericId(n)):eh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return tr.fromString(e.substring(4,e.length-2))}}class Ie extends sn{construct(e,n,r){return new Ie(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ie(n)}static emptyPath(){return new Ie([])}}const oS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nt extends sn{construct(e,n,r){return new nt(e,n,r)}static isValidIdentifier(e){return oS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===am}static keyField(){return new nt([am])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new K(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new K(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nt(n)}static emptyPath(){return new nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(Ie.fromString(e))}static fromName(e){return new Y(Ie.fromString(e).popFirst(5))}static empty(){return new Y(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ie.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new Ie(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(t,e,n){if(!n)throw new K(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function aS(t,e,n,r){if(e===!0&&r===!0)throw new K(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function lm(t){if(!Y.isDocumentKey(t))throw new K(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function um(t){if(Y.isDocumentKey(t))throw new K(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Wv(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function _f(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J(12329,{type:typeof t})}function _n(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_f(t);throw new K(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ao(t,e){if(!Wv(t))throw new K(F.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new K(F.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm=-62135596800,hm=1e6;class xe{static now(){return xe.fromMillis(Date.now())}static fromDate(e){return xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*hm);return new xe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<cm)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hm}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ao(e,xe._jsonSchema))return new xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-cm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xe._jsonSchemaVersion="firestore/timestamp/1.0",xe._jsonSchema={type:Be("string",xe._jsonSchemaVersion),seconds:Be("number"),nanoseconds:Be("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{static fromTimestamp(e){return new ne(e)}static min(){return new ne(new xe(0,0))}static max(){return new ne(new xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=-1;function lS(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ne.fromTimestamp(r===1e9?new xe(n+1,0):new xe(n,r));return new or(s,Y.empty(),e)}function uS(t){return new or(t.readTime,t.key,fo)}class or{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new or(ne.min(),Y.empty(),fo)}static max(){return new or(ne.max(),Y.empty(),fo)}}function cS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ys(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==hS)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(d=>{o[h]=d,++l,l===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function dS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Xs(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}jl.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf=-1;function Ul(t){return t==null}function hl(t){return t===0&&1/t==-1/0}function pS(t){return typeof t=="number"&&Number.isInteger(t)&&!hl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="";function mS(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=fm(e)),e=gS(t.get(n),e);return fm(e)}function gS(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Hv:n+="";break;default:n+=i}}return n}function fm(t){return t+Hv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function mr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){this.comparator=e,this.root=n||tt.EMPTY}insert(e,n){return new Ve(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tt.BLACK,null,null))}remove(e){return new Ve(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fa(this.root,e,this.comparator,!1)}getReverseIterator(){return new fa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fa(this.root,e,this.comparator,!0)}}class fa{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??tt.RED,this.left=s??tt.EMPTY,this.right=i??tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new tt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return tt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw J(43730,{key:this.key,value:this.value});if(this.right.isRed())throw J(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw J(27949);return e+(this.isRed()?0:1)}}tt.EMPTY=null,tt.RED=!0,tt.BLACK=!1;tt.EMPTY=new class{constructor(){this.size=0}get key(){throw J(57766)}get value(){throw J(16141)}get color(){throw J(16727)}get left(){throw J(29726)}get right(){throw J(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new pm(this.data.getIterator())}getIteratorFrom(e){return new pm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ge)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ge(this.comparator);return n.data=e,n}}class pm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.fields=e,e.sort(nt.comparator)}static empty(){return new Dt([])}unionWith(e){let n=new Ge(nt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Dt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return js(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Kv("Invalid base64 string: "+i):i}}(e);return new it(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new it(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}it.EMPTY_BYTE_STRING=new it("");const yS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ar(t){if(pe(!!t,39018),typeof t=="string"){let e=0;const n=yS.exec(t);if(pe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Le(t.seconds),nanos:Le(t.nanos)}}function Le(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function lr(t){return typeof t=="string"?it.fromBase64String(t):it.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="server_timestamp",Qv="__type__",Yv="__previous_value__",Xv="__local_write_time__";function Ef(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Qv])==null?void 0:r.stringValue)===Gv}function zl(t){const e=t.mapValue.fields[Yv];return Ef(e)?zl(e):e}function po(t){const e=ar(t.mapValue.fields[Xv].timestampValue);return new xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,n,r,s,i,o,l,u,h,d,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d,this.apiKey=m}}const fl="(default)";class mo{constructor(e,n){this.projectId=e,this.database=n||fl}static empty(){return new mo("","")}get isDefaultDatabase(){return this.database===fl}isEqual(e){return e instanceof mo&&e.projectId===this.projectId&&e.database===this.database}}function _S(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new K(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mo(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="__type__",wS="__max__",da={mapValue:{}},Zv="__vector__",dl="value";function ur(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ef(t)?4:TS(t)?9007199254740991:ES(t)?10:11:J(28295,{value:t})}function fn(t,e){if(t===e)return!0;const n=ur(t);if(n!==ur(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return po(t).isEqual(po(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ar(s.timestampValue),l=ar(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return lr(s.bytesValue).isEqual(lr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Le(s.geoPointValue.latitude)===Le(i.geoPointValue.latitude)&&Le(s.geoPointValue.longitude)===Le(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Le(s.integerValue)===Le(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Le(s.doubleValue),l=Le(i.doubleValue);return o===l?hl(o)===hl(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return js(t.arrayValue.values||[],e.arrayValue.values||[],fn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(dm(o)!==dm(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!fn(o[u],l[u])))return!1;return!0}(t,e);default:return J(52216,{left:t})}}function go(t,e){return(t.values||[]).find(n=>fn(n,e))!==void 0}function Us(t,e){if(t===e)return 0;const n=ur(t),r=ur(e);if(n!==r)return ue(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ue(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Le(i.integerValue||i.doubleValue),u=Le(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return mm(t.timestampValue,e.timestampValue);case 4:return mm(po(t),po(e));case 5:return eh(t.stringValue,e.stringValue);case 6:return function(i,o){const l=lr(i),u=lr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=ue(l[h],u[h]);if(d!==0)return d}return ue(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=ue(Le(i.latitude),Le(o.latitude));return l!==0?l:ue(Le(i.longitude),Le(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return gm(t.arrayValue,e.arrayValue);case 10:return function(i,o){var p,S,P,b;const l=i.fields||{},u=o.fields||{},h=(p=l[dl])==null?void 0:p.arrayValue,d=(S=u[dl])==null?void 0:S.arrayValue,m=ue(((P=h==null?void 0:h.values)==null?void 0:P.length)||0,((b=d==null?void 0:d.values)==null?void 0:b.length)||0);return m!==0?m:gm(h,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===da.mapValue&&o===da.mapValue)return 0;if(i===da.mapValue)return 1;if(o===da.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),h=o.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let m=0;m<u.length&&m<d.length;++m){const p=eh(u[m],d[m]);if(p!==0)return p;const S=Us(l[u[m]],h[d[m]]);if(S!==0)return S}return ue(u.length,d.length)}(t.mapValue,e.mapValue);default:throw J(23264,{he:n})}}function mm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ue(t,e);const n=ar(t),r=ar(e),s=ue(n.seconds,r.seconds);return s!==0?s:ue(n.nanos,r.nanos)}function gm(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Us(n[s],r[s]);if(i)return i}return ue(n.length,r.length)}function zs(t){return th(t)}function th(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ar(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return lr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=th(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${th(n.fields[o])}`;return s+"}"}(t.mapValue):J(61005,{value:t})}function Pa(t){switch(ur(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zl(t);return e?16+Pa(e):16;case 5:return 2*t.stringValue.length;case 6:return lr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Pa(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return mr(r.fields,(i,o)=>{s+=i.length+Pa(o)}),s}(t.mapValue);default:throw J(13486,{value:t})}}function nh(t){return!!t&&"integerValue"in t}function Tf(t){return!!t&&"arrayValue"in t}function ym(t){return!!t&&"nullValue"in t}function vm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Na(t){return!!t&&"mapValue"in t}function ES(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Jv])==null?void 0:r.stringValue)===Zv}function Bi(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return mr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Bi(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bi(t.arrayValue.values[n]);return e}return{...t}}function TS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===wS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.value=e}static empty(){return new St({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Na(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bi(n)}setAll(e){let n=nt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Bi(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Na(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return fn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Na(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){mr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new St(Bi(this.value))}}function e_(t){const e=[];return mr(t.fields,(n,r)=>{const s=new nt([n]);if(Na(r)){const i=e_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Dt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new ft(e,0,ne.min(),ne.min(),ne.min(),St.empty(),0)}static newFoundDocument(e,n,r,s){return new ft(e,1,n,ne.min(),r,s,0)}static newNoDocument(e,n){return new ft(e,2,n,ne.min(),ne.min(),St.empty(),0)}static newUnknownDocument(e,n){return new ft(e,3,n,ne.min(),ne.min(),St.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=St.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=St.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,n){this.position=e,this.inclusive=n}}function _m(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=Us(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function wm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!fn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,n="asc"){this.field=e,this.dir=n}}function SS(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{}class qe extends t_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new xS(e,n,r):n==="array-contains"?new kS(e,r):n==="in"?new RS(e,r):n==="not-in"?new PS(e,r):n==="array-contains-any"?new NS(e,r):new qe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new AS(e,r):new CS(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Us(n,this.value)):n!==null&&ur(this.value)===ur(n)&&this.matchesComparison(Us(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class dn extends t_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new dn(e,n)}matches(e){return n_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function n_(t){return t.op==="and"}function r_(t){return IS(t)&&n_(t)}function IS(t){for(const e of t.filters)if(e instanceof dn)return!1;return!0}function rh(t){if(t instanceof qe)return t.field.canonicalString()+t.op.toString()+zs(t.value);if(r_(t))return t.filters.map(e=>rh(e)).join(",");{const e=t.filters.map(n=>rh(n)).join(",");return`${t.op}(${e})`}}function s_(t,e){return t instanceof qe?function(r,s){return s instanceof qe&&r.op===s.op&&r.field.isEqual(s.field)&&fn(r.value,s.value)}(t,e):t instanceof dn?function(r,s){return s instanceof dn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&s_(o,s.filters[l]),!0):!1}(t,e):void J(19439)}function i_(t){return t instanceof qe?function(n){return`${n.field.canonicalString()} ${n.op} ${zs(n.value)}`}(t):t instanceof dn?function(n){return n.op.toString()+" {"+n.getFilters().map(i_).join(" ,")+"}"}(t):"Filter"}class xS extends qe{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class AS extends qe{constructor(e,n){super(e,"in",n),this.keys=o_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class CS extends qe{constructor(e,n){super(e,"not-in",n),this.keys=o_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function o_(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class kS extends qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Tf(n)&&go(n.arrayValue,this.value)}}class RS extends qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&go(this.value.arrayValue,n)}}class PS extends qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(go(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!go(this.value.arrayValue,n)}}class NS extends qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Tf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>go(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function Em(t,e=null,n=[],r=[],s=null,i=null,o=null){return new DS(t,e,n,r,s,i,o)}function Sf(t){const e=re(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>rh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ul(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>zs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>zs(r)).join(",")),e.Te=n}return e.Te}function If(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!SS(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!s_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!wm(t.startAt,e.startAt)&&wm(t.endAt,e.endAt)}function sh(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function VS(t,e,n,r,s,i,o,l){return new Bl(t,e,n,r,s,i,o,l)}function xf(t){return new Bl(t)}function Tm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function bS(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function MS(t){return t.collectionGroup!==null}function $i(t){const e=re(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ge(nt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new ml(i,r))}),n.has(nt.keyField().canonicalString())||e.Ie.push(new ml(nt.keyField(),r))}return e.Ie}function un(t){const e=re(t);return e.Ee||(e.Ee=OS(e,$i(t))),e.Ee}function OS(t,e){if(t.limitType==="F")return Em(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ml(s.field,i)});const n=t.endAt?new pl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new pl(t.startAt.position,t.startAt.inclusive):null;return Em(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ih(t,e,n){return new Bl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $l(t,e){return If(un(t),un(e))&&t.limitType===e.limitType}function a_(t){return`${Sf(un(t))}|lt:${t.limitType}`}function os(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>i_(s)).join(", ")}]`),Ul(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>zs(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>zs(s)).join(",")),`Target(${r})`}(un(t))}; limitType=${t.limitType})`}function Wl(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Y.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of $i(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const h=_m(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,$i(r),s)||r.endAt&&!function(o,l,u){const h=_m(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,$i(r),s))}(t,e)}function LS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function l_(t){return(e,n)=>{let r=!1;for(const s of $i(t)){const i=FS(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function FS(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),h=l.data.field(i);return u!==null&&h!==null?Us(u,h):J(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){mr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return qv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=new Ve(Y.comparator);function Cn(){return jS}const u_=new Ve(Y.comparator);function Ri(...t){let e=u_;for(const n of t)e=e.insert(n.key,n);return e}function c_(t){let e=u_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Mr(){return Wi()}function h_(){return Wi()}function Wi(){return new Yr(t=>t.toString(),(t,e)=>t.isEqual(e))}const US=new Ve(Y.comparator),zS=new Ge(Y.comparator);function ce(...t){let e=zS;for(const n of t)e=e.add(n);return e}const BS=new Ge(ue);function $S(){return BS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hl(e)?"-0":e}}function f_(t){return{integerValue:""+t}}function WS(t,e){return pS(e)?f_(e):Af(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(){this._=void 0}}function HS(t,e,n){return t instanceof gl?function(s,i){const o={fields:{[Qv]:{stringValue:Gv},[Xv]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ef(i)&&(i=zl(i)),i&&(o.fields[Yv]=i),{mapValue:o}}(n,e):t instanceof yo?p_(t,e):t instanceof vo?m_(t,e):function(s,i){const o=d_(s,i),l=Sm(o)+Sm(s.Ae);return nh(o)&&nh(s.Ae)?f_(l):Af(s.serializer,l)}(t,e)}function qS(t,e,n){return t instanceof yo?p_(t,e):t instanceof vo?m_(t,e):n}function d_(t,e){return t instanceof yl?function(r){return nh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class gl extends Hl{}class yo extends Hl{constructor(e){super(),this.elements=e}}function p_(t,e){const n=g_(e);for(const r of t.elements)n.some(s=>fn(s,r))||n.push(r);return{arrayValue:{values:n}}}class vo extends Hl{constructor(e){super(),this.elements=e}}function m_(t,e){let n=g_(e);for(const r of t.elements)n=n.filter(s=>!fn(s,r));return{arrayValue:{values:n}}}class yl extends Hl{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Sm(t){return Le(t.integerValue||t.doubleValue)}function g_(t){return Tf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function KS(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof yo&&s instanceof yo||r instanceof vo&&s instanceof vo?js(r.elements,s.elements,fn):r instanceof yl&&s instanceof yl?fn(r.Ae,s.Ae):r instanceof gl&&s instanceof gl}(t.transform,e.transform)}class GS{constructor(e,n){this.version=e,this.transformResults=n}}class Xt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xt}static exists(e){return new Xt(void 0,e)}static updateTime(e){return new Xt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Da(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ql{}function y_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Cf(t.key,Xt.none()):new Co(t.key,t.data,Xt.none());{const n=t.data,r=St.empty();let s=new Ge(nt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new gr(t.key,r,new Dt(s.toArray()),Xt.none())}}function QS(t,e,n){t instanceof Co?function(s,i,o){const l=s.value.clone(),u=xm(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof gr?function(s,i,o){if(!Da(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=xm(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(v_(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Hi(t,e,n,r){return t instanceof Co?function(i,o,l,u){if(!Da(i.precondition,o))return l;const h=i.value.clone(),d=Am(i.fieldTransforms,u,o);return h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof gr?function(i,o,l,u){if(!Da(i.precondition,o))return l;const h=Am(i.fieldTransforms,u,o),d=o.data;return d.setAll(v_(i)),d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return Da(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function YS(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=d_(r.transform,s||null);i!=null&&(n===null&&(n=St.empty()),n.set(r.field,i))}return n||null}function Im(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&js(r,s,(i,o)=>KS(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Co extends ql{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class gr extends ql{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function v_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function xm(t,e,n){const r=new Map;pe(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,qS(o,l,n[s]))}return r}function Am(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,HS(i,o,e))}return r}class Cf extends ql{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XS extends ql{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&QS(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Hi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Hi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=h_();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=y_(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&js(this.mutations,e.mutations,(n,r)=>Im(n,r))&&js(this.baseMutations,e.baseMutations,(n,r)=>Im(n,r))}}class kf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){pe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return US}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new kf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue,he;function tI(t){switch(t){case F.OK:return J(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return J(15467,{code:t})}}function __(t){if(t===void 0)return An("GRPC error has no .code"),F.UNKNOWN;switch(t){case Ue.OK:return F.OK;case Ue.CANCELLED:return F.CANCELLED;case Ue.UNKNOWN:return F.UNKNOWN;case Ue.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Ue.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Ue.INTERNAL:return F.INTERNAL;case Ue.UNAVAILABLE:return F.UNAVAILABLE;case Ue.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Ue.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Ue.NOT_FOUND:return F.NOT_FOUND;case Ue.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Ue.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Ue.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Ue.ABORTED:return F.ABORTED;case Ue.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Ue.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Ue.DATA_LOSS:return F.DATA_LOSS;default:return J(39323,{code:t})}}(he=Ue||(Ue={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=new tr([4294967295,4294967295],0);function Cm(t){const e=nI().encode(t),n=new Mv;return n.update(e),new Uint8Array(n.digest())}function km(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new tr([n,r],0),new tr([s,i],0)]}class Rf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Pi(`Invalid padding: ${n}`);if(r<0)throw new Pi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Pi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Pi(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=tr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(tr.fromNumber(r)));return s.compare(rI)===1&&(s=new tr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Cm(e),[r,s]=km(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Rf(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=Cm(e),[r,s]=km(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Pi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ko.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Kl(ne.min(),s,new Ve(ue),Cn(),ce())}}class ko{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ko(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class w_{constructor(e,n){this.targetId=e,this.Ce=n}}class E_{constructor(e,n,r=it.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Rm{constructor(){this.ve=0,this.Fe=Pm(),this.Me=it.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ce(),n=ce(),r=ce();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:J(38017,{changeType:i})}}),new ko(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Pm()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,pe(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class sI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Cn(),this.He=pa(),this.Je=pa(),this.Ze=new Ve(ue)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:J(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(sh(i))if(r===0){const o=new Y(i.path);this.et(n,o,ft.newNoDocument(o,ne.min()))}else pe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=lr(r).toUint8Array()}catch(u){if(u instanceof Kv)return qr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Rf(o,s,i)}catch(u){return qr(u instanceof Pi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&sh(l.target)){const u=new Y(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,ft.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.Ke())}});let r=ce();this.Je.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Kl(e,n,this.Ze,this.je,r);return this.je=Cn(),this.He=pa(),this.Je=pa(),this.Ze=new Ve(ue),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Rm,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Ge(ue),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Ge(ue),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Rm),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function pa(){return new Ve(Y.comparator)}function Pm(){return new Ve(Y.comparator)}const iI={asc:"ASCENDING",desc:"DESCENDING"},oI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aI={and:"AND",or:"OR"};class lI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function oh(t,e){return t.useProto3Json||Ul(e)?e:{value:e}}function vl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function T_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function uI(t,e){return vl(t,e.toTimestamp())}function cn(t){return pe(!!t,49232),ne.fromTimestamp(function(n){const r=ar(n);return new xe(r.seconds,r.nanos)}(t))}function Pf(t,e){return ah(t,e).canonicalString()}function ah(t,e){const n=function(s){return new Ie(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function S_(t){const e=Ie.fromString(t);return pe(k_(e),10190,{key:e.toString()}),e}function lh(t,e){return Pf(t.databaseId,e.path)}function Yu(t,e){const n=S_(e);if(n.get(1)!==t.databaseId.projectId)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(x_(n))}function I_(t,e){return Pf(t.databaseId,e)}function cI(t){const e=S_(t);return e.length===4?Ie.emptyPath():x_(e)}function uh(t){return new Ie(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function x_(t){return pe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Nm(t,e,n){return{name:lh(t,e),fields:n.value.mapValue.fields}}function hI(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:J(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,d){return h.useProto3Json?(pe(d===void 0||typeof d=="string",58123),it.fromBase64String(d||"")):(pe(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),it.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const d=h.code===void 0?F.UNKNOWN:__(h.code);return new K(d,h.message||"")}(o);n=new E_(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Yu(t,r.document.name),i=cn(r.document.updateTime),o=r.document.createTime?cn(r.document.createTime):ne.min(),l=new St({mapValue:{fields:r.document.fields}}),u=ft.newFoundDocument(s,i,o,l),h=r.targetIds||[],d=r.removedTargetIds||[];n=new Va(h,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Yu(t,r.document),i=r.readTime?cn(r.readTime):ne.min(),o=ft.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Va([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Yu(t,r.document),i=r.removedTargetIds||[];n=new Va([],i,s,null)}else{if(!("filter"in e))return J(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new eI(s,i),l=r.targetId;n=new w_(l,o)}}return n}function fI(t,e){let n;if(e instanceof Co)n={update:Nm(t,e.key,e.value)};else if(e instanceof Cf)n={delete:lh(t,e.key)};else if(e instanceof gr)n={update:Nm(t,e.key,e.data),updateMask:EI(e.fieldMask)};else{if(!(e instanceof XS))return J(16599,{dt:e.type});n={verify:lh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof gl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof yo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof vo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof yl)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw J(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:uI(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:J(27497)}(t,e.precondition)),n}function dI(t,e){return t&&t.length>0?(pe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?cn(s.updateTime):cn(i);return o.isEqual(ne.min())&&(o=cn(i)),new GS(o,s.transformResults||[])}(n,e))):[]}function pI(t,e){return{documents:[I_(t,e.path)]}}function mI(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=I_(t,s);const i=function(h){if(h.length!==0)return C_(dn.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(d=>function(p){return{field:as(p.field),direction:vI(p.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=oh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:s}}function gI(t){let e=cI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){pe(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(m){const p=A_(m);return p instanceof dn&&r_(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(p=>function(P){return new ml(ls(P.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(m){let p;return p=typeof m=="object"?m.value:m,Ul(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(m){const p=!!m.before,S=m.values||[];return new pl(S,p)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const p=!m.before,S=m.values||[];return new pl(S,p)}(n.endAt)),VS(e,s,o,i,l,"F",u,h)}function yI(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function A_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ls(n.unaryFilter.field);return qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ls(n.unaryFilter.field);return qe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ls(n.unaryFilter.field);return qe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ls(n.unaryFilter.field);return qe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return J(61313);default:return J(60726)}}(t):t.fieldFilter!==void 0?function(n){return qe.create(ls(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return J(58110);default:return J(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return dn.create(n.compositeFilter.filters.map(r=>A_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return J(1026)}}(n.compositeFilter.op))}(t):J(30097,{filter:t})}function vI(t){return iI[t]}function _I(t){return oI[t]}function wI(t){return aI[t]}function as(t){return{fieldPath:t.canonicalString()}}function ls(t){return nt.fromServerFormat(t.fieldPath)}function C_(t){return t instanceof qe?function(n){if(n.op==="=="){if(vm(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NAN"}};if(ym(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(vm(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NOT_NAN"}};if(ym(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:as(n.field),op:_I(n.op),value:n.value}}}(t):t instanceof dn?function(n){const r=n.getFilters().map(s=>C_(s));return r.length===1?r[0]:{compositeFilter:{op:wI(n.op),filters:r}}}(t):J(54877,{filter:t})}function EI(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function k_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function R_(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,n,r,s,i=ne.min(),o=ne.min(),l=it.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Wn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Wn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e){this.yt=e}}function SI(t){const e=gI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ih(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this.Sn=new xI}addToCollectionParentIndex(e,n){return this.Sn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(or.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(or.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class xI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ge(Ie.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ge(Ie.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},P_=41943040;class Et{static withCacheSize(e){return new Et(e,Et.DEFAULT_COLLECTION_PERCENTILE,Et.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Et.DEFAULT_COLLECTION_PERCENTILE=10,Et.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Et.DEFAULT=new Et(P_,Et.DEFAULT_COLLECTION_PERCENTILE,Et.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Et.DISABLED=new Et(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Bs(0)}static ar(){return new Bs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="LruGarbageCollector",AI=1048576;function bm([t,e],[n,r]){const s=ue(t,n);return s===0?ue(e,r):s}class CI{constructor(e){this.Pr=e,this.buffer=new Ge(bm),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();bm(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class kI{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){H(Vm,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Xs(n)?H(Vm,"Ignoring IndexedDB error during garbage collection: ",n):await Ys(n)}await this.Ar(3e5)})}}class RI{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(jl.ce);const r=new CI(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(Dm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Dm):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,o,l,u,h;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(h=Date.now(),is()<=fe.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function PI(t,e){return new RI(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(){this.changes=new Yr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Hi(r.mutation,s,Dt.empty(),xe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const s=Mr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ri();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Mr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Cn();const o=Wi(),l=function(){return Wi()}();return n.forEach((u,h)=>{const d=r.get(h.key);s.has(h.key)&&(d===void 0||d.mutation instanceof gr)?i=i.insert(h.key,h):d!==void 0?(o.set(h.key,d.mutation.getFieldMask()),Hi(d.mutation,h,d.mutation.getFieldMask(),xe.now())):o.set(h.key,Dt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,d)=>o.set(h,d)),n.forEach((h,d)=>l.set(h,new DI(d,o.get(h)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Wi();let s=new Ve((o,l)=>o-l),i=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=r.get(u)||Dt.empty();d=l.applyToLocalView(h,d),r.set(u,d);const m=(s.get(l.batchId)||ce()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,m=h_();d.forEach(p=>{if(!i.has(p)){const S=y_(n.get(p),r.get(p));S!==null&&m.set(p,S),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return bS(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):MS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(Mr());let l=fo,u=i;return o.next(h=>L.forEach(h,(d,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(d)?L.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{u=u.insert(d,p)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,ce())).next(d=>({batchId:l,changes:c_(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let s=Ri();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ri();return this.indexManager.getCollectionParents(e,i).next(l=>L.forEach(l,u=>{const h=function(m,p){return new Bl(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(d=>{d.forEach((m,p)=>{o=o.insert(m,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,h)=>{const d=h.getKey();o.get(d)===null&&(o=o.insert(d,ft.newInvalidDocument(d)))});let l=Ri();return o.forEach((u,h)=>{const d=i.get(u);d!==void 0&&Hi(d.mutation,h,Dt.empty(),xe.now()),Wl(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return L.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:cn(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:SI(s.bundledQuery),readTime:cn(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(){this.overlays=new Ve(Y.comparator),this.Lr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Mr();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.bt(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Lr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=Mr(),i=n.length+1,o=new Y(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ve((h,d)=>h-d);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let d=i.get(h.largestBatchId);d===null&&(d=Mr(),i=i.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=Mr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=s)););return L.resolve(l)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ZS(n,r));let i=this.Lr.get(n);i===void 0&&(i=ce(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(){this.sessionToken=it.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(){this.kr=new Ge(Xe.Kr),this.qr=new Ge(Xe.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Xe(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Xe(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new Y(new Ie([])),r=new Xe(n,e),s=new Xe(n,e+1),i=[];return this.qr.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Y(new Ie([])),r=new Xe(n,e),s=new Xe(n,e+1);let i=ce();return this.qr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Xe(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Xe{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Y.comparator(e.key,n.key)||ue(e.Hr,n.Hr)}static Ur(e,n){return ue(e.Hr,n.Hr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Ge(Xe.Kr)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new JS(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Jr=this.Jr.add(new Xe(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?wf:this.Yn-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xe(n,0),s=new Xe(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],o=>{const l=this.Zr(o.Hr);i.push(l)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ge(ue);return n.forEach(s=>{const i=new Xe(s,0),o=new Xe(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,o],l=>{r=r.add(l.Hr)})}),L.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Y.isDocumentKey(i)||(i=i.child(""));const o=new Xe(new Y(i),0);let l=new Ge(ue);return this.Jr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.Hr)),!0)},o),L.resolve(this.Yr(l))}Yr(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){pe(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return L.forEach(n.mutations,s=>{const i=new Xe(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new Xe(n,0),s=this.Jr.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.ti=e,this.docs=function(){return new Ve(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():ft.newInvalidDocument(n))}getEntries(e,n){let r=Cn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ft.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Cn();const o=n.path,l=new Y(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||cS(uS(d),r)<=0||(s.has(d.key)||Wl(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){J(9500)}ni(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new jI(this)}getSize(e){return L.resolve(this.size)}}class jI extends NI{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this.persistence=e,this.ri=new Yr(n=>Sf(n),If),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.ii=0,this.si=new Nf,this.targetCount=0,this.oi=Bs._r()}forEachTarget(e,n){return this.ri.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),L.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Bs(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.lr(n),L.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ri.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e,n){this._i={},this.overlays={},this.ai=new jl(0),this.ui=!1,this.ui=!0,this.ci=new OI,this.referenceDelegate=e(this),this.li=new UI(this),this.indexManager=new II,this.remoteDocumentCache=function(s){return new FI(s)}(r=>this.referenceDelegate.hi(r)),this.serializer=new TI(n),this.Pi=new bI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new MI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new LI(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new zI(this.ai.next());return this.referenceDelegate.Ti(),r(s).next(i=>this.referenceDelegate.Ii(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return L.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class zI extends fS{constructor(e){super(),this.currentSequenceNumber=e}}class Df{constructor(e){this.persistence=e,this.Ri=new Nf,this.Ai=null}static Vi(e){return new Df(e)}get di(){if(this.Ai)return this.Ai;throw J(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.di,r=>{const s=Y.fromPath(r);return this.mi(e,s).next(i=>{i||n.removeEntry(s,ne.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class _l{constructor(e,n){this.persistence=e,this.fi=new Yr(r=>mS(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=PI(this,n)}static Vi(e,n){return new _l(e,n)}Ti(){}Ii(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return L.forEach(this.fi,(r,s)=>this.wr(e,r,s).next(i=>i?L.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,o=>this.wr(e,o,n).next(l=>{l||(r++,i.removeEntry(o,ne.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),L.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Pa(e.data.value)),n}wr(e,n,r){return L.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=ce(),s=ce();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Vf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return D1()?8:dS(P1())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ps(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new BI;return this.ys(e,n,o).next(l=>{if(i.result=l,this.As)return this.ws(e,n,o,l.size)})}).next(()=>i.result)}ws(e,n,r,s){return r.documentReadCount<this.Vs?(is()<=fe.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",os(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),L.resolve()):(is()<=fe.DEBUG&&H("QueryEngine","Query:",os(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(is()<=fe.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",os(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,un(n))):L.resolve())}gs(e,n){if(Tm(n))return L.resolve(null);let r=un(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ih(n,null,"F"),r=un(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ce(...i);return this.fs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.bs(n,l);return this.Ss(n,h,o,u.readTime)?this.gs(e,ih(n,null,"F")):this.Ds(e,h,n,u)}))})))}ps(e,n,r,s){return Tm(n)||s.isEqual(ne.min())?L.resolve(null):this.fs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ss(n,o,r,s)?L.resolve(null):(is()<=fe.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),os(n)),this.Ds(e,o,n,lS(s,fo)).next(l=>l))})}bs(e,n){let r=new Ge(l_(e));return n.forEach((s,i)=>{Wl(e,i)&&(r=r.add(i))}),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return is()<=fe.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",os(n)),this.fs.getDocumentsMatchingQuery(e,n,or.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf="LocalStore",WI=3e8;class HI{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new Ve(ue),this.Fs=new Yr(i=>Sf(i),If),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VI(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function qI(t,e,n,r){return new HI(t,e,n,r)}async function D_(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=ce();for(const h of s){o.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of i){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Ns:h,removedBatchIds:o,addedBatchIds:l}))})})}function KI(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const m=h.batch,p=m.keys();let S=L.resolve();return p.forEach(P=>{S=S.next(()=>d.getEntry(u,P)).next(b=>{const M=h.docVersions.get(P);pe(M!==null,48541),b.version.compareTo(M)<0&&(m.applyToRemoteDocument(b,h),b.isValidDocument()&&(b.setReadTime(h.commitVersion),d.addEntry(b)))})}),S.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ce();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function V_(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function GI(t,e){const n=re(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const l=[];e.targetChanges.forEach((d,m)=>{const p=s.get(m);if(!p)return;l.push(n.li.removeMatchingKeys(i,d.removedDocuments,m).next(()=>n.li.addMatchingKeys(i,d.addedDocuments,m)));let S=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?S=S.withResumeToken(it.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):d.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(d.resumeToken,r)),s=s.insert(m,S),function(b,M,T){return b.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=WI?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(p,S,d)&&l.push(n.li.updateTargetData(i,S))});let u=Cn(),h=ce();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(QI(i,o,e.documentUpdates).next(d=>{u=d.Bs,h=d.Ls})),!r.isEqual(ne.min())){const d=n.li.getLastRemoteSnapshotVersion(i).next(m=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(d)}return L.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.vs=s,i))}function QI(t,e,n){let r=ce(),s=ce();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Cn();return n.forEach((l,u)=>{const h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):H(bf,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Bs:o,Ls:s}})}function YI(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=wf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function XI(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.li.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.li.allocateTargetId(r).next(o=>(s=new Wn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function ch(t,e,n){const r=re(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Xs(o))throw o;H(bf,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function Mm(t,e,n){const r=re(t);let s=ne.min(),i=ce();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,d){const m=re(u),p=m.Fs.get(d);return p!==void 0?L.resolve(m.vs.get(p)):m.li.getTargetData(h,d)}(r,o,un(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:ne.min(),n?i:ce())).next(l=>(JI(r,LS(e),l),{documents:l,ks:i})))}function JI(t,e,n){let r=t.Ms.get(e)||ne.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ms.set(e,r)}class Om{constructor(){this.activeTargetIds=$S()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZI{constructor(){this.vo=new Om,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Om,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="ConnectivityMonitor";class Fm{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){H(Lm,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){H(Lm,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ma=null;function hh(){return ma===null?ma=function(){return 268435456+Math.round(2147483648*Math.random())}():ma++,"0x"+ma.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu="RestConnection",tx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class nx{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===fl?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=hh(),l=this.Qo(e,n.toUriEncodedString());H(Xu,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,s,i);const{host:h}=new URL(l),d=mf(h);return this.zo(e,l,u,r,d).then(m=>(H(Xu,`Received RPC '${e}' ${o}: `,m),m),m=>{throw qr(Xu,`RPC '${e}' ${o} failed with error: `,m,"url: ",l,"request:",r),m})}jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Qo(e,n){const r=tx[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut="WebChannelConnection",Si=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(s){setTimeout(()=>{throw s},0)}})};class Rs extends nx{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Rs.c_){const e=jv();Si(e,Fv.STAT_EVENT,n=>{n.stat===Zc.PROXY?H(ut,"STAT_EVENT: detected buffering proxy"):n.stat===Zc.NOPROXY&&H(ut,"STAT_EVENT: detected no buffering proxy")}),Rs.c_=!0}}zo(e,n,r,s,i){const o=hh();return new Promise((l,u)=>{const h=new Ov;h.setWithCredentials(!0),h.listenOnce(Lv.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Ra.NO_ERROR:const m=h.getResponseJson();H(ut,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case Ra.TIMEOUT:H(ut,`RPC '${e}' ${o} timed out`),u(new K(F.DEADLINE_EXCEEDED,"Request time out"));break;case Ra.HTTP_ERROR:const p=h.getStatus();if(H(ut,`RPC '${e}' ${o} failed with status:`,p,"response text:",h.getResponseText()),p>0){let S=h.getResponseJson();Array.isArray(S)&&(S=S[0]);const P=S==null?void 0:S.error;if(P&&P.status&&P.message){const b=function(T){const v=T.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(v)>=0?v:F.UNKNOWN}(P.status);u(new K(b,P.message))}else u(new K(F.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new K(F.UNAVAILABLE,"Connection failed."));break;default:J(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{H(ut,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);H(ut,`RPC '${e}' ${o} sending request:`,s),h.send(n,"POST",d,r,15)})}T_(e,n,r){const s=hh(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");H(ut,`Creating RPC '${e}' stream ${s}: ${h}`,l);const d=o.createWebChannel(h,l);this.I_(d);let m=!1,p=!1;const S=new rx({Ho:P=>{p?H(ut,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(m||(H(ut,`Opening RPC '${e}' stream ${s} transport.`),d.open(),m=!0),H(ut,`RPC '${e}' stream ${s} sending:`,P),d.send(P))},Jo:()=>d.close()});return Si(d,ki.EventType.OPEN,()=>{p||(H(ut,`RPC '${e}' stream ${s} transport opened.`),S.i_())}),Si(d,ki.EventType.CLOSE,()=>{p||(p=!0,H(ut,`RPC '${e}' stream ${s} transport closed`),S.o_(),this.E_(d))}),Si(d,ki.EventType.ERROR,P=>{p||(p=!0,qr(ut,`RPC '${e}' stream ${s} transport errored. Name:`,P.name,"Message:",P.message),S.o_(new K(F.UNAVAILABLE,"The operation could not be completed")))}),Si(d,ki.EventType.MESSAGE,P=>{var b;if(!p){const M=P.data[0];pe(!!M,16349);const T=M,v=(T==null?void 0:T.error)||((b=T[0])==null?void 0:b.error);if(v){H(ut,`RPC '${e}' stream ${s} received error:`,v);const k=v.status;let O=function(_){const y=Ue[_];if(y!==void 0)return __(y)}(k),U=v.message;k==="NOT_FOUND"&&U.includes("database")&&U.includes("does not exist")&&U.includes(this.databaseId.database)&&qr(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),O===void 0&&(O=F.INTERNAL,U="Unknown error status: "+k+" with message "+v.message),p=!0,S.o_(new K(O,U)),d.close()}else H(ut,`RPC '${e}' stream ${s} received:`,M),S.__(M)}}),Rs.u_(),setTimeout(()=>{S.s_()},0),S}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Uv()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(t){return new Rs(t)}function Ju(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(t){return new lI(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rs.c_=!1;class b_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="PersistentStream";class M_{constructor(e,n,r,s,i,o,l,u){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new b_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(An(n.toString()),An("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new K(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(jm,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(H(jm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ix extends M_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=hI(this.serializer,e),r=function(i){if(!("targetChange"in i))return ne.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?cn(o.readTime):ne.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=uh(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=sh(u)?{documents:pI(i,u)}:{query:mI(i,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=T_(i,o.resumeToken);const h=oh(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(ne.min())>0){l.readTime=vl(i,o.snapshotVersion.toTimestamp());const h=oh(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=yI(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=uh(this.serializer),n.removeTarget=e,this.K_(n)}}class ox extends M_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=dI(e.writeResults,e.commitTime),r=cn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=uh(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>fI(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{}class lx extends ax{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,ah(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(F.UNKNOWN,i.toString())})}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.jo(e,ah(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(F.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function ux(t,e,n,r){return new lx(t,e,n,r)}class cx{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(An(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="RemoteStore";class hx{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{Xr(this)&&(H(Kr,"Restarting streams for network reachability change."),await async function(u){const h=re(u);h.Ea.add(4),await Ro(h),h.Va.set("Unknown"),h.Ea.delete(4),await Ql(h)}(this))})}),this.Va=new cx(r,s)}}async function Ql(t){if(Xr(t))for(const e of t.Ra)await e(!0)}async function Ro(t){for(const e of t.Ra)await e(!1)}function O_(t,e){const n=re(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Ff(n)?Lf(n):Js(n).O_()&&Of(n,e))}function Mf(t,e){const n=re(t),r=Js(n);n.Ia.delete(e),r.O_()&&L_(n,e),n.Ia.size===0&&(r.O_()?r.L_():Xr(n)&&n.Va.set("Unknown"))}function Of(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Js(t).Z_(e)}function L_(t,e){t.da.$e(e),Js(t).X_(e)}function Lf(t){t.da=new sI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Js(t).start(),t.Va.ua()}function Ff(t){return Xr(t)&&!Js(t).x_()&&t.Ia.size>0}function Xr(t){return re(t).Ea.size===0}function F_(t){t.da=void 0}async function fx(t){t.Va.set("Online")}async function dx(t){t.Ia.forEach((e,n)=>{Of(t,e)})}async function px(t,e){F_(t),Ff(t)?(t.Va.ha(e),Lf(t)):t.Va.set("Unknown")}async function mx(t,e,n){if(t.Va.set("Online"),e instanceof E_&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.da.removeTarget(l))}(t,e)}catch(r){H(Kr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await wl(t,r)}else if(e instanceof Va?t.da.Xe(e):e instanceof w_?t.da.st(e):t.da.tt(e),!n.isEqual(ne.min()))try{const r=await V_(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.da.Tt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=i.Ia.get(h);d&&i.Ia.set(h,d.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const d=i.Ia.get(u);if(!d)return;i.Ia.set(u,d.withResumeToken(it.EMPTY_BYTE_STRING,d.snapshotVersion)),L_(i,u);const m=new Wn(d.target,u,h,d.sequenceNumber);Of(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){H(Kr,"Failed to raise snapshot:",r),await wl(t,r)}}async function wl(t,e,n){if(!Xs(e))throw e;t.Ea.add(1),await Ro(t),t.Va.set("Offline"),n||(n=()=>V_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(Kr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ql(t)})}function j_(t,e){return e().catch(n=>wl(t,n,e))}async function Yl(t){const e=re(t),n=cr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wf;for(;gx(e);)try{const s=await YI(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,yx(e,s)}catch(s){await wl(e,s)}U_(e)&&z_(e)}function gx(t){return Xr(t)&&t.Ta.length<10}function yx(t,e){t.Ta.push(e);const n=cr(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function U_(t){return Xr(t)&&!cr(t).x_()&&t.Ta.length>0}function z_(t){cr(t).start()}async function vx(t){cr(t).ra()}async function _x(t){const e=cr(t);for(const n of t.Ta)e.ea(n.mutations)}async function wx(t,e,n){const r=t.Ta.shift(),s=kf.from(r,e,n);await j_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Yl(t)}async function Ex(t,e){e&&cr(t).Y_&&await async function(r,s){if(function(o){return tI(o)&&o!==F.ABORTED}(s.code)){const i=r.Ta.shift();cr(r).B_(),await j_(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Yl(r)}}(t,e),U_(t)&&z_(t)}async function Um(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),H(Kr,"RemoteStore received new credentials");const r=Xr(n);n.Ea.add(3),await Ro(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ql(n)}async function Tx(t,e){const n=re(t);e?(n.Ea.delete(2),await Ql(n)):e||(n.Ea.add(2),await Ro(n),n.Va.set("Unknown"))}function Js(t){return t.ma||(t.ma=function(n,r,s){const i=re(n);return i.sa(),new ix(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:fx.bind(null,t),Yo:dx.bind(null,t),t_:px.bind(null,t),J_:mx.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),Ff(t)?Lf(t):t.Va.set("Unknown")):(await t.ma.stop(),F_(t))})),t.ma}function cr(t){return t.fa||(t.fa=function(n,r,s){const i=re(n);return i.sa(),new ox(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:vx.bind(null,t),t_:Ex.bind(null,t),ta:_x.bind(null,t),na:wx.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await Yl(t)):(await t.fa.stop(),t.Ta.length>0&&(H(Kr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new jf(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Uf(t,e){if(An("AsyncQueue",`${e}: ${t}`),Xs(t))return new K(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{static emptySet(e){return new Ps(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=Ri(),this.sortedSet=new Ve(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ps)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ps;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(){this.ga=new Ve(Y.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):J(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class $s{constructor(e,n,r,s,i,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new $s(e,n,Ps.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$l(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class Ix{constructor(){this.queries=Bm(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=re(n),i=s.queries;s.queries=Bm(),i.forEach((o,l)=>{for(const u of l.ba)u.onError(r)})})(this,new K(F.ABORTED,"Firestore shutting down"))}}function Bm(){return new Yr(t=>a_(t),$l)}async function xx(t,e){const n=re(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new Sx,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Uf(o,`Initialization of query '${os(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&zf(n)}async function Ax(t,e){const n=re(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ba.indexOf(e);o>=0&&(i.ba.splice(o,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Cx(t,e){const n=re(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.ba)l.Fa(s)&&(r=!0);o.wa=s}}r&&zf(n)}function kx(t,e,n){const r=re(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function zf(t){t.Ca.forEach(e=>{e.next()})}var fh,$m;($m=fh||(fh={})).Ma="default",$m.Cache="cache";class Rx{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new $s(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=$s.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==fh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e){this.key=e}}class $_{constructor(e){this.key=e}}class Px{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ce(),this.mutatedKeys=ce(),this.eu=l_(e),this.tu=new Ps(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new zm,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,m)=>{const p=s.get(d),S=Wl(this.query,m)?m:null,P=!!p&&this.mutatedKeys.has(p.key),b=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let M=!1;p&&S?p.data.isEqual(S.data)?P!==b&&(r.track({type:3,doc:S}),M=!0):this.su(p,S)||(r.track({type:2,doc:S}),M=!0,(u&&this.eu(S,u)>0||h&&this.eu(S,h)<0)&&(l=!0)):!p&&S?(r.track({type:0,doc:S}),M=!0):p&&!S&&(r.track({type:1,doc:p}),M=!0,(u||h)&&(l=!0)),M&&(S?(o=o.add(S),i=b?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Ss:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,m)=>function(S,P){const b=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J(20277,{Vt:M})}};return b(S)-b(P)}(d.type,m.type)||this.eu(d.doc,m.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],u=this.Ya.size===0&&this.current&&!s?1:0,h=u!==this.Xa;return this.Xa=u,o.length!==0||h?{snapshot:new $s(this.query,e.tu,i,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zm,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ce(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new $_(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new B_(r))}),n}cu(e){this.Za=e.ks,this.Ya=ce();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return $s.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Bf="SyncEngine";class Nx{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Dx{constructor(e){this.key=e,this.hu=!1}}class Vx{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Yr(l=>a_(l),$l),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ve(Y.comparator),this.Au=new Map,this.Vu=new Nf,this.du={},this.mu=new Map,this.fu=Bs.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function bx(t,e,n=!0){const r=Q_(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await W_(r,e,n,!0),s}async function Mx(t,e){const n=Q_(t);await W_(n,e,!0,!1)}async function W_(t,e,n,r){const s=await XI(t.localStore,un(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await Ox(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&O_(t.remoteStore,s),l}async function Ox(t,e,n,r,s){t.pu=(m,p,S)=>async function(b,M,T,v){let k=M.view.ru(T);k.Ss&&(k=await Mm(b.localStore,M.query,!1).then(({documents:_})=>M.view.ru(_,k)));const O=v&&v.targetChanges.get(M.targetId),U=v&&v.targetMismatches.get(M.targetId)!=null,B=M.view.applyChanges(k,b.isPrimaryClient,O,U);return Hm(b,M.targetId,B.au),B.snapshot}(t,m,p,S);const i=await Mm(t.localStore,e,!0),o=new Px(e,i.ks),l=o.ru(i.documents),u=ko.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(l,t.isPrimaryClient,u);Hm(t,n,h.au);const d=new Nx(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function Lx(t,e,n){const r=re(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!$l(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ch(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Mf(r.remoteStore,s.targetId),dh(r,s.targetId)}).catch(Ys)):(dh(r,s.targetId),await ch(r.localStore,s.targetId,!0))}async function Fx(t,e){const n=re(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Mf(n.remoteStore,r.targetId))}async function jx(t,e,n){const r=qx(t);try{const s=await function(o,l){const u=re(o),h=xe.now(),d=l.reduce((S,P)=>S.add(P.key),ce());let m,p;return u.persistence.runTransaction("Locally write mutations","readwrite",S=>{let P=Cn(),b=ce();return u.xs.getEntries(S,d).next(M=>{P=M,P.forEach((T,v)=>{v.isValidDocument()||(b=b.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(S,P)).next(M=>{m=M;const T=[];for(const v of l){const k=YS(v,m.get(v.key).overlayedDocument);k!=null&&T.push(new gr(v.key,k,e_(k.value.mapValue),Xt.exists(!0)))}return u.mutationQueue.addMutationBatch(S,h,T,l)}).next(M=>{p=M;const T=M.applyToLocalDocumentSet(m,b);return u.documentOverlayCache.saveOverlays(S,M.batchId,T)})}).then(()=>({batchId:p.batchId,changes:c_(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let h=o.du[o.currentUser.toKey()];h||(h=new Ve(ue)),h=h.insert(l,u),o.du[o.currentUser.toKey()]=h}(r,s.batchId,n),await Po(r,s.changes),await Yl(r.remoteStore)}catch(s){const i=Uf(s,"Failed to persist write");n.reject(i)}}async function H_(t,e){const n=re(t);try{const r=await GI(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(pe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?pe(o.hu,14607):s.removedDocuments.size>0&&(pe(o.hu,42227),o.hu=!1))}),await Po(n,r,e)}catch(r){await Ys(r)}}function Wm(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=re(o);u.onlineState=l;let h=!1;u.queries.forEach((d,m)=>{for(const p of m.ba)p.va(l)&&(h=!0)}),h&&zf(u)}(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Ux(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ve(Y.comparator);o=o.insert(i,ft.newNoDocument(i,ne.min()));const l=ce().add(i),u=new Kl(ne.min(),new Map,new Ve(ue),o,l);await H_(r,u),r.Ru=r.Ru.remove(i),r.Au.delete(e),$f(r)}else await ch(r.localStore,e,!1).then(()=>dh(r,e,n)).catch(Ys)}async function zx(t,e){const n=re(t),r=e.batch.batchId;try{const s=await KI(n.localStore,e);K_(n,r,null),q_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Po(n,s)}catch(s){await Ys(s)}}async function Bx(t,e,n){const r=re(t);try{const s=await function(o,l){const u=re(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(m=>(pe(m!==null,37113),d=m.keys(),u.mutationQueue.removeMutationBatch(h,m))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(r.localStore,e);K_(r,e,n),q_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Po(r,s)}catch(s){await Ys(s)}}function q_(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function K_(t,e,n){const r=re(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function dh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||G_(t,r)})}function G_(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(Mf(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),$f(t))}function Hm(t,e,n){for(const r of n)r instanceof B_?(t.Vu.addReference(r.key,e),$x(t,r)):r instanceof $_?(H(Bf,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||G_(t,r.key)):J(19791,{wu:r})}function $x(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(H(Bf,"New document in limbo: "+n),t.Eu.add(r),$f(t))}function $f(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Y(Ie.fromString(e)),r=t.fu.next();t.Au.set(r,new Dx(n)),t.Ru=t.Ru.insert(n,r),O_(t.remoteStore,new Wn(un(xf(n.path)),r,"TargetPurposeLimboResolution",jl.ce))}}async function Po(t,e,n){const r=re(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{o.push(r.pu(u,e,n).then(h=>{var d;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(h){s.push(h);const m=Vf.Es(u.targetId,h);i.push(m)}}))}),await Promise.all(o),r.Pu.J_(s),await async function(u,h){const d=re(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>L.forEach(h,p=>L.forEach(p.Ts,S=>d.persistence.referenceDelegate.addReference(m,p.targetId,S)).next(()=>L.forEach(p.Is,S=>d.persistence.referenceDelegate.removeReference(m,p.targetId,S)))))}catch(m){if(!Xs(m))throw m;H(bf,"Failed to update sequence numbers: "+m)}for(const m of h){const p=m.targetId;if(!m.fromCache){const S=d.vs.get(p),P=S.snapshotVersion,b=S.withLastLimboFreeSnapshotVersion(P);d.vs=d.vs.insert(p,b)}}}(r.localStore,i))}async function Wx(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){H(Bf,"User change. New user:",e.toKey());const r=await D_(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(u=>{u.reject(new K(F.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Po(n,r.Ns)}}function Hx(t,e){const n=re(t),r=n.Au.get(e);if(r&&r.hu)return ce().add(r.key);{let s=ce();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function Q_(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=H_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ux.bind(null,e),e.Pu.J_=Cx.bind(null,e.eventManager),e.Pu.yu=kx.bind(null,e.eventManager),e}function qx(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Bx.bind(null,e),e}class El{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return qI(this.persistence,new $I,e.initialUser,this.serializer)}Cu(e){return new N_(Df.Vi,this.serializer)}Du(e){return new ZI}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}El.provider={build:()=>new El};class Kx extends El{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){pe(this.persistence.referenceDelegate instanceof _l,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new kI(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Et.withCacheSize(this.cacheSizeBytes):Et.DEFAULT;return new N_(r=>_l.Vi(r,n),this.serializer)}}class ph{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Wm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Wx.bind(null,this.syncEngine),await Tx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Ix}()}createDatastore(e){const n=Gl(e.databaseInfo.databaseId),r=sx(e.databaseInfo);return ux(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new hx(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Wm(this.syncEngine,n,0),function(){return Fm.v()?new Fm:new ex}())}createSyncEngine(e,n){return function(s,i,o,l,u,h,d){const m=new Vx(s,i,o,l,u,h);return d&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=re(s);H(Kr,"RemoteStore shutting down."),i.Ea.add(5),await Ro(i),i.Aa.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}ph.provider={build:()=>new ph};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):An("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr="FirestoreClient";class Qx{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=ct.UNAUTHENTICATED,this.clientId=vf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H(hr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H(hr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Uf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Zu(t,e){t.asyncQueue.verifyOperationInProgress(),H(hr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await D_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function qm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Yx(t);H(hr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Um(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Um(e.remoteStore,s)),t._onlineComponents=e}async function Yx(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(hr,"Using user provided OfflineComponentProvider");try{await Zu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;qr("Error using user provided cache. Falling back to memory cache: "+n),await Zu(t,new El)}}else H(hr,"Using default OfflineComponentProvider"),await Zu(t,new Kx(void 0));return t._offlineComponents}async function Y_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(hr,"Using user provided OnlineComponentProvider"),await qm(t,t._uninitializedComponentsProvider._online)):(H(hr,"Using default OnlineComponentProvider"),await qm(t,new ph))),t._onlineComponents}function Xx(t){return Y_(t).then(e=>e.syncEngine)}async function Km(t){const e=await Y_(t),n=e.eventManager;return n.onListen=bx.bind(null,e.syncEngine),n.onUnlisten=Lx.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Mx.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Fx.bind(null,e.syncEngine),n}function Jx(t,e,n,r){const s=new Gx(r),i=new Rx(e,s,n);return t.asyncQueue.enqueueAndForget(async()=>xx(await Km(t),i)),()=>{s.Nu(),t.asyncQueue.enqueueAndForget(async()=>Ax(await Km(t),i))}}function Zx(t,e){const n=new Fr;return t.asyncQueue.enqueueAndForget(async()=>jx(await Xx(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="ComponentProvider",Gm=new Map;function tA(t,e,n,r,s){return new vS(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,X_(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="firestore.googleapis.com",Qm=!0;class Ym{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new K(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=J_,this.ssl=Qm}else this.host=e.host,this.ssl=e.ssl??Qm;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=P_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AI)throw new K(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=X_(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xl{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ym({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ym(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new XT;switch(r.type){case"firstParty":return new tS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Gm.get(n);r&&(H(eA,"Removing Datastore"),Gm.delete(n),r.terminate())}(this),Promise.resolve()}}function nA(t,e,n,r={}){var h;t=_n(t,Xl);const s=mf(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(x1(`https://${l}`),R1("Firestore",!0)),i.host!==J_&&i.host!==l&&qr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:l,ssl:s,emulatorOptions:r};if(!ll(u,o)&&(t._setSettings(u),r.mockUserToken)){let d,m;if(typeof r.mockUserToken=="string")d=r.mockUserToken,m=ct.MOCK_USER;else{d=A1(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new K(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new ct(p)}t._authCredentials=new JT(new Bv(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Jl(this.firestore,e,this._query)}}class $e{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $e(this.firestore,e,this._key)}toJSON(){return{type:$e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ao(n,$e._jsonSchema))return new $e(e,r||null,new Y(Ie.fromString(n.referencePath)))}}$e._jsonSchemaVersion="firestore/documentReference/1.0",$e._jsonSchema={type:Be("string",$e._jsonSchemaVersion),referencePath:Be("string")};class nr extends Jl{constructor(e,n,r){super(e,n,xf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $e(this.firestore,null,new Y(e))}withConverter(e){return new nr(this.firestore,e,this._path)}}function Xm(t,e,...n){if(t=In(t),$v("collection","path",e),t instanceof Xl){const r=Ie.fromString(e,...n);return um(r),new nr(t,null,r)}{if(!(t instanceof $e||t instanceof nr))throw new K(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return um(r),new nr(t.firestore,null,r)}}function Pr(t,e,...n){if(t=In(t),arguments.length===1&&(e=vf.newId()),$v("doc","path",e),t instanceof Xl){const r=Ie.fromString(e,...n);return lm(r),new $e(t,null,new Y(r))}{if(!(t instanceof $e||t instanceof nr))throw new K(F.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return lm(r),new $e(t.firestore,t instanceof nr?t.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="AsyncQueue";class Zm{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new b_(this,"async_queue_retry"),this._c=()=>{const r=Ju();r&&H(Jm,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Ju();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Ju();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Fr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Xs(e))throw e;H(Jm,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,An("INTERNAL UNHANDLED ERROR: ",eg(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=jf.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&J(47125,{Pc:eg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function eg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ws extends Xl{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Zm,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Zm(e),this._firestoreClient=void 0,await e}}}function rA(t,e){const n=typeof t=="object"?t:jT(),r=typeof t=="string"?t:fl,s=bT(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=S1("firestore");i&&nA(s,...i)}return s}function Z_(t){if(t._terminated)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||sA(t),t._firestoreClient}function sA(t){var r,s,i,o;const e=t._freezeSettings(),n=tA(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Qx(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ut(it.fromBase64String(e))}catch(n){throw new K(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ut(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ut._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ao(e,Ut._jsonSchema))return Ut.fromBase64String(e.bytes)}}Ut._jsonSchemaVersion="firestore/bytes/1.0",Ut._jsonSchema={type:Be("string",Ut._jsonSchemaVersion),bytes:Be("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:hn._jsonSchemaVersion}}static fromJSON(e){if(Ao(e,hn._jsonSchema))return new hn(e.latitude,e.longitude)}}hn._jsonSchemaVersion="firestore/geoPoint/1.0",hn._jsonSchema={type:Be("string",hn._jsonSchemaVersion),latitude:Be("number"),longitude:Be("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Jt._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ao(e,Jt._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Jt(e.vectorValues);throw new K(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Jt._jsonSchemaVersion="firestore/vectorValue/1.0",Jt._jsonSchema={type:Be("string",Jt._jsonSchemaVersion),vectorValues:Be("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=/^__.*__$/;class oA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new gr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Co(e,this.data,n,this.fieldTransforms)}}class e0{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new gr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function t0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J(40011,{dataSource:t})}}class qf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new qf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Tl(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(t0(this.dataSource)&&iA.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class aA{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Gl(e)}createContext(e,n,r,s=!1){return new qf({dataSource:e,methodName:n,targetDoc:r,path:nt.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function n0(t){const e=t._freezeSettings(),n=Gl(t._databaseId);return new aA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function lA(t,e,n,r,s,i={}){const o=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);Kf("Data must be an object, but it was:",o,r);const l=r0(r,o);let u,h;if(i.merge)u=new Dt(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const m of i.mergeFields){const p=_o(e,m,n);if(!o.contains(p))throw new K(F.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);o0(d,p)||d.push(p)}u=new Dt(d),h=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,h=o.fieldTransforms;return new oA(new St(l),u,h)}class Zl extends Hf{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zl}}function uA(t,e,n,r){const s=t.createContext(1,e,n);Kf("Data must be an object, but it was:",s,r);const i=[],o=St.empty();mr(r,(u,h)=>{const d=i0(e,u,n);h=In(h);const m=s.childContextForFieldPath(d);if(h instanceof Zl)i.push(d);else{const p=eu(h,m);p!=null&&(i.push(d),o.set(d,p))}});const l=new Dt(i);return new e0(o,l,s.fieldTransforms)}function cA(t,e,n,r,s,i){const o=t.createContext(1,e,n),l=[_o(e,r,n)],u=[s];if(i.length%2!=0)throw new K(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)l.push(_o(e,i[p])),u.push(i[p+1]);const h=[],d=St.empty();for(let p=l.length-1;p>=0;--p)if(!o0(h,l[p])){const S=l[p];let P=u[p];P=In(P);const b=o.childContextForFieldPath(S);if(P instanceof Zl)h.push(S);else{const M=eu(P,b);M!=null&&(h.push(S),d.set(S,M))}}const m=new Dt(h);return new e0(d,m,o.fieldTransforms)}function eu(t,e){if(s0(t=In(t)))return Kf("Unsupported field value:",e,t),r0(t,e);if(t instanceof Hf)return function(r,s){if(!t0(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=eu(l,s.childContextForArray(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=In(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return WS(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=xe.fromDate(r);return{timestampValue:vl(s.serializer,i)}}if(r instanceof xe){const i=new xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vl(s.serializer,i)}}if(r instanceof hn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ut)return{bytesValue:T_(s.serializer,r._byteString)};if(r instanceof $e){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Pf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Jt)return function(o,l){const u=o instanceof Jt?o.toArray():o;return{mapValue:{fields:{[Jv]:{stringValue:Zv},[dl]:{arrayValue:{values:u.map(d=>{if(typeof d!="number")throw l.createError("VectorValues must only contain numeric values.");return Af(l.serializer,d)})}}}}}}(r,s);if(R_(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${_f(r)}`)}(t,e)}function r0(t,e){const n={};return qv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mr(t,(r,s)=>{const i=eu(s,e.childContextForField(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function s0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof xe||t instanceof hn||t instanceof Ut||t instanceof $e||t instanceof Hf||t instanceof Jt||R_(t))}function Kf(t,e,n){if(!s0(n)||!Wv(n)){const r=_f(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function _o(t,e,n){if((e=In(e))instanceof Wf)return e._internalPath;if(typeof e=="string")return i0(t,e);throw Tl("Field path arguments must be of type string or ",t,!1,void 0,n)}const hA=new RegExp("[~\\*/\\[\\]]");function i0(t,e,n){if(e.search(hA)>=0)throw Tl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Wf(...e.split("."))._internalPath}catch{throw Tl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Tl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new K(F.INVALID_ARGUMENT,l+t+u)}function o0(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{convertValue(e,n="none"){switch(ur(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return mr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[dl].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Le(o.doubleValue));return new Jt(n)}convertGeoPoint(e){return new hn(Le(e.latitude),Le(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=zl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(po(e));default:return null}}convertTimestamp(e){const n=ar(e);return new xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ie.fromString(e);pe(k_(r),9688,{name:e});const s=new mo(r.get(1),r.get(3)),i=new Y(r.popFirst(5));return s.isEqual(n)||An(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0 extends fA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ut(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,n)}}const tg="@firebase/firestore",ng="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new $e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(_o("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class dA extends l0{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function mA(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Ni{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jr extends l0{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ba(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(_o("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new K(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=jr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}jr._jsonSchemaVersion="firestore/documentSnapshot/1.0",jr._jsonSchema={type:Be("string",jr._jsonSchemaVersion),bundleSource:Be("string","DocumentSnapshot"),bundleName:Be("string"),bundle:Be("string")};class ba extends jr{data(e={}){return super.data(e)}}class Ns{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ni(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ba(this._firestore,this._userDataWriter,r.key,r,new Ni(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new ba(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ni(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new ba(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ni(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,d=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:gA(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new K(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ns._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=vf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function gA(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ns._jsonSchemaVersion="firestore/querySnapshot/1.0",Ns._jsonSchema={type:Be("string",Ns._jsonSchemaVersion),bundleSource:Be("string","QuerySnapshot"),bundleName:Be("string"),bundle:Be("string")};function qi(t,e,n){t=_n(t,$e);const r=_n(t.firestore,Ws),s=mA(t.converter,e),i=n0(r);return Gf(r,[lA(i,"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Xt.none())])}function yA(t,e,n,...r){t=_n(t,$e);const s=_n(t.firestore,Ws),i=n0(s);let o;return o=typeof(e=In(e))=="string"||e instanceof Wf?cA(i,"updateDoc",t._key,e,n,r):uA(i,"updateDoc",t._key,e),Gf(s,[o.toMutation(t._key,Xt.exists(!0))])}function vA(t){return Gf(_n(t.firestore,Ws),[new Cf(t._key,Xt.none())])}function u0(t,...e){var h,d,m;t=In(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||rg(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(rg(e[r])){const p=e[r];e[r]=(h=p.next)==null?void 0:h.bind(p),e[r+1]=(d=p.error)==null?void 0:d.bind(p),e[r+2]=(m=p.complete)==null?void 0:m.bind(p)}let i,o,l;if(t instanceof $e)o=_n(t.firestore,Ws),l=xf(t._key.path),i={next:p=>{e[r]&&e[r](_A(o,t,p))},error:e[r+1],complete:e[r+2]};else{const p=_n(t,Jl);o=_n(p.firestore,Ws),l=p._query;const S=new a0(o);i={next:P=>{e[r]&&e[r](new Ns(o,S,p,P))},error:e[r+1],complete:e[r+2]},pA(t._query)}const u=Z_(o);return Jx(u,l,s,i)}function Gf(t,e){const n=Z_(t);return Zx(n,e)}function _A(t,e,n){const r=n.docs.get(e._key),s=new a0(t);return new jr(t,s,e._key,r,new Ni(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){YT(FT),cl(new co("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Ws(new ZT(r.getProvider("auth-internal")),new nS(o,r.getProvider("app-check-internal")),_S(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),ks(tg,ng,e),ks(tg,ng,"esm2020")})();var wA="firebase",EA="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ks(wA,EA,"app");const TA={apiKey:"AIzaSyAEGSIOlpq_R_V0_Ftw7_ObVWQJa4zUnG8",authDomain:"vargo-88ad4.firebaseapp.com",projectId:"vargo-88ad4",storageBucket:"vargo-88ad4.firebasestorage.app",messagingSenderId:"387632472914",appId:"1:387632472914:web:3f06d98ccd1a6cce6f908b"},SA=Dv(TA),Es=rA(SA);function Jr(t=new Date){const e=new Date(t),n=(e.getDay()+6)%7;e.setDate(e.getDate()-n);const r=e.getFullYear(),s=new Date(r,0,1),i=(s.getDay()+6)%7,o=Math.floor((e-s)/(7*24*3600*1e3)+i/7)+1;return`${r}-${String(o).padStart(2,"0")}`}function tu(t){const[e,n]=t.split("-").map(Number);(new Date(e,0,1).getDay()+6)%7;const s=new Date(e,0,4);return s.setDate(4-(s.getDay()+6)%7),s.setDate(s.getDate()+(n-1)*7),s}function rr(t=new Date){const e=new Date(t),n=r=>String(r).padStart(2,"0");return`${e.getFullYear()}-${n(e.getMonth()+1)}-${n(e.getDate())}`}function c0(t){const e=tu(t),n=new Date(e);n.setDate(e.getDate()+6);const r=s=>s.toLocaleDateString("en-US",{month:"short",day:"numeric"});return`${r(e)}  ${r(n)}`}function mh(t){const e=tu(t);return e.setDate(e.getDate()-7),Jr(e)}function IA(t){const e=tu(t);return e.setDate(e.getDate()+7),Jr(e)}function xA(t){return`${t}:workout_sessions`}function ga(t){return Object.fromEntries(Object.entries(t).filter(([,e])=>e!==void 0))}function h0(t){return t.category==="climbing"?{...t,category:"strength",subtype:"climbing"}:t.category==="plyometrics"?{...t,category:"mobility",subtype:"plyometrics"}:t.category==="stretching"?{...t,category:"mobility",subtype:"stretching"}:t.category==="team_sports"?{...t,category:"cardio"}:t}function sg(t){return t.map(h0)}function AA(t){const[e,n]=se.useState([]),r=se.useRef(new Set);se.useEffect(()=>{let d=!1;n([]);const m=Xm(Es,"users",t,"sessions"),p=u0(m,S=>{if(d)return;const P=S.docs.map(M=>M.data());if(P.length===0&&!r.current.has(t)){r.current.add(t);try{const M=JSON.parse(localStorage.getItem(xA(t))||"[]");if(M.length>0){sg(M).forEach(v=>qi(Pr(m,v.id),ga(v)));return}}catch{}}const b=sg(P);S.docs.forEach(M=>{const T=M.data(),v=h0(T);v.category!==T.category&&qi(Pr(m,v.id),ga(v))}),n(b)});return()=>{d=!0,p()}},[t]);const s=se.useCallback(d=>{const m=d.occurredAt||d.loggedAt||new Date().toISOString(),p={id:crypto.randomUUID(),weekKey:Jr(new Date(m)),...d},S=Xm(Es,"users",t,"sessions");return qi(Pr(S,p.id),ga(p)),p},[t]),i=se.useCallback((d,m)=>{const p=Pr(Es,"users",t,"sessions",d);yA(p,ga(m))},[t]),o=se.useCallback(d=>{vA(Pr(Es,"users",t,"sessions",d))},[t]),l=se.useCallback((d,m,p,S,P)=>{const b=new Date().toISOString();return s({category:d,subtype:m||void 0,durationMinutes:p,notes:S||void 0,loggedAt:b,occurredAt:P||void 0})},[s]),u=se.useCallback(d=>e.filter(m=>m.weekKey===d),[e]),h=se.useCallback(()=>{const d=new Set(e.map(m=>m.weekKey));return Array.from(d).sort().reverse()},[e]);return{sessions:e,addSession:s,updateSession:i,deleteSession:o,logRetroactive:l,getSessionsForWeek:u,getAllWeekKeys:h}}const Qe={strength:{label:"Strength",icon:"",weeklyTarget:3,subtypes:["climbing","weights","HIIT"],subtypeIcons:{climbing:"",weights:"",HIIT:""},color:"blue",accentClass:"text-blue-400",bgClass:"bg-blue-400/10",borderClass:"border-blue-400/30",arcColor:"#60a5fa"},cardio:{label:"Cardio",icon:"",weeklyTarget:3,subtypes:["run","bike","row","swimming","basketball","soccer","frisbee","Orange Theory"],subtypeIcons:{run:"",bike:"",row:"",swimming:"",basketball:"",soccer:"",frisbee:"","Orange Theory":""},color:"cyan",accentClass:"text-cyan-400",bgClass:"bg-cyan-400/10",borderClass:"border-cyan-400/30",arcColor:"#22d3ee"},mobility:{label:"Mobility",icon:"",weeklyTarget:3,subtypes:["plyometrics","yoga","stretching","balance"],subtypeIcons:{plyometrics:"",yoga:"",stretching:"",balance:""},color:"emerald",accentClass:"text-emerald-400",bgClass:"bg-emerald-400/10",borderClass:"border-emerald-400/30",arcColor:"#34d399"},mindfulness:{label:"Mindfulness",icon:"",weeklyTarget:3,subtypes:["meditation","breathing","journaling","reading"],subtypeIcons:{meditation:"",breathing:"",journaling:"",reading:""},color:"purple",accentClass:"text-purple-400",bgClass:"bg-purple-400/10",borderClass:"border-purple-400/30",arcColor:"#a78bfa"}};function wo(t,e,n){const r=Qe[e];if(!r)return{value:0,target:0,unit:"sessions"};const s=(n==null?void 0:n[e])??{target:r.weeklyTarget,unit:"sessions"},i=t.filter(o=>o.category===e);return s.unit==="minutes"?{value:i.reduce((l,u)=>l+(u.durationMinutes||0),0),target:s.target,unit:"minutes"}:{value:i.length,target:s.target,unit:"sessions"}}function CA(t,e){return Object.keys(Qe).every(n=>{const{value:r,target:s}=wo(t,n,e);return r>=s})}function kA(t){try{return JSON.parse(localStorage.getItem(`${t}:streak_records`)||'{"longestWeekly":0,"longestActiveDay":0}')}catch{return{longestWeekly:0,longestActiveDay:0}}}function RA(t,e,n){const r=Jr(),s=se.useMemo(()=>{const l={};for(const d of t)d.weekKey<r&&(l[d.weekKey]||(l[d.weekKey]=[]),l[d.weekKey].push(d));let u=0,h=mh(r);for(let d=0;d<104;d++){const m=l[h]||[];if(!CA(m,n))break;u++,h=mh(h)}return u},[t,r,n]),i=se.useMemo(()=>{const l=new Set(t.map(p=>rr(new Date(p.occurredAt||p.loggedAt))));let u=0;const h=new Date,d=l.has(rr(h))?h:(()=>{const p=new Date(h);return p.setDate(p.getDate()-1),p})(),m=new Date(d);for(let p=0;p<365&&l.has(rr(m));p++)u++,m.setDate(m.getDate()-1);return u},[t]),o=se.useMemo(()=>{const l=t.filter(p=>p.weekKey===r),m=((new Date().getDay()+6)%7+1)/7;return Object.entries(Qe).every(([p,S])=>{const P=l.filter(M=>M.category===p).length,b=Math.floor(S.weeklyTarget*m);return P>=b-1})},[t,r]);return se.useEffect(()=>{const l=kA(e);let u=!1;s>l.longestWeekly&&(l.longestWeekly=s,u=!0),i>l.longestActiveDay&&(l.longestActiveDay=i,u=!0),u&&localStorage.setItem(`${e}:streak_records`,JSON.stringify(l))},[e,s,i]),{weeklyStreak:s,activeDayStreak:i,currentWeekOnTrack:o}}function Ma(){return Object.fromEntries(Object.entries(Qe).map(([t,e])=>[t,{target:e.weeklyTarget,unit:"sessions"}]))}function ig(t){if(t!=null&&t.climbing){t={...t,strength:t.strength??t.climbing};const{climbing:e,...n}=t;t=n}return{...Ma(),...t}}function PA(t){const[e,n]=se.useState(Ma()),r=se.useRef(new Set);se.useEffect(()=>{n(Ma());const i=Pr(Es,"users",t,"meta","settings");return u0(i,l=>{if(l.exists())n(ig(l.data()));else if(!r.current.has(t)){r.current.add(t);try{const u=JSON.parse(localStorage.getItem(`${t}:settings`)||"null");if(u){const h=ig(u);qi(i,h);return}}catch{}n(Ma())}})},[t]);const s=se.useCallback((i,o,l)=>{n(u=>{const h={...u,[i]:{...u[i],[o]:l}};return qi(Pr(Es,"users",t,"meta","settings"),h),h})},[t]);return{settings:e,updateSetting:s}}var Qf={};(function t(e,n,r,s){var i=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",l=function(){if(!e.OffscreenCanvas)return!1;try{var R=new OffscreenCanvas(1,1),A=R.getContext("2d");A.fillRect(0,0,1,1);var $=R.transferToImageBitmap();A.createPattern($,"no-repeat")}catch{return!1}return!0}();function u(){}function h(R){var A=n.exports.Promise,$=A!==void 0?A:e.Promise;return typeof $=="function"?new $(R):(R(u,u),null)}var d=function(R,A){return{transform:function($){if(R)return $;if(A.has($))return A.get($);var Q=new OffscreenCanvas($.width,$.height),X=Q.getContext("2d");return X.drawImage($,0,0),A.set($,Q),Q},clear:function(){A.clear()}}}(l,new Map),m=function(){var R=Math.floor(16.666666666666668),A,$,Q={},X=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(A=function(te){var ee=Math.random();return Q[ee]=requestAnimationFrame(function G(ie){X===ie||X+R-1<ie?(X=ie,delete Q[ee],te()):Q[ee]=requestAnimationFrame(G)}),ee},$=function(te){Q[te]&&cancelAnimationFrame(Q[te])}):(A=function(te){return setTimeout(te,R)},$=function(te){return clearTimeout(te)}),{frame:A,cancel:$}}(),p=function(){var R,A,$={};function Q(X){function te(ee,G){X.postMessage({options:ee||{},callback:G})}X.init=function(G){var ie=G.transferControlToOffscreen();X.postMessage({canvas:ie},[ie])},X.fire=function(G,ie,me){if(A)return te(G,null),A;var Ce=Math.random().toString(36).slice(2);return A=h(function(ye){function Ee(Oe){Oe.data.callback===Ce&&(delete $[Ce],X.removeEventListener("message",Ee),A=null,d.clear(),me(),ye())}X.addEventListener("message",Ee),te(G,Ce),$[Ce]=Ee.bind(null,{data:{callback:Ce}})}),A},X.reset=function(){X.postMessage({reset:!0});for(var G in $)$[G](),delete $[G]}}return function(){if(R)return R;if(!r&&i){var X=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{R=new Worker(URL.createObjectURL(new Blob([X])))}catch(te){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(" Could not load worker",te),null}Q(R)}return R}}(),S={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function P(R,A){return A?A(R):R}function b(R){return R!=null}function M(R,A,$){return P(R&&b(R[A])?R[A]:S[A],$)}function T(R){return R<0?0:Math.floor(R)}function v(R,A){return Math.floor(Math.random()*(A-R))+R}function k(R){return parseInt(R,16)}function O(R){return R.map(U)}function U(R){var A=String(R).replace(/[^0-9a-f]/gi,"");return A.length<6&&(A=A[0]+A[0]+A[1]+A[1]+A[2]+A[2]),{r:k(A.substring(0,2)),g:k(A.substring(2,4)),b:k(A.substring(4,6))}}function B(R){var A=M(R,"origin",Object);return A.x=M(A,"x",Number),A.y=M(A,"y",Number),A}function _(R){R.width=document.documentElement.clientWidth,R.height=document.documentElement.clientHeight}function y(R){var A=R.getBoundingClientRect();R.width=A.width,R.height=A.height}function w(R){var A=document.createElement("canvas");return A.style.position="fixed",A.style.top="0px",A.style.left="0px",A.style.pointerEvents="none",A.style.zIndex=R,A}function I(R,A,$,Q,X,te,ee,G,ie){R.save(),R.translate(A,$),R.rotate(te),R.scale(Q,X),R.arc(0,0,1,ee,G,ie),R.restore()}function C(R){var A=R.angle*(Math.PI/180),$=R.spread*(Math.PI/180);return{x:R.x,y:R.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:R.startVelocity*.5+Math.random()*R.startVelocity,angle2D:-A+(.5*$-Math.random()*$),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:R.color,shape:R.shape,tick:0,totalTicks:R.ticks,decay:R.decay,drift:R.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:R.gravity*3,ovalScalar:.6,scalar:R.scalar,flat:R.flat}}function N(R,A){A.x+=Math.cos(A.angle2D)*A.velocity+A.drift,A.y+=Math.sin(A.angle2D)*A.velocity+A.gravity,A.velocity*=A.decay,A.flat?(A.wobble=0,A.wobbleX=A.x+10*A.scalar,A.wobbleY=A.y+10*A.scalar,A.tiltSin=0,A.tiltCos=0,A.random=1):(A.wobble+=A.wobbleSpeed,A.wobbleX=A.x+10*A.scalar*Math.cos(A.wobble),A.wobbleY=A.y+10*A.scalar*Math.sin(A.wobble),A.tiltAngle+=.1,A.tiltSin=Math.sin(A.tiltAngle),A.tiltCos=Math.cos(A.tiltAngle),A.random=Math.random()+2);var $=A.tick++/A.totalTicks,Q=A.x+A.random*A.tiltCos,X=A.y+A.random*A.tiltSin,te=A.wobbleX+A.random*A.tiltCos,ee=A.wobbleY+A.random*A.tiltSin;if(R.fillStyle="rgba("+A.color.r+", "+A.color.g+", "+A.color.b+", "+(1-$)+")",R.beginPath(),o&&A.shape.type==="path"&&typeof A.shape.path=="string"&&Array.isArray(A.shape.matrix))R.fill(vr(A.shape.path,A.shape.matrix,A.x,A.y,Math.abs(te-Q)*.1,Math.abs(ee-X)*.1,Math.PI/10*A.wobble));else if(A.shape.type==="bitmap"){var G=Math.PI/10*A.wobble,ie=Math.abs(te-Q)*.1,me=Math.abs(ee-X)*.1,Ce=A.shape.bitmap.width*A.scalar,ye=A.shape.bitmap.height*A.scalar,Ee=new DOMMatrix([Math.cos(G)*ie,Math.sin(G)*ie,-Math.sin(G)*me,Math.cos(G)*me,A.x,A.y]);Ee.multiplySelf(new DOMMatrix(A.shape.matrix));var Oe=R.createPattern(d.transform(A.shape.bitmap),"no-repeat");Oe.setTransform(Ee),R.globalAlpha=1-$,R.fillStyle=Oe,R.fillRect(A.x-Ce/2,A.y-ye/2,Ce,ye),R.globalAlpha=1}else if(A.shape==="circle")R.ellipse?R.ellipse(A.x,A.y,Math.abs(te-Q)*A.ovalScalar,Math.abs(ee-X)*A.ovalScalar,Math.PI/10*A.wobble,0,2*Math.PI):I(R,A.x,A.y,Math.abs(te-Q)*A.ovalScalar,Math.abs(ee-X)*A.ovalScalar,Math.PI/10*A.wobble,0,2*Math.PI);else if(A.shape==="star")for(var le=Math.PI/2*3,ot=4*A.scalar,pt=8*A.scalar,mt=A.x,Lt=A.y,ke=5,_e=Math.PI/ke;ke--;)mt=A.x+Math.cos(le)*pt,Lt=A.y+Math.sin(le)*pt,R.lineTo(mt,Lt),le+=_e,mt=A.x+Math.cos(le)*ot,Lt=A.y+Math.sin(le)*ot,R.lineTo(mt,Lt),le+=_e;else R.moveTo(Math.floor(A.x),Math.floor(A.y)),R.lineTo(Math.floor(A.wobbleX),Math.floor(X)),R.lineTo(Math.floor(te),Math.floor(ee)),R.lineTo(Math.floor(Q),Math.floor(A.wobbleY));return R.closePath(),R.fill(),A.tick<A.totalTicks}function E(R,A,$,Q,X){var te=A.slice(),ee=R.getContext("2d"),G,ie,me=h(function(Ce){function ye(){G=ie=null,ee.clearRect(0,0,Q.width,Q.height),d.clear(),X(),Ce()}function Ee(){r&&!(Q.width===s.width&&Q.height===s.height)&&(Q.width=R.width=s.width,Q.height=R.height=s.height),!Q.width&&!Q.height&&($(R),Q.width=R.width,Q.height=R.height),ee.clearRect(0,0,Q.width,Q.height),te=te.filter(function(Oe){return N(ee,Oe)}),te.length?G=m.frame(Ee):ye()}G=m.frame(Ee),ie=ye});return{addFettis:function(Ce){return te=te.concat(Ce),me},canvas:R,promise:me,reset:function(){G&&m.cancel(G),ie&&ie()}}}function je(R,A){var $=!R,Q=!!M(A||{},"resize"),X=!1,te=M(A,"disableForReducedMotion",Boolean),ee=i&&!!M(A||{},"useWorker"),G=ee?p():null,ie=$?_:y,me=R&&G?!!R.__confetti_initialized:!1,Ce=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,ye;function Ee(le,ot,pt){for(var mt=M(le,"particleCount",T),Lt=M(le,"angle",Number),ke=M(le,"spread",Number),_e=M(le,"startVelocity",Number),Zr=M(le,"decay",Number),nu=M(le,"gravity",Number),No=M(le,"drift",Number),Do=M(le,"colors",O),_r=M(le,"ticks",Number),Zs=M(le,"shapes"),Vo=M(le,"scalar"),ei=!!M(le,"flat"),bo=B(le),Mo=mt,es=[],Oo=R.width*bo.x,wr=R.height*bo.y;Mo--;)es.push(C({x:Oo,y:wr,angle:Lt,spread:ke,startVelocity:_e,color:Do[Mo%Do.length],shape:Zs[v(0,Zs.length)],ticks:_r,decay:Zr,gravity:nu,drift:No,scalar:Vo,flat:ei}));return ye?ye.addFettis(es):(ye=E(R,es,ie,ot,pt),ye.promise)}function Oe(le){var ot=te||M(le,"disableForReducedMotion",Boolean),pt=M(le,"zIndex",Number);if(ot&&Ce)return h(function(_e){_e()});$&&ye?R=ye.canvas:$&&!R&&(R=w(pt),document.body.appendChild(R)),Q&&!me&&ie(R);var mt={width:R.width,height:R.height};G&&!me&&G.init(R),me=!0,G&&(R.__confetti_initialized=!0);function Lt(){if(G){var _e={getBoundingClientRect:function(){if(!$)return R.getBoundingClientRect()}};ie(_e),G.postMessage({resize:{width:_e.width,height:_e.height}});return}mt.width=mt.height=null}function ke(){ye=null,Q&&(X=!1,e.removeEventListener("resize",Lt)),$&&R&&(document.body.contains(R)&&document.body.removeChild(R),R=null,me=!1)}return Q&&!X&&(X=!0,e.addEventListener("resize",Lt,!1)),G?G.fire(le,mt,ke):Ee(le,mt,ke)}return Oe.reset=function(){G&&G.reset(),ye&&ye.reset()},Oe}var kt;function Rn(){return kt||(kt=je(null,{useWorker:!0,resize:!0})),kt}function vr(R,A,$,Q,X,te,ee){var G=new Path2D(R),ie=new Path2D;ie.addPath(G,new DOMMatrix(A));var me=new Path2D;return me.addPath(ie,new DOMMatrix([Math.cos(ee)*X,Math.sin(ee)*X,-Math.sin(ee)*te,Math.cos(ee)*te,$,Q])),me}function W(R){if(!o)throw new Error("path confetti are not supported in this browser");var A,$;typeof R=="string"?A=R:(A=R.path,$=R.matrix);var Q=new Path2D(A),X=document.createElement("canvas"),te=X.getContext("2d");if(!$){for(var ee=1e3,G=ee,ie=ee,me=0,Ce=0,ye,Ee,Oe=0;Oe<ee;Oe+=2)for(var le=0;le<ee;le+=2)te.isPointInPath(Q,Oe,le,"nonzero")&&(G=Math.min(G,Oe),ie=Math.min(ie,le),me=Math.max(me,Oe),Ce=Math.max(Ce,le));ye=me-G,Ee=Ce-ie;var ot=10,pt=Math.min(ot/ye,ot/Ee);$=[pt,0,0,pt,-Math.round(ye/2+G)*pt,-Math.round(Ee/2+ie)*pt]}return{type:"path",path:A,matrix:$}}function Z(R){var A,$=1,Q="#000000",X='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof R=="string"?A=R:(A=R.text,$="scalar"in R?R.scalar:$,X="fontFamily"in R?R.fontFamily:X,Q="color"in R?R.color:Q);var te=10*$,ee=""+te+"px "+X,G=new OffscreenCanvas(te,te),ie=G.getContext("2d");ie.font=ee;var me=ie.measureText(A),Ce=Math.ceil(me.actualBoundingBoxRight+me.actualBoundingBoxLeft),ye=Math.ceil(me.actualBoundingBoxAscent+me.actualBoundingBoxDescent),Ee=2,Oe=me.actualBoundingBoxLeft+Ee,le=me.actualBoundingBoxAscent+Ee;Ce+=Ee+Ee,ye+=Ee+Ee,G=new OffscreenCanvas(Ce,ye),ie=G.getContext("2d"),ie.font=ee,ie.fillStyle=Q,ie.fillText(A,Oe,le);var ot=1/$;return{type:"bitmap",bitmap:G.transferToImageBitmap(),matrix:[ot,0,0,ot,-Ce*ot/2,-ye*ot/2]}}n.exports=function(){return Rn().apply(this,arguments)},n.exports.reset=function(){Rn().reset()},n.exports.create=je,n.exports.shapeFromPath=W,n.exports.shapeFromText=Z})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Qf,!1);const f0=Qf.exports;Qf.exports.create;const NA="dc6zaTOxFJmzC",DA="https://api.giphy.com/v1/gifs/random";async function og(t=!1){var r,s,i,o,l,u;const n=`${DA}?api_key=${NA}&tag=${t?"workout+champion":"workout+success"}&rating=g`;try{const h=await fetch(n,{signal:AbortSignal.timeout(4e3)});if(!h.ok)return null;const d=await h.json();return((i=(s=(r=d==null?void 0:d.data)==null?void 0:r.images)==null?void 0:s.downsized)==null?void 0:i.url)??((u=(l=(o=d==null?void 0:d.data)==null?void 0:o.images)==null?void 0:l.original)==null?void 0:u.url)??null}catch{return null}}function VA(){f0({particleCount:60,spread:55,origin:{y:.6},colors:["#60a5fa","#22d3ee","#34d399","#facc15"]})}function bA(){const e={origin:{y:.5}};function n(r,s){f0({...e,...s,particleCount:Math.floor(180*r)})}n(.25,{spread:26,startVelocity:55,colors:["#60a5fa","#3b82f6"]}),n(.2,{spread:60,colors:["#22d3ee","#06b6d4"]}),n(.35,{spread:100,decay:.91,scalar:.8,colors:["#34d399","#10b981"]}),n(.1,{spread:120,startVelocity:25,decay:.92,scalar:1.2,colors:["#facc15"]}),n(.1,{spread:120,startVelocity:45,colors:["#f472b6"]})}const MA=[{id:"dashboard",label:"Dashboard",icon:OA},{id:"log",label:"Log",icon:LA},{id:"history",label:"History",icon:FA}];function OA({active:t}){return x.jsxs("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:t?2.5:2,children:[x.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1"}),x.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"1"}),x.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1"}),x.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1"})]})}function LA({active:t}){return x.jsxs("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:t?2.5:2,children:[x.jsx("circle",{cx:"12",cy:"12",r:"9"}),x.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),x.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]})}function FA({active:t}){return x.jsxs("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:t?2.5:2,children:[x.jsx("circle",{cx:"12",cy:"12",r:"9"}),x.jsx("polyline",{points:"12 7 12 12 15 15"})]})}function jA({activeTab:t,onTabChange:e}){return x.jsx("nav",{className:"flex-shrink-0 bg-slate-900 border-t border-slate-700",style:{paddingBottom:"var(--safe-bottom)"},children:x.jsx("div",{className:"flex",children:MA.map(({id:n,label:r,icon:s})=>{const i=t===n;return x.jsxs("button",{onClick:()=>e(n),className:`flex-1 flex flex-col items-center gap-1 py-3 min-h-[56px] transition-colors ${i?"text-blue-400":"text-slate-500"}`,children:[x.jsx(s,{active:i}),x.jsx("span",{className:`text-xs font-medium ${i?"text-blue-400":"text-slate-500"}`,children:r})]},n)})})})}const d0=["Benton","Leo","Lauren","Jason"],p0="last_user";function UA(){return localStorage.getItem(p0)||d0[0]}function zA(t){localStorage.setItem(p0,t)}function BA({currentUser:t,onUserChange:e,onOpenSettings:n}){return x.jsxs("div",{className:"flex items-center border-b border-slate-800",children:[x.jsx("div",{className:"flex gap-2 px-4 py-2.5 flex-1 overflow-x-auto no-scrollbar",children:d0.map(r=>x.jsx("button",{onClick:()=>e(r),className:`px-4 py-1.5 rounded-full text-sm font-semibold whitespace-nowrap transition-colors flex-shrink-0 ${t===r?"bg-blue-500 text-white":"bg-slate-800 text-slate-400 active:bg-slate-700"}`,children:r},r))}),x.jsx("button",{onClick:n,className:"flex-shrink-0 px-3 py-2.5 text-slate-500 active:text-slate-300 transition-colors","aria-label":"Settings",children:x.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[x.jsx("circle",{cx:"12",cy:"12",r:"3"}),x.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})})]})}function $A({weekKey:t}){const e=c0(t);return x.jsxs("div",{className:"px-4 pt-5 pb-2",children:[x.jsx("p",{className:"text-xs font-semibold uppercase tracking-widest text-slate-500",children:"This Week"}),x.jsx("h1",{className:"text-xl font-bold text-white mt-0.5",children:e})]})}function WA({weeklyStreak:t,activeDayStreak:e}){return x.jsxs("div",{className:"flex gap-3 px-4 py-2",children:[x.jsx(ag,{icon:"",value:t,label:"week streak"}),x.jsx(ag,{icon:"",value:e,label:"day streak"})]})}function ag({icon:t,value:e,label:n}){const r=e>0;return x.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-full text-sm font-semibold transition-colors ${r?"bg-blue-500/20 text-blue-300 border border-blue-500/30":"bg-slate-800 text-slate-500 border border-slate-700"}`,children:[x.jsx("span",{children:t}),x.jsxs("span",{children:[x.jsx("span",{className:r?"text-white font-bold":"",children:e})," ",n]})]})}function HA(t,e){const n=new Date;n.setDate(n.getDate()-1);const r=rr(n),s=new Set(t.filter(o=>{const l=o.occurredAt||o.loggedAt;return l&&rr(new Date(l))===r}).map(o=>o.category)),i=Object.entries(Qe).map(([o,l])=>{const{value:u,target:h,unit:d}=wo(t,o,e),m=Math.max(0,h-u);return{key:o,cfg:l,remaining:m,unit:d,ratio:m/h,doneYesterday:s.has(o)}}).filter(o=>o.remaining>0);return i.sort((o,l)=>o.doneYesterday!==l.doneYesterday?o.doneYesterday?1:-1:l.ratio-o.ratio),i.slice(0,2)}function qA({weekSessions:t}){const{setTab:e,settings:n}=yr(),r=HA(t,n);return r.length===0?x.jsxs("div",{className:"mx-4 mt-3 mb-1 p-4 rounded-xl bg-emerald-500/10 border border-emerald-500/30",children:[x.jsx("p",{className:"text-sm font-semibold text-emerald-400",children:" All targets hit this week!"}),x.jsx("p",{className:"text-xs text-slate-400 mt-0.5",children:"Great work  keep that streak alive."})]}):x.jsxs("div",{className:"mx-4 mt-3 mb-1 p-4 rounded-xl bg-slate-800 border border-slate-700",children:[x.jsx("p",{className:"text-xs font-semibold uppercase tracking-widest text-slate-500 mb-2",children:"Suggested today"}),x.jsx("div",{className:"flex flex-col gap-2",children:r.map(({key:s,cfg:i,remaining:o,unit:l})=>x.jsxs("button",{onClick:()=>e("log"),className:`flex items-center gap-3 p-2 rounded-lg ${i.bgClass} active:scale-95 transition-transform`,children:[x.jsx("span",{className:"text-xl",children:i.icon}),x.jsxs("div",{className:"flex-1 text-left",children:[x.jsx("p",{className:`text-sm font-semibold ${i.accentClass}`,children:i.label}),x.jsx("p",{className:"text-xs text-slate-400",children:l==="minutes"?`${o} min remaining`:`${o} session${o!==1?"s":""} remaining`})]}),x.jsx("span",{className:"text-slate-500",children:""})]},s))})]})}const gh=24,lg=6,ug=56,Nr=2*Math.PI*gh,yh=270/360*Nr,cg=Nr-yh;function KA({categoryKey:t,value:e,target:n,unit:r}){const s=Qe[t],{setTab:i}=yr(),o=se.useRef(null),l=n>0?Math.min(e/n,1):0,u=e>=n&&n>0,h=cg/2,d=l*yh,m=Nr-d-h,p=l>0?s.arcColor:"#334155";se.useEffect(()=>{const P=o.current;if(P)return P.style.setProperty("--arc-length",`${Nr-h}`),P.style.setProperty("--arc-remaining",`${m}`),P.style.strokeDashoffset=Nr-h,P.getBoundingClientRect(),P.classList.add("arc-animated"),()=>P.classList.remove("arc-animated")},[e,m,h]);const S=r==="minutes"?`${e}m`:`${e}/${n}`;return x.jsxs("button",{onClick:()=>i("log"),className:"flex flex-col items-center gap-1 active:scale-90 transition-transform",children:[x.jsxs("svg",{width:ug,height:ug,viewBox:"-4 -4 60 60",children:[x.jsx("circle",{cx:"26",cy:"26",r:gh,fill:"none",stroke:"#1e293b",strokeWidth:lg,strokeDasharray:`${yh} ${cg}`,strokeDashoffset:-h,strokeLinecap:"round",transform:"rotate(-225 26 26)"}),x.jsx("circle",{ref:o,cx:"26",cy:"26",r:gh,fill:"none",stroke:p,strokeWidth:lg,strokeDasharray:`${Nr}`,strokeDashoffset:Nr-h,strokeLinecap:"round",transform:"rotate(-225 26 26)",style:{transition:"stroke 0.3s"}}),x.jsx("text",{x:"26",y:"23",textAnchor:"middle",fontSize:"14",dy:"0.35em",children:s.icon}),x.jsx("text",{x:"26",y:"36",textAnchor:"middle",fontSize:"7.5",fontWeight:"700",fill:u?"#34d399":"#94a3b8",dy:"0.35em",children:S})]}),x.jsx("span",{className:`text-xs font-medium leading-tight text-center ${u?"text-emerald-400":"text-slate-400"}`,children:s.label})]})}function GA({weekSessions:t}){const{settings:e}=yr();return x.jsxs("div",{className:"mx-4 mt-3 p-4 rounded-xl bg-slate-800 border border-slate-700",children:[x.jsx("p",{className:"text-xs font-semibold uppercase tracking-widest text-slate-500 mb-3",children:"This week"}),x.jsx("div",{className:"flex justify-between items-start",children:Object.keys(Qe).map(n=>{const{value:r,target:s,unit:i}=wo(t,n,e);return x.jsx(KA,{categoryKey:n,value:r,target:s,unit:i},n)})})]})}const ec=Object.keys(Qe),QA=["M","T","W","T","F","Sa","Su"],vh=300,YA=150,m0=18,Oa=82,Ar=m0+Oa,XA=7,Ln=vh/XA,hg=24;function JA({weekKey:t,weekSessions:e}){const n=tu(t),r=rr(new Date),s=Array.from({length:7},(o,l)=>{const u=new Date(n);u.setDate(u.getDate()+l);const h=rr(u),d=e.filter(p=>rr(new Date(p.occurredAt||p.loggedAt))===h),m={};for(const p of ec)m[p]=d.filter(S=>S.category===p).reduce((S,P)=>S+(P.durationMinutes||0),0);return{i:l,dayNum:u.getDate(),isToday:h===r,isFuture:h>r,mins:m,total:Object.values(m).reduce((p,S)=>p+S,0)}}),i=Math.max(...s.map(o=>o.total),30);return x.jsxs("div",{className:"mx-4 mt-3 p-4 rounded-xl bg-slate-800 border border-slate-700",children:[x.jsx("p",{className:"text-xs font-semibold uppercase tracking-widest text-slate-500 mb-2",children:"Minutes by Day"}),x.jsx("div",{className:"flex flex-wrap gap-x-3 gap-y-1 mb-3",children:ec.map(o=>x.jsxs("span",{className:"flex items-center gap-1 text-xs text-slate-400",children:[x.jsx("span",{className:"inline-block w-2 h-2 rounded-full",style:{backgroundColor:Qe[o].arcColor}}),Qe[o].label]},o))}),x.jsxs("svg",{viewBox:`0 0 ${vh} ${YA}`,width:"100%",style:{overflow:"visible"},children:[s.map(({i:o,isToday:l})=>l?x.jsx("rect",{x:o*Ln+2,y:m0-8,width:Ln-4,height:Oa+8,rx:5,fill:"rgba(59,130,246,0.10)"},`hl-${o}`):null),x.jsx("line",{x1:0,y1:Ar,x2:vh,y2:Ar,stroke:"#334155",strokeWidth:1}),s.map(({i:o,mins:l,total:u,isToday:h,isFuture:d})=>{const m=o*Ln+Ln/2,p=m-hg/2;let S=Ar;const P=[];for(const M of ec){const T=l[M];if(T===0)continue;const v=T/i*Oa,k=S-v;P.push({key:M,bx:p,segY:k,segH:v,color:Qe[M].arcColor}),S=k}const b=u>0?Ar-u/i*Oa:Ar;return x.jsxs("g",{children:[P.map(({key:M,bx:T,segY:v,segH:k,color:O},U)=>x.jsx("rect",{x:T,y:v,width:hg,height:k+(U<P.length-1?1:0),rx:U===P.length-1?3:0,fill:O,opacity:d?.3:.9},M)),u>0&&x.jsx("text",{x:m,y:b-3,textAnchor:"middle",fontSize:9,fill:h?"#93c5fd":"#64748b",fontWeight:"600",children:u})]},o)}),s.map(({i:o,isToday:l})=>x.jsx("text",{x:o*Ln+Ln/2,y:Ar+14,textAnchor:"middle",fontSize:11,fontWeight:l?"700":"500",fill:l?"#60a5fa":"#64748b",children:QA[o]},`dl-${o}`)),s.map(({i:o,dayNum:l,isToday:u})=>x.jsx("text",{x:o*Ln+Ln/2,y:Ar+27,textAnchor:"middle",fontSize:9,fill:u?"#93c5fd":"#475569",children:l},`dd-${o}`))]})]})}const fg=Object.keys(Qe);function ZA({weekSessions:t}){const[e,n]=se.useState(null),r={};for(const l of fg)r[l]=t.filter(u=>u.category===l).reduce((u,h)=>u+(h.durationMinutes||0),0);const s=Math.max(...Object.values(r),1),i=Object.values(r).reduce((l,u)=>l+u,0);function o(l){n(u=>u===l?null:l)}return x.jsxs("div",{className:"mx-4 mt-3 p-4 rounded-xl bg-slate-800 border border-slate-700",children:[x.jsxs("div",{className:"flex items-baseline justify-between mb-3",children:[x.jsx("p",{className:"text-xs font-semibold uppercase tracking-widest text-slate-500",children:"Weekly Minutes"}),i>0&&x.jsxs("p",{className:"text-xs font-semibold text-slate-400",children:[i," min total"]})]}),x.jsx("div",{className:"flex flex-col gap-3",children:fg.map(l=>{const u=Qe[l],h=r[l],d=h/s*100,m=e===l,p=t.filter(S=>S.category===l).sort((S,P)=>new Date(P.occurredAt||P.loggedAt)-new Date(S.occurredAt||S.loggedAt));return x.jsxs("div",{children:[x.jsxs("div",{className:`flex items-center gap-3 ${h>0?"cursor-pointer":""}`,onClick:()=>h>0&&o(l),children:[x.jsx("span",{className:"text-base w-5 text-center flex-shrink-0",children:u.icon}),x.jsx("span",{className:"text-xs font-medium text-slate-400 w-20 flex-shrink-0 truncate",children:u.label}),x.jsx("div",{className:"flex-1 h-3 rounded-full bg-slate-700 overflow-hidden",children:x.jsx("div",{className:"h-full rounded-full transition-all duration-700 ease-out",style:{width:h>0?`${d}%`:"0%",backgroundColor:u.arcColor,minWidth:h>0?"6px":"0"}})}),x.jsx("span",{className:"text-xs font-semibold w-12 text-right flex-shrink-0",style:{color:h>0?u.arcColor:"#475569"},children:h>0?`${h}m`:""})]}),m&&x.jsx("div",{className:"mt-2 ml-8 flex flex-col gap-1.5",children:p.map(S=>{var T;const P=S.subtype&&((T=u.subtypeIcons)==null?void 0:T[S.subtype]),M=new Date(S.occurredAt||S.loggedAt).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"});return x.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-400",children:[x.jsxs("span",{className:"flex items-center gap-1",children:[P&&x.jsx("span",{children:P}),x.jsx("span",{children:S.subtype||u.label})]}),x.jsx("span",{className:"text-slate-500",children:M}),x.jsxs("span",{style:{color:u.arcColor},children:[S.durationMinutes,"m"]})]},S.id)})})]},l)})})]})}function eC(){const{currentWeekKey:t,currentWeekSessions:e,streak:n}=yr();return x.jsxs("div",{className:"pb-6 slide-up",children:[x.jsx($A,{weekKey:t}),x.jsx(WA,{weeklyStreak:n.weeklyStreak,activeDayStreak:n.activeDayStreak}),x.jsx(qA,{weekSessions:e}),x.jsx(GA,{weekSessions:e}),x.jsx(JA,{weekKey:t,weekSessions:e}),x.jsx(ZA,{weekSessions:e})]})}const tC=Object.entries(Qe).map(([t,e])=>({catKey:t,cfg:e,items:e.subtypes.length>0?e.subtypes.map(n=>{var r;return{label:n,subtype:n,icon:((r=e.subtypeIcons)==null?void 0:r[n])??e.icon}}):[{label:e.label,subtype:null,icon:e.icon}]}));function nC({onSelect:t}){return x.jsxs("div",{className:"px-4 pt-5 pb-4",children:[x.jsx("h2",{className:"text-xl font-bold text-white mb-0.5",children:"Log Workout"}),x.jsx("p",{className:"text-sm text-slate-400 mb-5",children:"What did you do?"}),x.jsx("div",{className:"flex flex-col gap-5",children:tC.map(({catKey:e,cfg:n,items:r})=>x.jsxs("div",{children:[n.subtypes.length>0&&x.jsxs("p",{className:`text-xs font-bold uppercase tracking-widest mb-2 ${n.accentClass}`,children:[n.icon," ",n.label]}),x.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(({label:s,subtype:i,icon:o})=>x.jsxs("button",{onClick:()=>t(e,i),className:`flex items-center gap-2 px-4 py-3 rounded-2xl border ${n.bgClass} ${n.borderClass} active:scale-95 transition-transform`,children:[x.jsx("span",{className:"text-lg",children:o}),x.jsx("span",{className:`text-sm font-semibold capitalize ${n.accentClass}`,children:s})]},s))})]},e))})]})}function rC(t=new Date){const e=new Date(t),n=r=>String(r).padStart(2,"0");return`${e.getFullYear()}-${n(e.getMonth()+1)}-${n(e.getDate())}T${n(e.getHours())}:${n(e.getMinutes())}`}function sC({categoryKey:t,subtype:e,onBack:n,onSaved:r}){const s=Qe[t],{logRetroactive:i}=yr(),[o,l]=se.useState(""),[u,h]=se.useState(""),[d,m]=se.useState(()=>rC()),[p,S]=se.useState(!1);async function P(){const T=parseInt(o,10);if(!T||T<1)return;S(!0);const v=d?new Date(d).toISOString():void 0,k=i(t,e,T,u||void 0,v);r(k)}const b=e?`  ${e}`:"",M=`${s.icon} ${s.label}${b}`;return x.jsxs("div",{className:"px-4 pt-6 pb-4 slide-up",children:[x.jsxs("button",{onClick:n,className:"flex items-center gap-1 text-slate-400 text-sm mb-5",children:[x.jsx("span",{children:""})," Back"]}),x.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:M}),x.jsx("p",{className:"text-sm text-slate-400 mb-6",children:"Enter workout details"}),x.jsxs("label",{className:"block mb-4",children:[x.jsx("span",{className:"text-xs font-semibold uppercase tracking-widest text-slate-500 mb-2 block",children:"When did you work out?"}),x.jsx("input",{type:"datetime-local",value:d,onChange:T=>m(T.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3.5 text-white text-base font-medium focus:outline-none focus:border-blue-500 [color-scheme:dark]"})]}),x.jsxs("label",{className:"block mb-4",children:[x.jsx("span",{className:"text-xs font-semibold uppercase tracking-widest text-slate-500 mb-2 block",children:"Duration (minutes) *"}),x.jsx("input",{type:"number",inputMode:"numeric",min:"1",max:"600",value:o,onChange:T=>l(T.target.value),placeholder:"e.g. 45",className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3.5 text-white text-lg font-semibold placeholder-slate-600 focus:outline-none focus:border-blue-500"})]}),x.jsxs("label",{className:"block mb-6",children:[x.jsx("span",{className:"text-xs font-semibold uppercase tracking-widest text-slate-500 mb-2 block",children:"Notes (optional)"}),x.jsx("textarea",{value:u,onChange:T=>h(T.target.value),placeholder:"How did it go?",rows:3,className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder-slate-600 focus:outline-none focus:border-blue-500 resize-none"})]}),x.jsx("button",{onClick:P,disabled:!o||parseInt(o,10)<1||p,className:`w-full py-4 rounded-2xl font-bold text-lg transition-all active:scale-95 ${o&&parseInt(o,10)>=1?`${s.bgClass} ${s.accentClass} border ${s.borderClass}`:"bg-slate-800 text-slate-600 border border-slate-700 cursor-not-allowed"}`,children:p?"Saving":"Save Workout"})]})}function iC(){const{onSessionSaved:t}=yr(),[e,n]=se.useState("pick"),[r,s]=se.useState(null),[i,o]=se.useState(null);function l(h,d){s(h),o(d??null),n("form")}function u(){n("pick"),s(null),o(null)}return x.jsxs("div",{children:[e==="pick"&&x.jsx(nC,{onSelect:l}),e==="form"&&r&&x.jsx(sC,{categoryKey:r,subtype:i,onBack:u,onSaved:h=>{u(),t(h)}})]})}function oC({weekKey:t,onWeekChange:e}){const n=Jr(),r=t===n;return x.jsxs("div",{className:"flex items-center justify-between px-4 py-4",children:[x.jsx("button",{onClick:()=>e(mh(t)),className:"w-10 h-10 flex items-center justify-center rounded-full bg-slate-800 text-slate-300 active:scale-90 transition-transform",children:""}),x.jsxs("div",{className:"text-center",children:[x.jsx("p",{className:"text-sm font-semibold text-white",children:c0(t)}),r&&x.jsx("p",{className:"text-xs text-blue-400 mt-0.5",children:"This week"})]}),x.jsx("button",{onClick:()=>e(IA(t)),disabled:r,className:`w-10 h-10 flex items-center justify-center rounded-full transition-transform ${r?"bg-slate-800/40 text-slate-700 cursor-not-allowed":"bg-slate-800 text-slate-300 active:scale-90"}`,children:""})]})}function aC({session:t,onEdit:e,onDelete:n}){var p;const r=Qe[t.category],s=(t.subtype&&((p=r.subtypeIcons)==null?void 0:p[t.subtype]))??r.icon,i=new Date(t.occurredAt||t.loggedAt),o=i.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),l=i.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),u=t.occurredAt&&new Date(t.occurredAt).toDateString(),h=new Date(t.loggedAt).toDateString(),d=t.occurredAt&&u!==h,m=t.subtype?`  ${t.subtype}`:"";return x.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-xl bg-slate-800 border ${r.borderClass}`,children:[x.jsx("span",{className:"text-2xl mt-0.5",children:s}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsxs("p",{className:`text-sm font-bold ${r.accentClass}`,children:[r.label,m]}),x.jsxs("p",{className:"text-xs text-slate-400 mt-0.5",children:[o,"  ",l,"  ",t.durationMinutes," min"]}),d&&x.jsxs("p",{className:"text-xs text-slate-600 mt-0.5",children:["logged ",new Date(t.loggedAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})]}),t.notes&&x.jsx("p",{className:"text-xs text-slate-500 mt-1 truncate",children:t.notes})]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{onClick:()=>e(t),className:"w-8 h-8 flex items-center justify-center rounded-lg bg-slate-700 text-slate-300 text-sm active:scale-90 transition-transform",children:""}),x.jsx("button",{onClick:()=>n(t.id),className:"w-8 h-8 flex items-center justify-center rounded-lg bg-slate-700 text-slate-400 text-sm active:scale-90 transition-transform",children:""})]})]})}function lC({session:t,onSave:e,onClose:n}){const r=Qe[t.category],[s,i]=se.useState(String(t.durationMinutes)),[o,l]=se.useState(t.notes||"");function u(){const h=parseInt(s,10);!h||h<1||e({durationMinutes:h,notes:o||void 0})}return x.jsx("div",{className:"fixed inset-0 z-40 flex items-end justify-center p-4 fade-in",style:{background:"rgba(0,0,0,0.6)"},onClick:n,children:x.jsxs("div",{className:"w-full max-w-lg rounded-3xl bg-slate-800 border border-slate-700 p-6 shadow-2xl slide-up",onClick:h=>h.stopPropagation(),children:[x.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[x.jsx("span",{className:"text-3xl",children:r.icon}),x.jsxs("div",{children:[x.jsx("p",{className:`text-base font-bold ${r.accentClass}`,children:r.label}),t.subtype&&x.jsx("p",{className:"text-xs text-slate-400 capitalize",children:t.subtype})]})]}),x.jsxs("label",{className:"block mb-4",children:[x.jsx("span",{className:"text-xs font-semibold uppercase tracking-widest text-slate-500 mb-2 block",children:"Duration (minutes)"}),x.jsx("input",{type:"number",inputMode:"numeric",min:"1",value:s,onChange:h=>i(h.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-xl px-4 py-3 text-white text-lg font-semibold focus:outline-none focus:border-blue-500"})]}),x.jsxs("label",{className:"block mb-6",children:[x.jsx("span",{className:"text-xs font-semibold uppercase tracking-widest text-slate-500 mb-2 block",children:"Notes"}),x.jsx("textarea",{value:o,onChange:h=>l(h.target.value),rows:3,className:"w-full bg-slate-700 border border-slate-600 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:border-blue-500 resize-none"})]}),x.jsxs("div",{className:"flex gap-3",children:[x.jsx("button",{onClick:n,className:"flex-1 py-3.5 rounded-2xl border border-slate-600 text-slate-300 font-semibold active:scale-95 transition-transform",children:"Cancel"}),x.jsx("button",{onClick:u,disabled:!s||parseInt(s,10)<1,className:`flex-1 py-3.5 rounded-2xl font-bold transition-all active:scale-95 ${s&&parseInt(s,10)>=1?"bg-blue-500 text-white":"bg-slate-700 text-slate-500 cursor-not-allowed"}`,children:"Save"})]})]})})}function uC(){const{getSessionsForWeek:t,deleteSession:e,updateSession:n}=yr(),[r,s]=se.useState(Jr()),[i,o]=se.useState(null),u=[...t(r)].sort((d,m)=>new Date(m.occurredAt||m.loggedAt)-new Date(d.occurredAt||d.loggedAt));function h(d){window.confirm("Delete this workout?")&&e(d)}return x.jsxs("div",{className:"pb-6 slide-up",children:[x.jsx("div",{className:"px-4 pt-5 pb-1",children:x.jsx("h2",{className:"text-xl font-bold text-white",children:"History"})}),x.jsx(oC,{weekKey:r,onWeekChange:s}),x.jsx("div",{className:"px-4 flex flex-col gap-3",children:u.length===0?x.jsxs("div",{className:"text-center py-12",children:[x.jsx("p",{className:"text-4xl mb-3",children:""}),x.jsx("p",{className:"text-slate-400 text-sm",children:"No workouts logged this week."})]}):u.map(d=>x.jsx(aC,{session:d,onEdit:o,onDelete:h},d.id))}),i&&x.jsx(lC,{session:i,onSave:d=>{n(i.id,d),o(null)},onClose:()=>o(null)})]})}function cC({gif:t,big:e,onClose:n}){return se.useEffect(()=>{const r=setTimeout(n,5e3);return()=>clearTimeout(r)},[n]),x.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6 fade-in",style:{background:"rgba(0,0,0,0.75)"},onClick:n,children:x.jsxs("div",{className:"w-full max-w-sm rounded-3xl bg-slate-800 border border-slate-700 overflow-hidden shadow-2xl slide-up",onClick:r=>r.stopPropagation(),children:[t?x.jsx("img",{src:t,alt:"Celebration",className:"w-full object-cover",style:{maxHeight:280}}):x.jsx("div",{className:"flex items-center justify-center py-16 text-7xl",children:e?"":""}),x.jsxs("div",{className:"px-6 py-5 text-center",children:[x.jsx("p",{className:"text-2xl font-bold text-white mb-1",children:e?" Week Complete!":" Target Hit!"}),x.jsx("p",{className:"text-sm text-slate-400",children:e?"You crushed every goal this week. Keep it up!":"You hit your target for this category. Nice work!"}),x.jsx("button",{onClick:n,className:"mt-4 w-full py-3 rounded-2xl bg-blue-500 text-white font-bold active:scale-95 transition-transform",children:"Keep Going "})]})]})})}function hC({onClose:t}){const{settings:e,updateSetting:n,currentUser:r}=yr();return x.jsx("div",{className:"fixed inset-0 z-50 flex items-end justify-center fade-in",style:{background:"rgba(0,0,0,0.6)"},onClick:t,children:x.jsxs("div",{className:"w-full max-w-lg bg-slate-900 border-t border-slate-700 rounded-t-3xl slide-up",style:{paddingBottom:"calc(var(--safe-bottom) + 1rem)"},onClick:s=>s.stopPropagation(),children:[x.jsx("div",{className:"flex justify-center pt-3 pb-1",children:x.jsx("div",{className:"w-10 h-1 rounded-full bg-slate-700"})}),x.jsxs("div",{className:"px-5 pb-2 pt-2",children:[x.jsxs("div",{className:"flex items-baseline justify-between mb-4",children:[x.jsxs("div",{children:[x.jsx("h2",{className:"text-lg font-bold text-white",children:"Goals"}),x.jsxs("p",{className:"text-xs text-slate-500",children:[r,"'s weekly targets"]})]}),x.jsx("button",{onClick:t,className:"text-slate-400 text-sm font-medium",children:"Done"})]}),x.jsx("div",{className:"flex flex-col gap-4",children:Object.entries(Qe).map(([s,i])=>{const o=e[s]??{target:i.weeklyTarget,unit:"sessions"};return x.jsxs("div",{className:"flex flex-col gap-2",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"text-base",children:i.icon}),x.jsx("span",{className:"text-sm font-semibold text-white",children:i.label})]}),x.jsxs("div",{className:"flex items-center gap-3 pl-7",children:[x.jsx("div",{className:"flex rounded-lg overflow-hidden border border-slate-700",children:["sessions","minutes"].map(l=>x.jsx("button",{onClick:()=>n(s,"unit",l),className:`px-3 py-1.5 text-xs font-semibold transition-colors ${o.unit===l?`${i.bgClass} ${i.accentClass}`:"bg-slate-800 text-slate-500"}`,children:l==="sessions"?"# sessions":" minutes"},l))}),x.jsxs("div",{className:"flex items-center gap-1 ml-auto",children:[x.jsx("button",{onClick:()=>n(s,"target",Math.max(0,o.target-1)),className:"w-8 h-8 flex items-center justify-center rounded-lg bg-slate-800 text-slate-300 text-lg active:bg-slate-700",children:""}),o.unit==="minutes"?x.jsxs("div",{className:"flex items-center",children:[x.jsx("input",{type:"number",min:"0",value:o.target,onChange:l=>{const u=parseInt(l.target.value,10);!isNaN(u)&&u>=0&&n(s,"target",u)},className:"w-14 text-center text-sm font-bold text-white bg-slate-700 rounded-lg py-1 border border-slate-600 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),x.jsx("span",{className:"text-xs text-slate-400 ml-1",children:"m"})]}):x.jsxs("span",{className:"w-12 text-center text-sm font-bold text-white",children:[o.target,"x"]}),x.jsx("button",{onClick:()=>n(s,"target",o.target+1),className:"w-8 h-8 flex items-center justify-center rounded-lg bg-slate-800 text-slate-300 text-lg active:bg-slate-700",children:"+"})]})]})]},s)})})]})]})})}const g0=se.createContext(null);function yr(){return se.useContext(g0)}function fC(){const[t,e]=se.useState("dashboard"),[n,r]=se.useState(UA),[s,i]=se.useState(!1),o=AA(n),{settings:l,updateSetting:u}=PA(n),h=RA(o.sessions,n,l),[d,m]=se.useState(null),p=Jr(),S=o.getSessionsForWeek(p);function P(v){r(v),zA(v),e("dashboard")}const b=se.useCallback(async v=>{const O=[...o.getSessionsForWeek(v.weekKey).filter(w=>w.id!==v.id),v],U=Object.keys(Qe).every(w=>{const{value:I,target:C}=wo(O,w,l);return I>=C}),{value:B,target:_}=wo(O,v.category,l),y=B===_&&_>0;if(U){bA();const w=await og(!0);m({gif:w,big:!0})}else if(y){VA();const w=await og(!1);m({gif:w,big:!1})}},[o,l]),M=se.useCallback(v=>{b(v),e("dashboard")},[b]),T={...o,streak:h,settings:l,updateSetting:u,currentUser:n,currentWeekKey:p,currentWeekSessions:S,setTab:e,onSessionSaved:M,openSettings:()=>i(!0)};return x.jsxs(g0.Provider,{value:T,children:[x.jsxs("div",{className:"flex flex-col h-[100dvh] bg-slate-900 text-white overflow-hidden",children:[x.jsx("div",{style:{paddingTop:"var(--safe-top)"}}),x.jsx(BA,{currentUser:n,onUserChange:P,onOpenSettings:()=>i(!0)}),x.jsxs("main",{className:"flex-1 overflow-y-auto overscroll-none",children:[t==="dashboard"&&x.jsx(eC,{}),t==="log"&&x.jsx(iC,{}),t==="history"&&x.jsx(uC,{})]}),x.jsx(jA,{activeTab:t,onTabChange:e})]}),d&&x.jsx(cC,{gif:d.gif,big:d.big,onClose:()=>m(null)}),s&&x.jsx(hC,{onClose:()=>i(!1)})]})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/workout-tracker/sw.js").catch(()=>{})});tc.createRoot(document.getElementById("root")).render(x.jsx(tw.StrictMode,{children:x.jsx(fC,{})}));
